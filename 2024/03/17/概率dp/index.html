<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>概率dp | Totoroの旅</title><meta name="author" content="Totoro"><meta name="copyright" content="Totoro"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="概率dp概率dp,一般来说，我们将dp数组存放的数据定义为到达此状态的概率，那么我们初值设置就是所有初始状态概率为1，最终答案就是终末状态dp值了。 我们在进行状态转移时，是从初始状态向终末状态顺推，转移方程中大致思路是按照当前状态去往不同状态的位置概率转移更新DP，且大部分是加法。 期望dp用于求解期望的DP。这类问题一般将dp[数组]存放的数据定义为到达终态还需要的期望值。那么初值设置">
<meta property="og:type" content="article">
<meta property="og:title" content="概率dp">
<meta property="og:url" content="http://totorocatcat.top/2024/03/17/%E6%A6%82%E7%8E%87dp/index.html">
<meta property="og:site_name" content="Totoroの旅">
<meta property="og:description" content="概率dp概率dp,一般来说，我们将dp数组存放的数据定义为到达此状态的概率，那么我们初值设置就是所有初始状态概率为1，最终答案就是终末状态dp值了。 我们在进行状态转移时，是从初始状态向终末状态顺推，转移方程中大致思路是按照当前状态去往不同状态的位置概率转移更新DP，且大部分是加法。 期望dp用于求解期望的DP。这类问题一般将dp[数组]存放的数据定义为到达终态还需要的期望值。那么初值设置">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://npm.elemecdn.com/ushio-api-img-moe@5.0.79/img_790_540x756_72_null_normal.jpg">
<meta property="article:published_time" content="2024-03-17T14:14:45.000Z">
<meta property="article:modified_time" content="2024-03-20T15:07:27.411Z">
<meta property="article:author" content="Totoro">
<meta property="article:tag" content="兴趣&amp;提高">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://npm.elemecdn.com/ushio-api-img-moe@5.0.79/img_790_540x756_72_null_normal.jpg"><link rel="shortcut icon" href="https://source.fomal.cc/img/default_cover_227.webp"><link rel="canonical" href="http://totorocatcat.top/2024/03/17/%E6%A6%82%E7%8E%87dp/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css?v=4.12.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '概率dp',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-20 23:07:27'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/scrollbar.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/px3.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">182</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 趣味</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://npm.elemecdn.com/ushio-api-img-moe@5.0.79/img_790_540x756_72_null_normal.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Totoroの旅"><span class="site-name">Totoroの旅</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 趣味</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">概率dp<a class="post-edit-link" href="null_posts/概率dp.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-03-17T14:14:45.000Z" title="发表于 2024-03-17 22:14:45">2024-03-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-20T15:07:27.411Z" title="更新于 2024-03-20 23:07:27">2024-03-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ACM%E3%81%AE%E6%97%85/">ACMの旅</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>43分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="概率dp"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=478507889&auto=1&height=66"></iframe>


<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/f5c899b72b85790e66c12e3aa900700e688e3db8.jpg@1256w_890h_!web-article-pic.avif" alt="img"></p>
<h1 id="概率dp"><a href="#概率dp" class="headerlink" title="概率dp"></a>概率dp</h1><p>概率dp,一般来说，我们将dp数组存放的数据定义为到达此状态的概率，那么我们初值设置就是所有初始状态概率为1，最终答案就是终末状态dp值了。</p>
<p>我们在进行状态转移时，是从初始状态向终末状态顺推，转移方程中大致思路是按照当前状态去往不同状态的位置概率转移更新DP，且大部分是加法。</p>
<h1 id="期望dp"><a href="#期望dp" class="headerlink" title="期望dp"></a>期望dp</h1><p>用于求解期望的DP。这类问题一般将dp[数组]存放的数据定义为到达终态还需要的期望值。那么初值设置就是终末状态期望为0，答案就是初始状态的dp值了。</p>
<p>我们在进行状态转移时，一般是从终末状态逆推到起始状态，转移方程大致思路是找到当前状态所有可以转移到的状态，将它们的期望依概率相加即可。</p>
<h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><h2 id="A-Scout-YYF-I"><a href="#A-Scout-YYF-I" class="headerlink" title="A - Scout YYF I"></a>A - Scout YYF I</h2><p>YYF is a couragous scout. Now he is on a dangerous mission which is to penetrate into the enemy’s base. After overcoming a series difficulties, YYF is now at the start of enemy’s famous “mine road”. This is a very long road, on which there are numbers of mines. At first, YYF is at step one. For each step after that, YYF will walk one step with a probability of <em>p</em>, or jump two step with a probality of 1-<em>p</em>. Here is the task, given the place of each mine, please calculate the probality that YYF can go through the “mine road” safely.</p>
<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>The input contains many test cases ended with <strong>EOF</strong>.<br>Each test case contains two lines.<br>The First line of each test case is <em>N</em> (1 ≤ <em>N</em> ≤ 10) and <em>p</em> (0.25 ≤ <em>p</em> ≤ 0.75) seperated by a single blank, standing for the number of mines and the probability to walk one step.<br>The Second line of each test case is N integer standing for the place of N mines. Each integer is in the range of [1, 100000000].</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>For each test case, output the probabilty in a single line with the precision to 7 digits after the decimal point.</p>
<h3 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Inputcopy</th>
<th>Outputcopy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>1 0.5 2 2 0.5 2 4</code></td>
<td><code>0.5000000 0.2500000</code></td>
</tr>
</tbody>
</table>
</div>
<p>本题递推式非常容易</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[i]=dp[i<span class="number">-1</span>]*p+dp[i<span class="number">-2</span>]*(<span class="number">1</span>-p)</span><br></pre></td></tr></table></figure>
<p>但是直接这样子时空都不会满足</p>
<p>因此考虑矩阵加速递推</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dp[i]  =p  <span class="number">1</span>-p   dp[i<span class="number">-1</span>]</span><br><span class="line"> dp[i<span class="number">-1</span>]=<span class="number">1</span>   <span class="number">0</span>    dp[i<span class="number">-2</span>]</span><br></pre></td></tr></table></figure>
<p>于是重新进行定义：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[i]=dp[i<span class="number">-1</span>]*(<span class="number">1</span>-<span class="built_in">p</span>(这里是走到dp[i]的概率))</span><br></pre></td></tr></table></figure>
<p>需要递推中间部分</p>
<p>递推a[i]-a[i-1]+1次</p>
<p>矩阵快速幂方面就不解释了</p>
<p>和最普通的快速幂其实差距不大</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dp[i]=dp[i-1]*p+dp[i-2]*(1-p)</span></span><br><span class="line"><span class="comment">// 和斐波那契很像</span></span><br><span class="line"><span class="comment">// 可以考虑加速</span></span><br><span class="line"><span class="comment">// dp[i]  =p  1-p   dp[i-1]</span></span><br><span class="line"><span class="comment">// dp[i-1]=1   0    dp[i-2]</span></span><br><span class="line"><span class="comment">// 正确性显然</span></span><br><span class="line"><span class="comment">// 应该是这样子</span></span><br><span class="line"><span class="comment">// dp[i]=dp[i-1]*(1-p(这里是走到dp[i]的概率，所谓递推来自于此))</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i, a, n) for (int i = a; i &lt;= n; i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> frep(i, a, n) for (int i = a; i &gt;= n; i--)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="type">double</span> dp[N];</span><br><span class="line"><span class="type">double</span> p;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">matrix</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> b[<span class="number">2</span>][<span class="number">2</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">matrix <span class="title">chenfa</span><span class="params">(matrix a, matrix b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    matrix ans;</span><br><span class="line">    <span class="built_in">memset</span>(ans.b, <span class="number">0</span>, <span class="keyword">sizeof</span> ans.b);</span><br><span class="line">    <span class="built_in">rep</span>(i, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">rep</span>(j, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">rep</span>(k, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                ans.b[i][j] += a.b[i][k] * b.b[k][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">matrix_pow</span><span class="params">(matrix a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    matrix ans;</span><br><span class="line">    ans.b[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    ans.b[<span class="number">0</span>][<span class="number">1</span>]=<span class="number">0</span>;;</span><br><span class="line">    ans.b[<span class="number">1</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    ans.b[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (b &amp; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            ans = <span class="built_in">chenfa</span>(ans, a);</span><br><span class="line">        &#125;</span><br><span class="line">        b /= <span class="number">2</span>;</span><br><span class="line">        a = <span class="built_in">chenfa</span>(a, a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans.b[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (cin &gt;&gt; n &gt;&gt; p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span> dp);</span><br><span class="line">        a[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">rep</span>(i, <span class="number">1</span>, n)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(a, a + n + <span class="number">1</span>);</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">1.0</span>;</span><br><span class="line">        matrix c = &#123;p, <span class="number">1</span> - p, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line">        <span class="built_in">rep</span>(i, <span class="number">1</span>, n)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[i] = dp[i - <span class="number">1</span>] * (<span class="number">1</span> - <span class="built_in">matrix_pow</span>(c, a[i] - a[i - <span class="number">1</span>] - <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.7f\n&quot;</span>, dp[n]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="B-Collecting-Bugs"><a href="#B-Collecting-Bugs" class="headerlink" title="B - Collecting Bugs"></a>B - Collecting Bugs</h2><p>Ivan is fond of collecting. Unlike other people who collect post stamps, coins or other material stuff, he collects software bugs. When Ivan gets a new program, he classifies all possible bugs into n categories. Each day he discovers exactly one bug in the program and adds information about it and its category into a spreadsheet. When he finds bugs in all bug categories, he calls the program disgusting, publishes this spreadsheet on his home page, and forgets completely about the program.<br>Two companies, Macrosoft and Microhard are in tight competition. Microhard wants to decrease sales of one Macrosoft program. They hire Ivan to prove that the program in question is disgusting. However, Ivan has a complicated problem. This new program has s subcomponents, and finding bugs of all types in each subcomponent would take too long before the target could be reached. So Ivan and Microhard agreed to use a simpler criteria —- Ivan should find at least one bug in each subsystem and at least one bug of each category.<br>Macrosoft knows about these plans and it wants to estimate the time that is required for Ivan to call its program disgusting. It’s important because the company releases a new version soon, so it can correct its plans and release it quicker. Nobody would be interested in Ivan’s opinion about the reliability of the obsolete version.<br>A bug found in the program can be of any category with equal probability. Similarly, the bug can be found in any given subsystem with equal probability. Any particular bug cannot belong to two different categories or happen simultaneously in two different subsystems. The number of bugs in the program is almost infinite, so the probability of finding a new bug of some category in some subsystem does not reduce after finding any number of bugs of that category in that subsystem.<br>Find an average time (in days of Ivan’s work) required to name the program disgusting.</p>
<h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>Input file contains two integer numbers, n and s (0 &lt; n, s &lt;= 1 000).</p>
<h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>Output the expectation of the Ivan’s working days needed to call the program disgusting, accurate to 4 digits after the decimal point.</p>
<h3 id="Sample-1"><a href="#Sample-1" class="headerlink" title="Sample"></a>Sample</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Inputcopy</th>
<th>Outputcopy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>1 2</code></td>
<td><code>3.0000</code></td>
</tr>
</tbody>
</table>
</div>
<p>上一题求概率，因此是顺</p>
<p>本题求天数的期望，因此是逆推</p>
<p>题意：</p>
<p>一个程序员每天都可以找到一个 b u g，每个 b u g  都属于一个子系统及一个分类，且属于某个子系统的概率为 $\frac{1}{s}$ ，属于某个分类的概率为$\frac{1}{n}$   。求该程序员发现了 n  种 b u g  ，且属于 s个子系统的天数期望。</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">dp[i][j]状态可以转化成以下四种：</span><br><span class="line">dp[i][j] 发现一个bug属于已经找到的i种bug和j个子系统中</span><br><span class="line">dp[i+1][j] 发现一个bug属于新的一种bug，但属于已经找到的j种子系统</span><br><span class="line">dp[i][j+1] 发现一个bug属于已经找到的i种bug，但属于新的子系统</span><br><span class="line">dp[i+1][j+1]发现一个bug属于新的一种bug和新的一个子系统</span><br><span class="line">以上四种的概率分别为：</span><br><span class="line">p1 = i*j / (n*s)</span><br><span class="line">p2 = (n-i)*j / (n*s)</span><br><span class="line">p3 = i*(s-j) / (n*s)</span><br><span class="line">p4 = (n-i)*(s-j) / (n*s)</span><br><span class="line">dp[i,j] = p1*dp[i,j] + p2*dp[i+1,j] + p3*dp[i,j+1] + p4*dp[i+1,j+1] + 1;</span><br><span class="line">化简后即可</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一天只能发现一个bug</span></span><br><span class="line"><span class="comment">//属于子系统的概率是1/s</span></span><br><span class="line"><span class="comment">//属于分类的概率是1/n</span></span><br><span class="line"><span class="comment">//dp[i][j]表示已经找到i种bug并且存在于j种子系统里面的天数期望</span></span><br><span class="line"><span class="comment">//dp[n][s]=0</span></span><br><span class="line"><span class="comment">//dp[i][j]有四种可能</span></span><br><span class="line"><span class="comment">//找到的一个bug都已经出现过</span></span><br><span class="line"><span class="comment">//在两者中出现过一次</span></span><br><span class="line"><span class="comment">//都没有出现过</span></span><br><span class="line"><span class="comment">//四种情况</span></span><br><span class="line"><span class="comment">//反向枚举应该即可</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,n) for(int i=a;i&lt;=n;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> frep(i,a,n) for(int i=a;i&gt;=n;i--)</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e3</span>+<span class="number">100</span>;</span><br><span class="line"><span class="type">double</span> dp[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> n,s;</span><br><span class="line"><span class="keyword">while</span>(cin&gt;&gt;n&gt;&gt;s)</span><br><span class="line">&#123;</span><br><span class="line">dp[n][s]=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="built_in">frep</span>(i,n,<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">frep</span>(j,s,<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i==n&amp;&amp;j==s)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">double</span> p1, p2, p3, p4;</span><br><span class="line">p1 = (<span class="type">double</span>)i * j / (n * s);       <span class="comment">// dp[i][j];</span></span><br><span class="line">p2 = (<span class="type">double</span>)(n - i) * j / (n * s); <span class="comment">// dp[i+1][j];</span></span><br><span class="line">p3 = (<span class="type">double</span>)i * (s - j) / (n * s); <span class="comment">// dp[i][j+1];</span></span><br><span class="line">p4 = (<span class="type">double</span>)(n - i) * (s - j) / (n * s);</span><br><span class="line">dp[i][j] = (<span class="number">1</span> + p2 * dp[i + <span class="number">1</span>][j] + p3 * dp[i][j + <span class="number">1</span>] + p4 * dp[i + <span class="number">1</span>][j + <span class="number">1</span>]) / (<span class="number">1</span> - p1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.4f\n&quot;</span>, dp[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="C-One-Person-Game"><a href="#C-One-Person-Game" class="headerlink" title="C - One Person Game"></a>C - One Person Game</h2><p>There is a very simple and interesting one-person game. You have 3 dice, namely <strong>Die1</strong>, <strong>Die2</strong> and <strong>Die3</strong>. <strong>Die1</strong> has <em>K1</em> faces. <strong>Die2</strong> has <em>K2</em> faces. <strong>Die3</strong> has <em>K3</em> faces. All the dice are fair dice, so the probability of rolling each value, 1 to <em>K1</em>, <em>K2</em>, <em>K3</em> is exactly 1 / <em>K1</em>, 1 / <em>K2</em> and 1 / <em>K3</em>. You have a counter, and the game is played as follow:</p>
<ol>
<li>Set the counter to 0 at first.</li>
<li>Roll the 3 dice simultaneously. If the up-facing number of <strong>Die1</strong> is <em>a</em>, the up-facing number of <strong>Die2</strong> is <em>b</em> and the up-facing number of <strong>Die3</strong> is <em>c</em>, set the counter to 0. Otherwise, add the counter by the total value of the 3 up-facing numbers.</li>
<li>If the counter’s number is still not greater than <em>n</em>, go to step 2. Otherwise the game is ended.</li>
</ol>
<p>Calculate the expectation of the number of times that you cast dice before the end of the game.</p>
<p><strong>Input</strong></p>
<p>There are multiple test cases. The first line of input is an integer <em>T</em> (0 &lt; <em>T</em> &lt;= 300) indicating the number of test cases. Then <em>T</em> test cases follow. Each test case is a line contains 7 non-negative integers <em>n</em>, <em>K1</em>, <em>K2</em>, <em>K3</em>, <em>a</em>, <em>b</em>, <em>c</em> (0 &lt;= <em>n</em> &lt;= 500, 1 &lt; <em>K1</em>, <em>K2</em>, <em>K3</em> &lt;= 6, 1 &lt;= <em>a</em> &lt;= <em>K1</em>, 1 &lt;= <em>b</em> &lt;= <em>K2</em>, 1 &lt;= <em>c</em> &lt;= <em>K3</em>).</p>
<p><strong>Output</strong></p>
<p>For each test case, output the answer in a single line. A relative error of 1e-8 will be accepted.</p>
<p><strong>Sample Input</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">0 2 2 2 1 1 1</span><br><span class="line">0 6 6 6 1 1 1</span><br></pre></td></tr></table></figure>
<p><strong>Sample Output</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.142857142857143</span><br><span class="line">1.004651162790698</span><br></pre></td></tr></table></figure>
<p>注意还是逆推</p>
<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>有三个骰子，分别有k1,k2,k3个标号1−k的面，每次扔骰子，若三个面分别为a,b,c 则分数置为0，否则加上分数之和。</p>
<p>当分数大于0时游戏结束，问游戏结束的期望步数。</p>
<p>容易想到转移方程，令dp[i]表示当前分数为i 时，游戏结束的期望步数，则答案就是dp[0]</p>
<p>$dp[i] = \sum p_k \cdot dp[i + k] + p_0 \cdot dp[0] + 1$</p>
<p>由于无法表达出dp[0]</p>
<p>因此不妨设置</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[i] = A[i] * dp[<span class="number">0</span>] + B[i]</span><br></pre></td></tr></table></figure>
<p>带入后</p>
<p>$dp[i] = \sum p_k \cdot (A[i + k] \cdot dp[0]+B[i+k])+p_0*dp[0]+1 \\ =\sum (p_k \cdot A[i+k]+p_0)\cdot dp[0]+\sum (p_k \cdot B[i+k]) + 1$</p>
<p>于是有</p>
<p>$A[i] = \sum p_k \cdot A[i+k] + p_0,B[i] = \sum p_k \cdot B[i+k] + 1$</p>
<p>递推求得A,B即可</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i, a, n) for (int i = a; i &lt;= n; i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> frep(i, a, n) for (int i = a; i &gt;= n; i--)</span></span><br><span class="line"><span class="keyword">using</span> ll=<span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span>+<span class="number">100</span>;</span><br><span class="line"><span class="type">double</span> p[N];</span><br><span class="line"><span class="type">double</span> a[N];</span><br><span class="line"><span class="type">double</span> b[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> t;</span><br><span class="line">cin&gt;&gt;t;</span><br><span class="line"><span class="keyword">while</span>(t--)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">memset</span>(p,<span class="number">0</span>,<span class="built_in">sizeof</span>(p));</span><br><span class="line">    <span class="built_in">memset</span>(a,<span class="number">0</span>,<span class="built_in">sizeof</span>(a));</span><br><span class="line">    <span class="built_in">memset</span>(b,<span class="number">0</span>,<span class="built_in">sizeof</span>(b));</span><br><span class="line">    <span class="type">int</span> n,k1,k2,k3;</span><br><span class="line">    <span class="type">int</span> A,B,C;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;k1&gt;&gt;k2&gt;&gt;k3&gt;&gt;A&gt;&gt;B&gt;&gt;C;</span><br><span class="line">    p[<span class="number">0</span>]=<span class="number">1.0</span>/(k1*k2*k3);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,k1)</span><br><span class="line">    &#123;</span><br><span class="line"><span class="built_in">rep</span>(j,<span class="number">1</span>,k2)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">rep</span>(k,<span class="number">1</span>,k3)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i==A&amp;&amp;j==B&amp;&amp;k==C)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        p[i+j+k]+=(<span class="number">1.0</span>)/(k1*k2*k3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">frep</span>(i,n,<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        a[i]=p[<span class="number">0</span>];</span><br><span class="line">        b[i]=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">rep</span>(j,<span class="number">3</span>,k1+k2+k3)</span><br><span class="line">&#123;</span><br><span class="line">    a[i]+=a[i+j]*p[j];</span><br><span class="line">    b[i]+=b[i+j]*p[j];</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.15lf\n&quot;</span>,b[<span class="number">0</span>]/(<span class="number">1</span>-a[<span class="number">0</span>]));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="D-Aeroplane-chess"><a href="#D-Aeroplane-chess" class="headerlink" title="D - Aeroplane chess"></a>D - Aeroplane chess</h2><p>Hzz loves aeroplane chess very much. The chess map contains N+1 grids labeled from 0 to N. Hzz starts at grid 0. For each step he throws a dice(a dice have six faces with equal probability to face up and the numbers on the faces are 1,2,3,4,5,6). When Hzz is at grid i and the dice number is x, he will moves to grid i+x. Hzz finishes the game when i+x is equal to or greater than N.</p>
<p>There are also M flight lines on the chess map. The i-th flight line can help Hzz fly from grid Xi to Yi (0&lt;Xi&lt;Yi&lt;=N) without throwing the dice. If there is another flight line from Yi, Hzz can take the flight line continuously. It is granted that there is no two or more flight lines start from the same grid.</p>
<p>Please help Hzz calculate the expected dice throwing times to finish the game.</p>
<h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>There are multiple test cases.<br>Each test case contains several lines.<br>The first line contains two integers N(1≤N≤100000) and M(0≤M≤1000).<br>Then M lines follow, each line contains two integers Xi,Yi(1≤Xi&lt;Yi≤N).<br>The input end with N=0, M=0.</p>
<h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>For each test case in the input, you should output a line indicating the expected dice throwing times. Output should be rounded to 4 digits after decimal point.</p>
<h3 id="Sample-2"><a href="#Sample-2" class="headerlink" title="Sample"></a>Sample</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Inputcopy</th>
<th>Outputcopy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>2 0 8 3 2 4 4 5 7 8 0 0</code></td>
<td><code>1.1667 2.3441</code></td>
</tr>
</tbody>
</table>
</div>
<p>期望dp，直接逆推即可</p>
<p>题意：</p>
<p>有编号为0-n的n+1个网格，每次扔骰子，骰子有6个面，分别标有1，2，3，4，5，6.每一面的概率都是1/6.根据骰子的点数从0开始向前走，知道走到大于等于n结束。同时网格上有些格子会直接跳到下个格子，此时不需要扔骰子。问结束游戏需要仍多少次骰子。</p>
<p>思路： dp[i]表示在i点到N点的期望值，dp[n]=0，求dp[0]，没有飞路线的情况下dp[i]=dp[i+1]/6+dp[i+2]/6+…+dp[i+6]/6+1，倒推求解即可。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这题相对比较好推理</span></span><br><span class="line"><span class="comment">// 直接转就行</span></span><br><span class="line"><span class="comment">// 能跳就跳</span></span><br><span class="line"><span class="comment">// 不能的话直接转移，以1/6的概率进行转移即可</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i, a, n) for (int i = a; i &lt;= n; i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> frep(i, a, n) for (int i = a; i &gt;= n; i--)</span></span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> go[N];</span><br><span class="line"><span class="type">double</span> dp[N];</span><br><span class="line"><span class="type">double</span> p = <span class="number">1.0</span> / <span class="number">6.0</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (cin &gt;&gt; n &gt;&gt; m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span> &amp;&amp; m == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in">sizeof</span>(dp));</span><br><span class="line">        <span class="built_in">memset</span>(go, <span class="number">-1</span>, <span class="keyword">sizeof</span> go);</span><br><span class="line">        <span class="keyword">while</span> (m--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> x, y;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            go[x] = y;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">frep</span>(i, n - <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (go[i] != <span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                dp[i] = dp[go[i]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                dp[i] = p * (dp[i + <span class="number">1</span>] + dp[i + <span class="number">2</span>] + dp[i + <span class="number">3</span>] + dp[i + <span class="number">4</span>] + dp[i + <span class="number">5</span>] + dp[i + <span class="number">6</span>])+<span class="number">1.0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.4f\n&quot;</span>, dp[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="G-LOOPS"><a href="#G-LOOPS" class="headerlink" title="G - LOOPS"></a>G - LOOPS</h2><p>Akemi Homura is a Mahou Shoujo (Puella Magi/Magical Girl).</p>
<p>Homura wants to help her friend Madoka save the world. But because of the plot of the Boss Incubator, she is trapped in a labyrinth called LOOPS.<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/d78afd94c8497b399080dc6fcf19e4ab.jpeg" alt="img"><br>The planform of the LOOPS is a rectangle of R*C grids. There is a portal in each grid except the exit grid. It costs Homura 2 magic power to use a portal once. The portal in a grid G(r, c) will send Homura to the grid below G (grid(r+1, c)), the grid on the right of G (grid(r, c+1)), or even G itself at respective probability (How evil the Boss Incubator is)!<br>At the beginning Homura is in the top left corner of the LOOPS ((1, 1)), and the exit of the labyrinth is in the bottom right corner ((R, C)). Given the probability of transmissions of each portal, your task is help poor Homura calculate the EXPECT magic power she need to escape from the LOOPS.</p>
<h3 id="Input-3"><a href="#Input-3" class="headerlink" title="Input"></a>Input</h3><p>The first line contains two integers R and C (2 &lt;= R, C &lt;= 1000).</p>
<p>The following R lines, each contains C*3 real numbers, at 2 decimal places. Every three numbers make a group. The first, second and third number of the cth group of line r represent the probability of transportation to grid (r, c), grid (r, c+1), grid (r+1, c) of the portal in grid (r, c) respectively. Two groups of numbers are separated by 4 spaces.</p>
<p>It is ensured that the sum of three numbers in each group is 1, and the second numbers of the rightmost groups are 0 (as there are no grids on the right of them) while the third numbers of the downmost groups are 0 (as there are no grids below them).</p>
<p>You may ignore the last three numbers of the input data. They are printed just for looking neat.</p>
<p>The answer is ensured no greater than 1000000.</p>
<p>Terminal at EOF</p>
<h3 id="Output-3"><a href="#Output-3" class="headerlink" title="Output"></a>Output</h3><p>A real number at 3 decimal places (round to), representing the expect magic power Homura need to escape from the LOOPS.</p>
<h3 id="Sample-3"><a href="#Sample-3" class="headerlink" title="Sample"></a>Sample</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Inputcopy</th>
<th>Outputcopy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>2 2 0.00 0.50 0.50    0.50 0.00 0.50 0.50 0.50 0.00    1.00 0.00 0.00</code></td>
<td><code>6.000</code></td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>题意：给定一个矩阵，从 (1,1) 出发，有一定几率留在原地、向下走，向右走，求走到 (r,c) 平均要走多少步 (每次移动算两步)？</p>
</blockquote>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">设 dp[i][j] 为 (i,j) 走到 (r,c) 的期望步数，p[i][j][k] 为 (i,j) 向方向 k 的移动几率，那么</span><br><span class="line">dp[i][j]=dp[i+1][j]×p[i][j][1] + dp[i][j+1]×p[i][j][2] + dp[i][j]*p[i][j][3] + 2</span><br><span class="line">由于我们要从 dp[i+1][j],dp[i][j+1] 推出 dp[i][j], 所以经过移项：</span><br><span class="line">dp[i][j]=(dp[i+1][j]×p[i][j][1] + dp[i][j+1]×p[i][j][2] + 2)/(1-p[i][j][3]);</span><br></pre></td></tr></table></figure>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">然而，为什么我们不能设 dp[i][j] 为走到 (i,j) 的期望步数而从 dp[i-1][j],dp[i][j-1] 推出 dp[i][j] 呢？因为你不知道出现在 (i,j-1) 的概率是多少，因此递推的过程将是不完备、不稳定、不正确的。</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设dp[i][j]走到(i,j)的期望步数</span></span><br><span class="line"><span class="comment">//p[i][j][k]为(i,j)以k的方式去走的概率</span></span><br><span class="line"><span class="comment">//这样子就可以直接递推了</span></span><br><span class="line"><span class="comment">//dp[i][j]=dp[i+1][j]*p[i][j][1]+dp[i][j+1]*p[i][j][2]+dp[i][j]*p[i][j][3]+2</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> ll=<span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,n) for(int i=a;i&lt;=n;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> frep(i,a,n) for(int i=a;i&gt;=n;i--)</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e3</span>+<span class="number">10</span>;</span><br><span class="line"><span class="type">double</span> dp[N][N];</span><br><span class="line"><span class="type">double</span> p[N][N][<span class="number">4</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    <span class="keyword">while</span> (cin &gt;&gt; n &gt;&gt; m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">rep</span>(i, <span class="number">1</span>, n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">rep</span>(j, <span class="number">1</span>, m)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf%lf&quot;</span>, &amp;p[i][j][<span class="number">1</span>], &amp;p[i][j][<span class="number">2</span>], &amp;p[i][j][<span class="number">3</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        dp[n][m] = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">frep</span>(i, n, <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">frep</span>(j, m, <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == n &amp;&amp; j == m||p[i][j][<span class="number">1</span>]==<span class="number">1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                dp[i][j] = (dp[i + <span class="number">1</span>][j] * p[i][j][<span class="number">3</span>] + dp[i][j + <span class="number">1</span>] * p[i][j][<span class="number">2</span>] + <span class="number">2</span>) / (<span class="number">1</span> - p[i][j][<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.3lf\n&quot;</span>, dp[<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="H-Check-the-difficulty-of-problems"><a href="#H-Check-the-difficulty-of-problems" class="headerlink" title="H - Check the difficulty of problems"></a>H - Check the difficulty of problems</h2><p>Organizing a programming contest is not an easy job. To avoid making the problems too difficult, the organizer usually expect the contest result satisfy the following two terms:</p>
<ol>
<li>All of the teams solve at least one problem.</li>
<li>The champion (One of those teams that solve the most problems) solves at least a certain number of problems.</li>
</ol>
<p>Now the organizer has studied out the contest problems, and through the result of preliminary contest, the organizer can estimate the probability that a certain team can successfully solve a certain problem.</p>
<p>Given the number of contest problems M, the number of teams T, and the number of problems N that the organizer expect the champion solve at least. We also assume that team i solves problem j with the probability Pij (1 &lt;= i &lt;= T, 1&lt;= j &lt;= M). Well, can you calculate the probability that all of the teams solve at least one problem, and at the same time the champion team solves at least N problems?</p>
<h3 id="Input-4"><a href="#Input-4" class="headerlink" title="Input"></a>Input</h3><p>The input consists of several test cases. The first line of each test case contains three integers M (0 &lt; M &lt;= 30), T (1 &lt; T &lt;= 1000) and N (0 &lt; N &lt;= M). Each of the following T lines contains M floating-point numbers in the range of [0,1]. In these T lines, the j-th number in the i-th line is just Pij. A test case of M = T = N = 0 indicates the end of input, and should not be processed.</p>
<h3 id="Output-4"><a href="#Output-4" class="headerlink" title="Output"></a>Output</h3><p>For each test case, please output the answer in a separate line. The result should be rounded to three digits after the decimal point.</p>
<h3 id="Sample-4"><a href="#Sample-4" class="headerlink" title="Sample"></a>Sample</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Inputcopy</th>
<th>Outputcopy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>2 2 2 0.9 0.9 1 0.9 0 0 0</code></td>
<td><code>0.972</code></td>
</tr>
</tbody>
</table>
</div>
<p>题意：</p>
<p>ACM比赛中，共M道题，T个队，pij表示第i队解出第j题的概率，问 每队至少解出一题且冠军队至少解出N道题的概率。</p>
<p>假设ans1为每个队至少解出一题的概率。</p>
<p>假设ans2为每个队解出的题数均在 [1.n-1] 之间的概率。</p>
<p>这样最终答案就是ans1-ans2。</p>
<p>ans1可以在读入的数据中预处理出来，ans2通过dp求解。</p>
<p>dp[i] [j] [k]表示第i个队在第j个题中解出k个题的概率。</p>
<p>其余看代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 计算出每一只队伍至少解决一个问题</span></span><br><span class="line"><span class="comment">// 计算出每一只队伍解决1-n-1个问题</span></span><br><span class="line"><span class="comment">// 注意要初始化</span></span><br><span class="line"><span class="comment">// dp[i][j][0]=dp[i][j-1][0]*(1-p[i][j])</span></span><br><span class="line"><span class="comment">// dpp[i][0][0]=1</span></span><br><span class="line"><span class="comment">// 一般情况：  dp[i][j][k]=dp[i][j-1][k]*(1-p[i][j])+dp[i][j-1][k-1]*p[i][j];</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i, a, n) for (int i = a; i &lt;= n; i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> frep(i, a, n) for (int i = a; i &gt;= n; i--)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1005</span>;</span><br><span class="line"><span class="type">double</span> p[N][<span class="number">33</span>];</span><br><span class="line"><span class="type">double</span> dp[N][<span class="number">33</span>][<span class="number">33</span>];</span><br><span class="line"><span class="type">double</span> ans1,ans2;</span><br><span class="line"><span class="type">double</span> mid;</span><br><span class="line"><span class="type">int</span> m,t,n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(cin&gt;&gt;m&gt;&gt;t&gt;&gt;n)</span><br><span class="line">&#123;</span><br><span class="line">    ans1 = <span class="number">1</span>;</span><br><span class="line">    ans2 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (m == <span class="number">0</span> &amp;&amp; t == <span class="number">0</span> &amp;&amp; n == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">rep</span>(i,<span class="number">1</span>,t)</span><br><span class="line">&#123;</span><br><span class="line">    mid=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">rep</span>(j,<span class="number">1</span>,m)</span><br><span class="line">    &#123;</span><br><span class="line">cin&gt;&gt;p[i][j];</span><br><span class="line">mid*=(<span class="number">1</span>-p[i][j]);</span><br><span class="line">    &#125;</span><br><span class="line">    ans1*=(<span class="number">1</span>-mid);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">rep</span>(i,<span class="number">1</span>,t)</span><br><span class="line">&#123;</span><br><span class="line">    dp[i][<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">rep</span>(j,<span class="number">1</span>,m)</span><br><span class="line">    &#123;</span><br><span class="line">        dp[i][j][<span class="number">0</span>]=dp[i][j<span class="number">-1</span>][<span class="number">0</span>]*(<span class="number">1</span>-p[i][j]);</span><br><span class="line">        <span class="built_in">rep</span>(k,<span class="number">1</span>,m)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[i][j][k]=dp[i][j<span class="number">-1</span>][k]*(<span class="number">1</span>-p[i][j])+dp[i][j<span class="number">-1</span>][k<span class="number">-1</span>]*p[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">rep</span>(i,<span class="number">1</span>,t)</span><br><span class="line">&#123;</span><br><span class="line">    mid=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(j,<span class="number">1</span>,n<span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        mid+=dp[i][m][j];</span><br><span class="line">    &#125;</span><br><span class="line">    ans2*=mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.3f\n&quot;</span>, ans1 - ans2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="I-Bag-of-mice"><a href="#I-Bag-of-mice" class="headerlink" title="I - Bag of mice"></a>I - Bag of mice</h2><p>The dragon and the princess are arguing about what to do on the New Year’s Eve. The dragon suggests flying to the mountains to watch fairies dancing in the moonlight, while the princess thinks they should just go to bed early. They are desperate to come to an amicable agreement, so they decide to leave this up to chance.</p>
<p>They take turns drawing a mouse from a bag which initially contains <em>w</em> white and <em>b</em> black mice. The person who is the first to draw a white mouse wins. After each mouse drawn by the dragon the rest of mice in the bag panic, and one of them jumps out of the bag itself (the princess draws her mice carefully and doesn’t scare other mice). <strong>Princess draws first.</strong> What is the probability of the princess winning?</p>
<p>If there are no more mice in the bag and nobody has drawn a white mouse, the dragon wins. Mice which jump out of the bag themselves are not considered to be drawn (do not define the winner). Once a mouse has left the bag, it never returns to it. Every mouse is drawn from the bag with the same probability as every other one, and every mouse jumps out of the bag with the same probability as every other one.</p>
<h3 id="Input-5"><a href="#Input-5" class="headerlink" title="Input"></a>Input</h3><p>The only line of input data contains two integers <em>w</em> and <em>b</em> (0 ≤ <em>w</em>, <em>b</em> ≤ 1000).</p>
<h3 id="Output-5"><a href="#Output-5" class="headerlink" title="Output"></a>Output</h3><p>Output the probability of the princess winning. The answer is considered to be correct if its absolute or relative error does not exceed 10 - 9.</p>
<h3 id="Sample-1"><a href="#Sample-1" class="headerlink" title="Sample 1"></a>Sample 1</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Inputcopy</th>
<th>Outputcopy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>1 3</code></td>
<td><code>0.500000000</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Sample-2"><a href="#Sample-2" class="headerlink" title="Sample 2"></a>Sample 2</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Inputcopy</th>
<th>Outputcopy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>5 5</code></td>
<td><code>0.658730159</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p>Let’s go through the first sample. The probability of the princess drawing a white mouse on her first turn and winning right away is 1/4. The probability of the dragon drawing a black mouse and not winning on his first turn is 3/4 <em> 2/3 = 1/2. After this there are two mice left in the bag — one black and one white; one of them jumps out, and the other is drawn by the princess on her second turn. If the princess’ mouse is white, she wins (probability is 1/2 </em> 1/2 = 1/4), otherwise nobody gets the white mouse, so according to the rule the dragon wins.</p>
<h3 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h3><p>袋子里有ww 只白鼠和bb 只黑鼠 ，A和B轮流从袋子里抓，谁先抓到白色谁就赢。A每次随机抓一只，B每次随机抓完一只之后会有另一只随机老鼠跑出来。如果两个人都没有抓到白色则B赢。A先抓，问A赢的概率。</p>
<p>题解我认为这一篇写的很详细，直接看就好</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/image-20240317220554992.png" alt="image-20240317220554992"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//有白鼠</span></span><br><span class="line"><span class="comment">//黑鼠</span></span><br><span class="line"><span class="comment">//谁先抓白就赢了</span></span><br><span class="line"><span class="comment">//一个人随机抓一只</span></span><br><span class="line"><span class="comment">//另有一个人抓完一只就会跑一只出来</span></span><br><span class="line"><span class="comment">//i只白老鼠，j只黑老鼠</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i, a, n) for (int i = a; i &lt;= n; i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> frep(i, a, n) for (int i = a; i &gt;= n; i--)</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e3</span>+<span class="number">100</span>;</span><br><span class="line"><span class="type">double</span> dp[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> w,b;</span><br><span class="line">cin&gt;&gt;w&gt;&gt;b;</span><br><span class="line"><span class="built_in">rep</span>(i,<span class="number">1</span>,w)</span><br><span class="line">&#123;</span><br><span class="line">    dp[i][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">rep</span>(i,<span class="number">1</span>,b)</span><br><span class="line">&#123;</span><br><span class="line">    dp[<span class="number">0</span>][i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">rep</span>(i,<span class="number">1</span>,w)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">rep</span>(j,<span class="number">1</span>,b)</span><br><span class="line">    &#123;</span><br><span class="line">        dp[i][j]+=(<span class="type">double</span>)i/(i+j);</span><br><span class="line">        <span class="keyword">if</span> (j &gt;= <span class="number">3</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[i][j] += (<span class="type">double</span>)j / (i + j) * (j - <span class="number">1</span>) / (i + j - <span class="number">1</span>) * (j - <span class="number">2</span>) /(i + j - <span class="number">2</span>) * dp[i][j - <span class="number">3</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= <span class="number">1</span> &amp;&amp; j &gt;= <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[i][j] += (<span class="type">double</span>)j / (i + j) * (j - <span class="number">1</span>) / (i + j - <span class="number">1</span>) * i /(i + j - <span class="number">2</span>) * dp[i - <span class="number">1</span>][j - <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.9lf\n&quot;</span>, dp[w][b]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="J-Football"><a href="#J-Football" class="headerlink" title="J - Football"></a>J - Football</h2><p>Consider a single-elimination football tournament involving 2<em>n</em> teams, denoted 1, 2, …, 2<em>n</em>. In each round of the tournament, all teams still in the tournament are placed in a list in order of increasing index. Then, the first team in the list plays the second team, the third team plays the fourth team, etc. The winners of these matches advance to the next round, and the losers are eliminated. After <em>n</em> rounds, only one team remains undefeated; this team is declared the winner.</p>
<p>Given a matrix <em>P</em> = [<em>pij</em>] such that <em>pij</em> is the probability that team <em>i</em> will beat team <em>j</em> in a match determine which team is most likely to win the tournament.</p>
<h3 id="Input-6"><a href="#Input-6" class="headerlink" title="Input"></a>Input</h3><p>The input test file will contain multiple test cases. Each test case will begin with a single line containing <em>n</em> (1 ≤ <em>n</em> ≤ 7). The next 2<em>n</em> lines each contain 2<em>n</em> values; here, the <em>j</em>th value on the <em>i</em>th line represents <em>pij</em>. The matrix <em>P</em> will satisfy the constraints that <em>pij</em> = 1.0 − <em>pji</em> for all <em>i</em> ≠ <em>j</em>, and <em>pii</em> = 0.0 for all <em>i</em>. The end-of-file is denoted by a single line containing the number −1. Note that each of the matrix entries in this problem is given as a floating-point value. To avoid precision problems, make sure that you use either the <code>double</code> data type instead of <code>float</code>.</p>
<h3 id="Output-6"><a href="#Output-6" class="headerlink" title="Output"></a>Output</h3><p>The output file should contain a single line for each test case indicating the number of the team most likely to win. To prevent floating-point precision issues, it is guaranteed that the difference in win probability for the top two teams will be at least 0.01.</p>
<h3 id="Sample-5"><a href="#Sample-5" class="headerlink" title="Sample"></a>Sample</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Inputcopy</th>
<th>Outputcopy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>2 0.0 0.1 0.2 0.3 0.9 0.0 0.4 0.5 0.8 0.6 0.0 0.6 0.7 0.5 0.4 0.0 -1</code></td>
<td><code>2</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>In the test case above, teams 1 and 2 and teams 3 and 4 play against each other in the first round; the winners of each match then play to determine the winner of the tournament. The probability that team 2 wins the tournament in this case is:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>P(2 wins)</th>
<th>= <em>P</em>(2 beats 1)<em>P</em>(3 beats 4)<em>P</em>(2 beats 3) + <em>P</em>(2 beats 1)<em>P</em>(4 beats 3)<em>P</em>(2 beats 4) = <em>p</em>21<em>p</em>34<em>p</em>23 + <em>p</em>21<em>p</em>43<em>p</em>24 = 0.9 · 0.6 · 0.4 + 0.9 · 0.4 · 0.5 = 0.396.</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>The next most likely team to win is team 3, with a 0.372 probability of winning the tournament.</p>
<p>题意：</p>
<p>2*n只球队,按顺序依次进行比赛,一轮下来,胜利的队伍再按顺序依次进行比赛,给出i队战胜j队的概率</p>
<p>求一个最大概率赢的队伍</p>
<p>由于此时比赛过的队伍不能重复，所以运用二进制将其按顺序比赛</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(j&gt;&gt;(i<span class="number">-1</span>))==(k&gt;&gt;(i<span class="number">-1</span>)^<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dp[i][j]:第j个队伍在第i场获胜的概率</span><br><span class="line">求其获胜概率可以推出式子：</span><br><span class="line">dp[i][j]+=dp[i<span class="number">-1</span>][j]*dp[i<span class="number">-1</span>][k]*p[j][k]</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 搞不懂为什么开同步流那么慢</span></span><br><span class="line"><span class="comment">// 老是t我</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">// 注意dp[i][j]表示第i轮比赛里面，j球队能够赢得比赛的概率</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i, a, n) for (int i = a; i &lt;= n; i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> frep(i, a, n) for (int i = a; i &gt;= n; i--)</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e3</span> + <span class="number">100</span>;</span><br><span class="line"><span class="type">double</span> dp[N][N];</span><br><span class="line"><span class="type">double</span> p[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> len=<span class="number">1</span>&lt;&lt;n;</span><br><span class="line">        <span class="built_in">rep</span>(i,<span class="number">1</span>,len)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">rep</span>(j,<span class="number">1</span>,len)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>, &amp;p[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span> dp);</span><br><span class="line">        <span class="built_in">rep</span>(i,<span class="number">1</span>,len)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[<span class="number">0</span>][i]=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//还未开始比赛都为1</span></span><br><span class="line">        <span class="built_in">rep</span>(i,<span class="number">1</span>,n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">rep</span>(j,<span class="number">1</span>,len)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">rep</span>(k,<span class="number">1</span>,len)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>((((j<span class="number">-1</span>)&gt;&gt;(i<span class="number">-1</span>))^<span class="number">1</span>)==((k<span class="number">-1</span>)&gt;&gt;(i<span class="number">-1</span>)))</span><br><span class="line">                    <span class="comment">//判断相邻的异或技巧</span></span><br><span class="line">                    &#123;</span><br><span class="line">                       dp[i][j]+=dp[i<span class="number">-1</span>][j]*dp[i<span class="number">-1</span>][k]*p[j][k];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">double</span> maxn=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> ans;</span><br><span class="line">        <span class="built_in">rep</span>(i,<span class="number">1</span>,len)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(dp[n][i]&gt;maxn)</span><br><span class="line">            &#123;</span><br><span class="line">                maxn=dp[n][i];</span><br><span class="line">                ans=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//以下为cin,cout版本</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">// 注意dp[i][j]表示第i轮比赛里面，j球队能够赢得比赛的概率</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i, a, n) for (int i = a; i &lt;= n; i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> frep(i, a, n) for (int i = a; i &gt;= n; i--)</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e3</span> + <span class="number">100</span>;</span><br><span class="line"><span class="type">double</span> dp[N][N];</span><br><span class="line"><span class="type">double</span> p[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">while</span> (cin &gt;&gt; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> len = <span class="number">1</span> &lt;&lt; n;</span><br><span class="line">        <span class="built_in">rep</span>(i, <span class="number">1</span>, len)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">rep</span>(j, <span class="number">1</span>, len)</span><br><span class="line">            &#123;</span><br><span class="line">                cin &gt;&gt; p[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span> dp);</span><br><span class="line">        <span class="built_in">rep</span>(i, <span class="number">1</span>, len)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[<span class="number">0</span>][i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 还未开始比赛都为1</span></span><br><span class="line">        <span class="built_in">rep</span>(i, <span class="number">1</span>, n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">rep</span>(j, <span class="number">1</span>, len)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">rep</span>(k, <span class="number">1</span>, len)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (((j - <span class="number">1</span>) &gt;&gt; (i - <span class="number">1</span>) ^ <span class="number">1</span>) == ((k - <span class="number">1</span>) &gt;&gt; (i - <span class="number">1</span>)))</span><br><span class="line">                    <span class="comment">// 判断相邻的异或技巧</span></span><br><span class="line">                    &#123;</span><br><span class="line">                       dp[i][j] += dp[i - <span class="number">1</span>][j] * dp[i - <span class="number">1</span>][k] * p[j][k];</span><br><span class="line">                       <span class="comment">//j和k在上一轮活下来，并且j打败了k</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">double</span> maxn = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> ans;</span><br><span class="line">        <span class="built_in">rep</span>(i, <span class="number">1</span>, len)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (dp[n][i] &gt; maxn)</span><br><span class="line">            &#123;</span><br><span class="line">                maxn = dp[n][i];</span><br><span class="line">                ans = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="K-Kids-and-Prizes"><a href="#K-Kids-and-Prizes" class="headerlink" title="K - Kids and Prizes"></a>K - Kids and Prizes</h2><p>ICPC (International Cardboard Producing Company) is in the business of producing cardboard boxes. Recently the company organized a contest for kids for the best design of a cardboard box and selected <em>M</em> winners. There are <em>N</em> prizes for the winners, each one carefully packed in a cardboard box (made by the ICPC, of course). The awarding process will be as follows:</p>
<ul>
<li>All the boxes with prizes will be stored in a separate room.</li>
<li>The winners will enter the room, one at a time.</li>
<li>Each winner selects one of the boxes.</li>
<li>The selected box is opened by a representative of the organizing committee.</li>
<li>If the box contains a prize, the winner takes it.</li>
<li>If the box is empty (because the same box has already been selected by one or more previous winners), the winner will instead get a certificate printed on a sheet of excellent cardboard (made by ICPC, of course).</li>
<li>Whether there is a prize or not, the box is re-sealed and returned to the room.</li>
</ul>
<p>The management of the company would like to know how many prizes will be given by the above process. It is assumed that each winner picks a box at random and that all boxes are equally likely to be picked. Compute the mathematical expectation of the number of prizes given (the certificates are not counted as prizes, of course).</p>
<p><strong>Input</strong></p>
<p>The first and only line of the input file contains the values of <em>N</em> and <em>M</em> (<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/b6fcfc5f9daf39e897a53c9a17ef11bf.png" alt="img">).</p>
<p><strong>Output</strong></p>
<p>The first and only line of the output file should contain a single real number: the expected number of prizes given out. The answer is accepted as correct if either the absolute or the relative error is less than or equal to 10-9.</p>
<h3 id="Sample-1-1"><a href="#Sample-1-1" class="headerlink" title="Sample 1"></a>Sample 1</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Inputcopy</th>
<th>Outputcopy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>5 7</code></td>
<td><code>3.951424</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="Sample-2-1"><a href="#Sample-2-1" class="headerlink" title="Sample 2"></a>Sample 2</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Inputcopy</th>
<th>Outputcopy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>4 3</code></td>
<td><code>2.3125</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="题意："><a href="#题意：" class="headerlink" title="题意："></a>题意：</h3><p>有n个奖品，m个人排队来选礼物，礼物拿完盒子放回，对于每个人，他打开的盒子，可能有礼物，也有可能已经被之前的人取走了。求最后m个人取走礼物的期望</p>
<p>第一个人取礼物时，随便怎么取，肯定是有的，所以dp[1] = 1;<br>第i个人取礼物时，那么前面已经取走了dp[i-1]个了，那么他取到的概率是(n-dp[i-1])/n，dp[i]还得加上dp[i-1]</p>
<p>于是转移方程：dp[i] = (n-dp[i-1])/n+dp[i-1];</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dp[i]表示到第i个人后取得的奖品</span></span><br><span class="line"><span class="comment">//这道应该是最水的</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i, a, n) for (int i = a; i &lt;= n; i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> frep(i, a, n) for (int i = a; i &gt;= n; i--)</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">100</span>;</span><br><span class="line"><span class="type">double</span> dp[N];</span><br><span class="line"><span class="comment">//dp[i]=dp[i+1]+(n-dp[i-1])/n*1+dp[i-1]/n*0</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">dp[<span class="number">1</span>]=<span class="number">1.0</span>;</span><br><span class="line"><span class="comment">//n个奖品一开始总能抽到</span></span><br><span class="line"><span class="built_in">rep</span>(i,<span class="number">2</span>,m)</span><br><span class="line">&#123;</span><br><span class="line">dp[i]=(n-dp[i<span class="number">-1</span>])/n+dp[i<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.10f\n&quot;</span>,dp[m]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="M-Help-Me-Escape"><a href="#M-Help-Me-Escape" class="headerlink" title="M - Help Me Escape"></a>M - Help Me Escape</h2><h4 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h4><p>  <em>If thou doest well, shalt thou not be accepted? and if thou doest not well, sin lieth at the door. And unto thee shall be his desire, and thou shalt rule over him.<br>  And Cain talked with Abel his brother: and it came to pass, when they were in the field, that Cain rose up against Abel his brother, and slew him.<br>  And the LORD said unto Cain, Where is Abel thy brother? And he said, I know not: Am I my brother’s keeper?<br>  And he said, What hast thou done? the voice of thy brother’s blood crieth unto me from the ground.<br>  And now art thou cursed from the earth, which hath opened her mouth to receive thy brother’s blood from thy hand;<br>  When thou tillest the ground, it shall not henceforth yield unto thee her strength; a fugitive and a vagabond shalt thou be in the earth.</em></p>
<p><em>—— Bible Chapter 4</em></p>
<p>Now Cain is unexpectedly trapped in a cave with N paths. Due to LORD’s punishment, all the paths are zigzag and dangerous. The difficulty of the ith path is ci.</p>
<p>Then we define f as the fighting capacity of Cain. Every day, Cain will be sent to one of the N paths randomly.</p>
<p>Suppose Cain is in front of the ith path. He can successfully take ti days to escape from the cave as long as his fighting capacity f is larger than ci. Otherwise, he has to keep trying day after day. However, if Cain failed to escape, his fighting capacity would increase ci as the result of actual combat. (A kindly reminder: Cain will never died.)</p>
<p>As for ti, we can easily draw a conclusion that ti is closely related to ci. Let’s use the following function to describe their relationship:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/42befb60e6900017f3f7a5463ae37491.jpeg" alt="img"></p>
<p>After D days, Cain finally escapes from the cave. Please output the expectation of D.</p>
<h4 id="Input-7"><a href="#Input-7" class="headerlink" title="Input"></a>Input</h4><p>The input consists of several cases. In each case, two positive integers N and f (n ≤ 100, f ≤ 10000) are given in the first line. The second line includes N positive integers ci (ci ≤ 10000, 1 ≤ i ≤ N)</p>
<h4 id="Output-7"><a href="#Output-7" class="headerlink" title="Output"></a>Output</h4><p>For each case, you should output the expectation(3 digits after the decimal point).</p>
<h4 id="Sample-6"><a href="#Sample-6" class="headerlink" title="Sample"></a>Sample</h4><div class="table-container">
<table>
<thead>
<tr>
<th>Inputcopy</th>
<th>Outputcopy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>3 1 1 2 3</code></td>
<td><code>6.889</code></td>
</tr>
</tbody>
</table>
</div>
<p>题意：一个战士初始有 f 点攻击力，每一天都会被随机分到 n 个洞穴（概率等同），每个洞穴有相应的困难值 ci ， 若 f &gt; ci ，则战士可以花费 ti 天的时间攻破洞穴，完成试验，否则花费一天的时间把攻击力 + ci ，然后重新试验， 求完成试验的期望天数</p>
<p>ti见上</p>
<p>设 dp[ f ] 表示攻击力为 f 完成试验的期望，则存在两种情况</p>
<p>① f &gt; ci  ,  dp[ f ] + = ti / n  ;   </p>
<p>② f&lt;=ci  ,  dp[ f ] + = ( 1 + dp [ i + ci ] )  /  n  ;</p>
<p> 因为当前攻击力 f 的变化不规律，所以借助记忆化搜索</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i, a, n) for (int i = a; i &lt;= n; i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> frep(i, a, n) for (int i = a; i &gt;= n; i--)</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span>+<span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">double</span> dp[N];</span><br><span class="line"><span class="comment">//没开double </span></span><br><span class="line"><span class="comment">//于是半小时过去了</span></span><br><span class="line"><span class="type">int</span> t[N];</span><br><span class="line"><span class="comment">//预处理出来的</span></span><br><span class="line"><span class="comment">//f &gt; ci, dp[f] + = ti / n;</span></span><br><span class="line"><span class="comment">//f &lt;= ci, dp[f] + = (1 + dp[i + ci]) / n;</span></span><br><span class="line"><span class="type">int</span> f;</span><br><span class="line"><span class="type">int</span> c[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dp[f])</span><br><span class="line">        <span class="keyword">return</span> dp[f];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (f &gt; c[i])</span><br><span class="line">        &#123;</span><br><span class="line">            dp[f] += (<span class="type">double</span>)t[i] / n;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            dp[f] += (<span class="number">1</span> + <span class="built_in">dfs</span>(f + c[i])) / n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[f];</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(cin&gt;&gt;n&gt;&gt;f)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">rep</span>(i,<span class="number">1</span>,n)</span><br><span class="line">        &#123;</span><br><span class="line">            cin&gt;&gt;c[i];</span><br><span class="line">            t[i] = (<span class="number">1.0</span> + <span class="built_in">sqrt</span>(<span class="number">5</span>)) / <span class="number">2</span> * c[i] * c[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in">sizeof</span>(dp));</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.3f\n&quot;</span>, <span class="built_in">dfs</span>(f));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/105bd41d9420cd35c6e51dfdcb59fd7ab9a05ca9.jpg@1256w_2044h_!web-article-pic.avif" alt="img"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://totorocatcat.top">Totoro</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://totorocatcat.top/2024/03/17/%E6%A6%82%E7%8E%87dp/">http://totorocatcat.top/2024/03/17/%E6%A6%82%E7%8E%87dp/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://totorocatcat.top" target="_blank">Totoroの旅</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%85%B4%E8%B6%A3-%E6%8F%90%E9%AB%98/">兴趣&amp;提高</a></div><div class="post_share"><div class="social-share" data-image="https://npm.elemecdn.com/ushio-api-img-moe@5.0.79/img_790_540x756_72_null_normal.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/03/18/%E5%AF%92%E5%81%87%E9%9B%86%E8%AE%AD%E8%A1%A5%E9%A2%981/" title="寒假集训补题1"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.0/img_3_1836x1204_71.1199951171875_null_normal.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">寒假集训补题1</div></div></a></div><div class="next-post pull-right"><a href="/2024/03/16/HTML%E5%88%9D%E6%AD%A5/" title="HTML初步"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.16/img_169_2560x1440_96_null_normal.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">HTML初步</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/03/21/2019%E5%B9%B4%E5%8D%8E%E5%B7%A5%E5%90%8C%E6%AD%A5%E8%B5%9B/" title="2019年华工同步赛"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.22/img_223_650x521_99.9997940063477_null_normal.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-21</div><div class="title">2019年华工同步赛</div></div></a></div><div><a href="/2024/02/21/AC%E8%87%AA%E5%8A%A8%E6%9C%BA/" title="AC自动机"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.86/img_860_2039x1147_350_null_normal.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-21</div><div class="title">AC自动机</div></div></a></div><div><a href="/2024/03/23/ACM%E6%A8%A1%E6%9D%BF/" title="ACM模板"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.86/img_860_2039x1147_350_null_normal.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-23</div><div class="title">ACM模板</div></div></a></div><div><a href="/2024/03/20/Div3/" title="Div3 935"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.3/img_35_1843x1229_71.1199951171875_null_normal.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-20</div><div class="title">Div3 935</div></div></a></div><div><a href="/2024/03/18/CSP/" title="CSP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.23/img_232_1000x707_349.986572265625_null_normal.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-18</div><div class="title">CSP</div></div></a></div><div><a href="/2024/02/21/KMP/" title="KMP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_156.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-21</div><div class="title">KMP</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/px3.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Totoro</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">182</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/4512abc"><i class="fab fa-github"></i><span>🛴前往小窝......</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/4512abc" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:4512abc@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到龙猫の小窝</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A6%82%E7%8E%87dp"><span class="toc-number">1.</span> <span class="toc-text">概率dp</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%9F%E6%9C%9Bdp"><span class="toc-number">2.</span> <span class="toc-text">期望dp</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">3.</span> <span class="toc-text">练习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#A-Scout-YYF-I"><span class="toc-number">3.1.</span> <span class="toc-text">A - Scout YYF I</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Input"><span class="toc-number">3.1.1.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Output"><span class="toc-number">3.1.2.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample"><span class="toc-number">3.1.3.</span> <span class="toc-text">Sample</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#B-Collecting-Bugs"><span class="toc-number">3.2.</span> <span class="toc-text">B - Collecting Bugs</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Input-1"><span class="toc-number">3.2.1.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Output-1"><span class="toc-number">3.2.2.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-1"><span class="toc-number">3.2.3.</span> <span class="toc-text">Sample</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-One-Person-Game"><span class="toc-number">3.3.</span> <span class="toc-text">C - One Person Game</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%98%E6%84%8F"><span class="toc-number">3.4.</span> <span class="toc-text">题意</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#D-Aeroplane-chess"><span class="toc-number">3.5.</span> <span class="toc-text">D - Aeroplane chess</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Input-2"><span class="toc-number">3.5.1.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Output-2"><span class="toc-number">3.5.2.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-2"><span class="toc-number">3.5.3.</span> <span class="toc-text">Sample</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#G-LOOPS"><span class="toc-number">3.6.</span> <span class="toc-text">G - LOOPS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Input-3"><span class="toc-number">3.6.1.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Output-3"><span class="toc-number">3.6.2.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-3"><span class="toc-number">3.6.3.</span> <span class="toc-text">Sample</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#H-Check-the-difficulty-of-problems"><span class="toc-number">3.7.</span> <span class="toc-text">H - Check the difficulty of problems</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Input-4"><span class="toc-number">3.7.1.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Output-4"><span class="toc-number">3.7.2.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-4"><span class="toc-number">3.7.3.</span> <span class="toc-text">Sample</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#I-Bag-of-mice"><span class="toc-number">3.8.</span> <span class="toc-text">I - Bag of mice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Input-5"><span class="toc-number">3.8.1.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Output-5"><span class="toc-number">3.8.2.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-1"><span class="toc-number">3.8.3.</span> <span class="toc-text">Sample 1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-2"><span class="toc-number">3.8.4.</span> <span class="toc-text">Sample 2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Note"><span class="toc-number">3.8.5.</span> <span class="toc-text">Note</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E6%84%8F-1"><span class="toc-number">3.8.6.</span> <span class="toc-text">题意</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#J-Football"><span class="toc-number">3.9.</span> <span class="toc-text">J - Football</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Input-6"><span class="toc-number">3.9.1.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Output-6"><span class="toc-number">3.9.2.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-5"><span class="toc-number">3.9.3.</span> <span class="toc-text">Sample</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hint"><span class="toc-number">3.9.4.</span> <span class="toc-text">Hint</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#K-Kids-and-Prizes"><span class="toc-number">3.10.</span> <span class="toc-text">K - Kids and Prizes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-1-1"><span class="toc-number">3.10.1.</span> <span class="toc-text">Sample 1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-2-1"><span class="toc-number">3.10.2.</span> <span class="toc-text">Sample 2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E6%84%8F%EF%BC%9A"><span class="toc-number">3.10.3.</span> <span class="toc-text">题意：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#M-Help-Me-Escape"><span class="toc-number">3.11.</span> <span class="toc-text">M - Help Me Escape</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Background"><span class="toc-number">3.11.0.1.</span> <span class="toc-text">Background</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Input-7"><span class="toc-number">3.11.0.2.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Output-7"><span class="toc-number">3.11.0.3.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sample-6"><span class="toc-number">3.11.0.4.</span> <span class="toc-text">Sample</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 By Totoro</div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.<p><a target="_blank" href="https://hexo.io/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a>&nbsp;<a target="_blank" href="https://butterfly.js.org/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a>&nbsp;<a target="_blank" href="https://www.jsdelivr.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a> &nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&logo=Vercel" title="本站采用双线部署，默认线路托管于Vercel"></a>&nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&logo=Codio" title="本站采用双线部署，联通线路托管于Coding"></a>&nbsp;<a target="_blank" href="https://github.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Gtihub托管"></a>&nbsp;<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.12.0"></script><script src="/js/main.js?v=4.12.0"></script><script src="/js/tw_cn.js?v=4.12.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script defer src="/js/light.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script async src="/js/title.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="只此无为身，且前行,忘记过去的人注定重蹈覆辙,我是我，我靠自己站立，我会做好自身,如果我睡大觉，谁给我摘月亮呢,假期和朋友，是人生中顶好的两样东西啊。,去爱，去失去，要不负相遇,没什么想不想通的，只是固执而已,我们深爱星辰，乃至不惧夜的黑,吃，喝，享受幸福，接受奇迹,浊水若长流，自清澄,雅俗共赏,总会有什么也不想的幸福时刻吧,时间顺流而下，生活逆流而上,悟已往之不谏，知来者之可追,希望你的小世界里,山花烂漫,茶酒俱全,安宁清淡,明朗欢愉" data-fontsize="18px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.12.0"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 380px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 320px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_12.webp);"> <a class="categoryBar-list-link" href="categories/刷题计划/">刷题计划</a><span class="categoryBar-list-count">60</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_13.webp);"> <a class="categoryBar-list-link" href="categories/ACMの旅/">ACMの旅</a><span class="categoryBar-list-count">46</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_14.webp);"> <a class="categoryBar-list-link" href="categories/数学建模/">数学建模</a><span class="categoryBar-list-count">31</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_17.webp);"> <a class="categoryBar-list-link" href="categories/编程基础/">编程基础</a><span class="categoryBar-list-count">14</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_18.webp);"> <a class="categoryBar-list-link" href="categories/前端の旅/">前端の旅</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_19.webp);"> <a class="categoryBar-list-link" href="categories/文学/">文学</a><span class="categoryBar-list-count">28</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_20.webp);"> <a class="categoryBar-list-link" href="categories/数据结构/">数据结构</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_21.webp);"> <a class="categoryBar-list-link" href="categories/少年游/">少年游</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/01/29/诗兴大发/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_69.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-01-29</span><a class="blog-slider__title" href="2024/01/29/诗兴大发/" alt="">诗兴大发</a><div class="blog-slider__text">未觉，却是中二少年的诗仙梦</div><a class="blog-slider__button" href="2024/01/29/诗兴大发/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/02/13/数据结构与算法-1/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.64/img_649_702x1000_300_null_normal.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-02-13</span><a class="blog-slider__title" href="2024/02/13/数据结构与算法-1/" alt="">数据结构与算法(总)</a><div class="blog-slider__text">方便大二看（）</div><a class="blog-slider__button" href="2024/02/13/数据结构与算法-1/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/02/24/常见优化技巧/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_238.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-02-24</span><a class="blog-slider__title" href="2024/02/24/常见优化技巧/" alt="">常见优化技巧</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2024/02/24/常见优化技巧/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>