<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Object-Oriented-Programming | Totoroの旅</title><meta name="author" content="Totoro"><meta name="copyright" content="Totoro"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="(放两首喽，纪念一下一晚看完)      Chapter 15. Object-Oriented ProgrammingExercise 15.1 What is a virtual member?  A member function should be dynamically bound by preceding its declaration. A virtual member in a b">
<meta property="og:type" content="article">
<meta property="og:title" content="Object-Oriented-Programming">
<meta property="og:url" content="http://totorocatcat.top/2024/04/07/Object-Oriented-Programming/index.html">
<meta property="og:site_name" content="Totoroの旅">
<meta property="og:description" content="(放两首喽，纪念一下一晚看完)      Chapter 15. Object-Oriented ProgrammingExercise 15.1 What is a virtual member?  A member function should be dynamically bound by preceding its declaration. A virtual member in a b">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://npm.elemecdn.com/ushio-api-img-moe@5.0.2/img_21_2500x1084_347.97998046875_null_normal.jpg">
<meta property="article:published_time" content="2024-04-06T16:51:27.000Z">
<meta property="article:modified_time" content="2024-11-18T17:19:44.906Z">
<meta property="article:author" content="Totoro">
<meta property="article:tag" content="基础">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://npm.elemecdn.com/ushio-api-img-moe@5.0.2/img_21_2500x1084_347.97998046875_null_normal.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/b5ca6e582a7a45e6fde46e616eeb68e.png"><link rel="canonical" href="http://totorocatcat.top/2024/04/07/Object-Oriented-Programming/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css?v=4.12.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":765,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Object-Oriented-Programming',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2024-11-19 01:19:44'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/scrollbar.css"><link rel="stylesheet" href="/css/cat.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/px3.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">782</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">32</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home-alt"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 趣味</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/project/"><i class="fa-fw fas fas fa-folder"></i><span> 项目</span></a></div><div class="menus_item"><a class="site-page" href="/stars/"><i class="fa-fw fas fa-bookmark"></i><span> 收藏</span></a></div><div class="menus_item"><a class="site-page" href="/bilibili/"><i class="fa-fw fas fa-tv"></i><span> 追番</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('https://npm.elemecdn.com/ushio-api-img-moe@5.0.2/img_21_2500x1084_347.97998046875_null_normal.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Totoroの旅"><span class="site-name">Totoroの旅</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home-alt"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 趣味</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/project/"><i class="fa-fw fas fas fa-folder"></i><span> 项目</span></a></div><div class="menus_item"><a class="site-page" href="/stars/"><i class="fa-fw fas fa-bookmark"></i><span> 收藏</span></a></div><div class="menus_item"><a class="site-page" href="/bilibili/"><i class="fa-fw fas fa-tv"></i><span> 追番</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Object-Oriented-Programming</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-04-06T16:51:27.000Z" title="发表于 2024-04-07 00:51:27">2024-04-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-11-18T17:19:44.906Z" title="更新于 2024-11-19 01:19:44">2024-11-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/C-%E3%81%AE%E6%97%85/">C++の旅</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>31分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Object-Oriented-Programming"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2024/04/07/Object-Oriented-Programming/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2024/04/07/Object-Oriented-Programming/" itemprop="commentCount"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>(放两首喽，纪念一下一晚看完)</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=2024541857&auto=1&height=66"></iframe>

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=2053707223&auto=1&height=66"></iframe>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/20230116232432_ff61a.png" alt="孤独摇滚 山田凉"></p>
<h1 id="Chapter-15-Object-Oriented-Programming"><a href="#Chapter-15-Object-Oriented-Programming" class="headerlink" title="Chapter 15. Object-Oriented Programming"></a>Chapter 15. Object-Oriented Programming</h1><h2 id="Exercise-15-1"><a href="#Exercise-15-1" class="headerlink" title="Exercise 15.1"></a>Exercise 15.1</h2><blockquote>
<p>What is a virtual member?</p>
</blockquote>
<p>A member function should be dynamically bound by preceding its declaration.</p>
<p>A virtual member in a base class expects its derived class define its own version. In particular base classes ordinarily should define a virtual destructor, even if it does no work.</p>
<blockquote>
<p>虚成员函数（virtual member function）是在类的声明中使用关键字 <code>virtual</code> 声明的成员函数。虚成员函数允许派生类（derived class）覆盖（override）基类（base class）中的同名函数，实现多态性（polymorphism）。</p>
<p>当派生类中定义了与基类中虚函数同名同参数列表的函数时，这个函数会覆盖基类中的虚函数，即使它们的实现不同。在运行时，通过基类指针或引用调用虚函数时，程序会根据指针或引用所指向的实际对象的类型来动态绑定（dynamically bind）到正确的函数实现，从而实现多态性的效果。</p>
<p>通常情况下，如果基类中存在虚函数，建议将析构函数也声明为虚函数。这是因为在使用基类指针或引用删除派生类对象时，如果基类的析构函数不是虚函数，可能导致只会调用基类的析构函数而不会调用派生类的析构函数，从而造成内存泄漏或行为未定义的情况。声明基类析构函数为虚函数可以确保在使用多态性时正确地释放派生类对象的资源。</p>
</blockquote>
<h2 id="Exercise-15-2"><a href="#Exercise-15-2" class="headerlink" title="Exercise 15.2"></a>Exercise 15.2</h2><blockquote>
<p>How does the <code>protected</code> access specifier differ from <code>private</code>?</p>
</blockquote>
<p>base class members:</p>
<ul>
<li><code>private:</code>: base class itself and friends can access</li>
<li><code>protected</code>: base class itself, friends and derived classes can access</li>
</ul>
<blockquote>
<p>访问控制修饰符 <code>protected</code> 与 <code>private</code> 的区别在于：</p>
<p>基类成员：</p>
<ul>
<li><code>private:</code>：只有基类自身和友元可以访问。</li>
<li><code>protected:</code>：基类自身、友元以及派生类都可以访问。</li>
</ul>
</blockquote>
<h2 id="Exercise-15-3"><a href="#Exercise-15-3" class="headerlink" title="Exercise 15.3"></a>Exercise 15.3</h2><blockquote>
<p>Define your own versions of the <code>Quote</code> class and the <code>print_total</code> function.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">C++ Primer 5th Exercise Answer Source Code</span></span><br><span class="line"><span class="comment">Copyright (C) 2014-2015 github.com/pezy/Cpp-Primer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Quote class and print_total function</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">If you have questions, try to connect with me: pezy&lt;urbancpz@gmail.com&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CP5_EX15_03_QUOTE_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CP5_EX15_03_QUOTE_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">namespace</span> EX03 &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">using</span> std::string;</span><br><span class="line">    <span class="keyword">using</span> std::ostream; <span class="keyword">using</span> std::endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Quote</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Quote</span>(string <span class="type">const</span>&amp; b, <span class="type">double</span> p) : <span class="built_in">bookNo</span>(b), <span class="built_in">price</span>(p) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">string <span class="title">isbn</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> bookNo; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">net_price</span><span class="params">(<span class="type">size_t</span> n)</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> n * price; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Quote</span>() = <span class="keyword">default</span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string bookNo;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">double</span> price = <span class="number">0.0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">print_total</span><span class="params">(ostream&amp; os, Quote <span class="type">const</span>&amp; item, <span class="type">size_t</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="type">double</span> ret = item.<span class="built_in">net_price</span>(n);</span><br><span class="line">    os &lt;&lt; <span class="string">&quot;ISBN: &quot;</span> &lt;&lt; item.<span class="built_in">isbn</span>() &lt;&lt; <span class="string">&quot; # sold: &quot;</span> &lt;&lt; n &lt;&lt; <span class="string">&quot; total due: &quot;</span> &lt;&lt; ret &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CP5_EX15_03_QUOTE_H_</span></span></span><br></pre></td></tr></table></figure>
<h2 id="Exercise-15-4"><a href="#Exercise-15-4" class="headerlink" title="Exercise 15.4"></a>Exercise 15.4</h2><blockquote>
<p>Which of the following declarations, if any, are incorrect? Explain why.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123; ... &#125;;</span><br><span class="line">(a) <span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Derived &#123; ... &#125;;</span><br><span class="line">(b) <span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">private</span> Base &#123; ... &#125;;</span><br><span class="line">(c) <span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base;</span><br></pre></td></tr></table></figure>
<ul>
<li>(a) incorrect, derive from itself</li>
<li>(b) correct.</li>
<li>(c) incorrect, A derived class is declared like any other class. The declaration contains the class name but does not include its derivation list</li>
</ul>
<blockquote>
<p>提供的声明中：</p>
<p>(a) <code>class Derived : public Derived &#123; ... &#125;;</code> 是不正确的。该声明尝试将类 <code>Derived</code> 派生自身，这是不允许的。一个类不能是其自身的基类。</p>
<p>(b) <code>class Derived : private Base &#123; ... &#125;;</code> 是正确的。它声明了一个类 <code>Derived</code>，从基类 <code>Base</code> 私有派生而来。这意味着 <code>Base</code> 的公共和保护成员成为了 <code>Derived</code> 的私有成员。</p>
<p>(c) <code>class Derived : public Base;</code> 是不正确的。这种语法不是用于声明派生类的。在声明派生类时，你需要在冒号后面指定基类，然后是访问说明符。在这种情况下，缺少了派生类的主体部分。</p>
</blockquote>
<h2 id="Exercise-15-5"><a href="#Exercise-15-5" class="headerlink" title="Exercise 15.5"></a>Exercise 15.5</h2><blockquote>
<p>Define your own version of the <code>Bulk_quote</code> class.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">C++ Primer 5th Exercise Answer Source Code</span></span><br><span class="line"><span class="comment">Copyright (C) 2014-2015 github.com/pezy/Cpp-Primer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Bulk_quote class</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">If you have questions, try to connect with me: pezy&lt;urbancpz@gmail.com&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CP5_EX15_05_BULK_QUOTE_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CP5_EX15_05_BULK_QUOTE_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ex15_03_Quote.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> EX05 &#123;</span><br><span class="line">    <span class="keyword">using</span> std::string;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> EX03;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bulk_quote</span> : <span class="keyword">public</span> Quote &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Bulk_quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Bulk_quote</span>(string <span class="type">const</span>&amp; book, <span class="type">double</span> p, <span class="type">size_t</span> qty, <span class="type">double</span> disc) : <span class="built_in">Quote</span>(book, p), <span class="built_in">min_qty</span>(qty), <span class="built_in">discount</span>(disc) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">net_price</span><span class="params">(<span class="type">size_t</span> cnt)</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cnt &gt;= min_qty) <span class="keyword">return</span> cnt * (<span class="number">1</span> - discount) * price;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> cnt * price;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">size_t</span> min_qty = <span class="number">0</span>;</span><br><span class="line">    <span class="type">double</span> discount = <span class="number">0.0</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CP5_EX15_05_BULK_QUOTE_H_</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这段代码定义了一个名为 <code>Bulk_quote</code> 的类，它是 <code>Quote</code> 类的派生类。<code>Bulk_quote</code> 类添加了两个额外的成员变量 <code>min_qty</code> 和 <code>discount</code>，用于表示最小购买数量和折扣率。</p>
<p>在 <code>Bulk_quote</code> 类中，重载了基类 <code>Quote</code> 的 <code>net_price</code> 函数。如果购买数量达到或超过 <code>min_qty</code>，则应用折扣；否则按原价计算。</p>
</blockquote>
<h2 id="Exercise-15-7"><a href="#Exercise-15-7" class="headerlink" title="Exercise 15.7"></a>Exercise 15.7</h2><blockquote>
<p>Define a class that implements a limited discount strategy, which applies a discount to books purchased up to a given limit. If the number of copies exceeds that limit, the normal price applies to those purchased beyond the limit.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">C++ Primer 5th Exercise Answer Source Code</span></span><br><span class="line"><span class="comment">Copyright (C) 2014-2015 github.com/pezy/Cpp-Primer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Limit_quote class</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">If you have questions, try to connect with me: pezy&lt;urbancpz@gmail.com&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CP5_EX15_07_LIMIT_QUOTE_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CP5_EX15_07_LIMIT_QUOTE_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ex15_05_Bulk_quote.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> EX07 &#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> EX05;</span><br><span class="line">    <span class="keyword">using</span> std::string;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Limit_quote</span> : <span class="keyword">public</span> Bulk_quote &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Limit_quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Limit_quote</span>(string <span class="type">const</span>&amp; book, <span class="type">double</span> p, <span class="type">size_t</span> min, <span class="type">size_t</span> max, <span class="type">double</span> dist) : <span class="built_in">Bulk_quote</span>(book, p, min, dist), <span class="built_in">max_qty</span>(max) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">net_price</span><span class="params">(<span class="type">size_t</span> cnt)</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cnt &gt; max_qty) <span class="keyword">return</span> max_qty * (<span class="number">1</span> - discount) * price + (cnt - max_qty) * price;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cnt &gt;= min_qty) <span class="keyword">return</span> cnt * (<span class="number">1</span> - discount) * price;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> cnt * price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">size_t</span> max_qty = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// LIMIT_QUOTE_H_</span></span></span><br></pre></td></tr></table></figure>
<h2 id="Exercise-15-8"><a href="#Exercise-15-8" class="headerlink" title="Exercise 15.8"></a>Exercise 15.8</h2><blockquote>
<p>Define static type and dynamic type.</p>
</blockquote>
<ul>
<li>static type: Type with which a variable is defined or that an expression yields. Static type is known at <strong>compile time</strong>.</li>
<li>dynamic type: Type of an object at <strong>run time</strong>. The dynamic type of an object to which a reference refers or to which a pointer points may differ from the static type of the reference or pointer.</li>
</ul>
<blockquote>
<ul>
<li>静态类型：变量定义时的类型，或表达式生成的类型。静态类型在<strong>编译时</strong>就已知。</li>
<li>动态类型：对象在<strong>运行时</strong>的类型。引用所引用的对象或指针所指向的对象的动态类型可能与引用或指针的静态类型不同。</li>
</ul>
</blockquote>
<h2 id="Exercise-15-9"><a href="#Exercise-15-9" class="headerlink" title="Exercise 15.9"></a>Exercise 15.9</h2><blockquote>
<p>When is it possible for an expression’s static type to differ from its dynamic type? Give three examples in which the static and dynamic type differ.</p>
</blockquote>
<p>A pointer or reference to a base-class type can refer to an to object of derived type. In such cases the static type is reference (or pointer) to base, but the dynamic type is reference (or pointer) to derived.</p>
<p>Anything like this can be an example.</p>
<blockquote>
<p>在什么情况下，表达式的静态类型可以与动态类型不同？给出三个静态类型与动态类型不同的示例。</p>
<p>当指针或引用指向基类类型的对象时，可以引用到派生类型的对象。在这种情况下，静态类型是指向基类的引用（或指针），而动态类型是指向派生类的引用（或指针）。</p>
<p>类似这样的情况都可以作为示例。</p>
</blockquote>
<h2 id="Exercise-15-10"><a href="#Exercise-15-10" class="headerlink" title="Exercise 15.10"></a>Exercise 15.10</h2><blockquote>
<p>Recalling the discussion from 8.1 (p. 311), explain how the program on page 317 that passed an <code>ifstream</code> to the <code>Sales_data</code> <code>read</code> function works.</p>
</blockquote>
<p>the function takes a <code>istream</code> from which <code>ifstream</code> is derived. Hence the <code>ifstream</code> object “is a” <code>istream</code> ,which is why it works.</p>
<blockquote>
<p>回顾一下第8.1节（第311页）的讨论，解释一下317页上的程序是如何将ifstream传递给Sales_data read函数的。</p>
<p>该函数接受一个istream，而ifstream是从istream派生出来的。因此，ifstream对象“是”一个istream，这就是为什么它能够工作的原因。</p>
</blockquote>
<h2 id="Exercise-15-12"><a href="#Exercise-15-12" class="headerlink" title="Exercise 15.12"></a>Exercise 15.12</h2><blockquote>
<p>Is it ever useful to declare a member function as both <code>override</code> and <code>final</code>? Why or why not?</p>
<p>声明成员函数既为<code>override</code>又为<code>final</code>有什么用处吗？为什么？声明成员函数既为<code>override</code>又为<code>final</code>有什么用处吗？为什么？</p>
</blockquote>
<p>Sure. <code>override</code> means overriding the same name virtual function in base class. <code>final</code> means preventing any overriding this virtual function by any derived classes that are more lower at the hierarchy.</p>
<blockquote>
<p>当然可以。override 表示在派生类中覆盖相同名称的基类虚函数。final 表示阻止任何更低层次的派生类对该虚函数进行覆盖。</p>
</blockquote>
<h2 id="Exercise-15-13"><a href="#Exercise-15-13" class="headerlink" title="Exercise 15.13"></a>Exercise 15.13</h2><blockquote>
<p>Given the following classes, explain each print function:</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">name</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> basename; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">print</span><span class="params">(ostream &amp;os)</span> </span>&#123; os &lt;&lt; basename; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string basename;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">derived</span> : <span class="keyword">public</span> base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(ostream &amp;os)</span> </span>&#123; <span class="built_in">print</span>(os); os &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; i; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>If there is a problem in this code, how would you fix it?</p>
<p>The <code>print</code> in <code>derived::print</code> wanted to call the <code>print</code> from the base class. However, the class scope <code>base::</code> was omitted. As a result, it will cause an infinite recursion.</p>
<p><strong>Fixed:</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(ostream &amp;os)</span> </span>&#123; base::<span class="built_in">print</span>(os); os &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; i; &#125;</span><br></pre></td></tr></table></figure>
<p>在derived::print中，想要调用base类的print函数。然而，忽略了类作用域base::，导致了无限递归。</p>
<h2 id="Exercise-15-14"><a href="#Exercise-15-14" class="headerlink" title="Exercise 15.14"></a>Exercise 15.14</h2><blockquote>
<p>Given the classes from the previous exercise and the following objects, determine which function is called at run time:</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">base bobj; base *bp1 = &amp;bobj; base &amp;br1 = bobj;</span><br><span class="line">derived dobj; base *bp2 = &amp;dobj; base &amp;br2 = dobj;</span><br><span class="line">(a) bobj.<span class="built_in">print</span>();   <span class="comment">// base::print()</span></span><br><span class="line">(b) dobj.<span class="built_in">print</span>();   <span class="comment">// derived::print()</span></span><br><span class="line">(c) bp1-&gt;<span class="built_in">name</span>();    <span class="comment">// base::name()</span></span><br><span class="line">(d) bp2-&gt;<span class="built_in">name</span>();    <span class="comment">// base::name()</span></span><br><span class="line">(e) br1.<span class="built_in">print</span>();    <span class="comment">// base::print()</span></span><br><span class="line">(f) br2.<span class="built_in">print</span>();    <span class="comment">// derived::print()</span></span><br></pre></td></tr></table></figure>
<p>e and f are called at run time.</p>
<h2 id="Exercise-15-15"><a href="#Exercise-15-15" class="headerlink" title="Exercise 15.15"></a>Exercise 15.15</h2><blockquote>
<p>Define your own versions of <code>Disc_quote</code> and <code>Bulk_quote</code>.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">C++ Primer 5th Exercise Answer Source Code</span></span><br><span class="line"><span class="comment">Copyright (C) 2014-2015 github.com/pezy/Cpp-Primer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Disc_quote</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">If you have questions, try to connect with me: pezy&lt;urbancpz@gmail.com&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CP5_EX15_15_DISC_QUOTE_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CP5_EX15_15_DISC_QUOTE_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ex15_03_Quote.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">namespace</span> EX15 &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">using</span> std::string;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Disc_quote</span> : <span class="keyword">public</span> EX03::Quote &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Disc_quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Disc_quote</span>(string <span class="type">const</span>&amp; b, <span class="type">double</span> p, <span class="type">size_t</span> q, <span class="type">double</span> d) : EX03::<span class="built_in">Quote</span>(b, p), <span class="built_in">quantity</span>(q), <span class="built_in">discount</span>(d)&#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">net_price</span><span class="params">(<span class="type">size_t</span>)</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">size_t</span> quantity = <span class="number">0</span>;</span><br><span class="line">    <span class="type">double</span> discount = <span class="number">0.0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CP5_EX15_15_DISC_QUOTE_H_</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">=================================================================================</span><br><span class="line"></span><br><span class="line">C++ Primer <span class="number">5</span>th Exercise Answer Source Code</span><br><span class="line"><span class="built_in">Copyright</span> (C) <span class="number">2014</span><span class="number">-2015</span> github.com/pezy/Cpp-Primer</span><br><span class="line"></span><br><span class="line">Disc_quote</span><br><span class="line"></span><br><span class="line">If you have questions, <span class="keyword">try</span> to connect with me: pezy&lt;urbancpz@gmail.com&gt;</span><br><span class="line"></span><br><span class="line">=================================================================================</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CP5_EX15_15_BULK_QUOTE_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CP5_EX15_15_BULK_QUOTE_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ex15_15_Disc_quote.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">namespace</span> EX15 &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">using</span> std::string;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bulk_quote</span> : <span class="keyword">public</span> Disc_quote &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Bulk_quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Bulk_quote</span>(string <span class="type">const</span>&amp; book, <span class="type">double</span> price, <span class="type">size_t</span> qty, <span class="type">double</span> disc) : <span class="built_in">Disc_quote</span>(book, price, qty, disc) &#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">net_price</span><span class="params">(std::<span class="type">size_t</span> cnt)</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cnt &gt;= quantity) <span class="keyword">return</span> cnt * (<span class="number">1</span> - discount) * price;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> cnt * price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CP5_EX15_15_BULK_QUOTE_H_</span></span></span><br></pre></td></tr></table></figure>
<h2 id="Exercise-15-16"><a href="#Exercise-15-16" class="headerlink" title="Exercise 15.16"></a>Exercise 15.16</h2><blockquote>
<p>Rewrite the class representing a limited discount strategy, which you wrote for the exercises in 15.2.2 (p. 601), to inherit from <code>Disc_quote</code>.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">C++ Primer 5th Exercise Answer Source Code</span></span><br><span class="line"><span class="comment">Copyright (C) 2014-2015 github.com/pezy/Cpp-Primer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Limit_quote class</span></span><br><span class="line"><span class="comment">inherit from Disc_quote</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">If you have questions, try to connect with me: pezy&lt;urbancpz@gmail.com&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CP5_EX15_16_LIMIT_QUOTE_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CP5_EX15_16_LIMIT_QUOTE_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ex15_15_Disc_quote.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> EX16 &#123;</span><br><span class="line">    <span class="keyword">using</span> std::string;</span><br><span class="line">    <span class="keyword">using</span> std::cout; <span class="keyword">using</span> std::endl;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> EX15;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Limit_quote</span> : <span class="keyword">public</span> Disc_quote &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Limit_quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Limit_quote</span>(string <span class="type">const</span>&amp; book, <span class="type">double</span> p, <span class="type">size_t</span> min, <span class="type">size_t</span> max, <span class="type">double</span> dist) : <span class="built_in">Disc_quote</span>(book, p, min, dist), <span class="built_in">max_qty</span>(max) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">net_price</span><span class="params">(<span class="type">size_t</span> cnt)</span> <span class="type">const</span> <span class="keyword">final</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cnt &gt; max_qty) <span class="keyword">return</span> max_qty * (<span class="number">1</span> - discount) * price + (cnt - max_qty) * price;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cnt &gt;= quantity) <span class="keyword">return</span> cnt * (<span class="number">1</span> - discount) * price;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> cnt * price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">size_t</span> max_qty = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CP5_EX15_16_LIMIT_QUOTE_H_</span></span></span><br></pre></td></tr></table></figure>
<h2 id="Exercise-15-17"><a href="#Exercise-15-17" class="headerlink" title="Exercise 15.17"></a>Exercise 15.17</h2><blockquote>
<p>Try to define an object of type Disc_quote and see what errors you get from the compiler.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">note:   because the following <span class="keyword">virtual</span> functions are pure within <span class="string">&#x27;ch15::EX15::Disc_quote&#x27;</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">net_price</span><span class="params">(<span class="type">size_t</span>)</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在尝试定义类型为 <code>Disc_quote</code> 的对象时，编译器会报错，因为 <code>Disc_quote</code> 类中的虚函数 <code>net_price(size_t)</code> 是一个纯虚函数（pure virtual function），没有在类中提供具体的实现。纯虚函数必须在派生类中被重写（override）以提供具体的实现，否则派生类也将成为抽象类，无法实例化对象。</p>
<p>错误消息中提到了这一点，指示 <code>Disc_quote</code> 类中的 <code>net_price(size_t)</code> 函数是纯虚函数，需要在派生类中提供具体的实现。</p>
</blockquote>
<h2 id="Exercise-15-21"><a href="#Exercise-15-21" class="headerlink" title="Exercise 15.21"></a>Exercise 15.21</h2><blockquote>
<p>Choose one of the following general abstractions containing a family of types (or choose one of your own). Organize the types into an inheritance hierarchy:</p>
</blockquote>
<ul>
<li><p>(a) Graphical file formats (such as gif, tiff, jpeg, bmp)</p>
</li>
<li><p>(b) Geometric primitives (such as box, circle, sphere, cone)</p>
</li>
<li><blockquote>
<p>(c) C++ language types (such as class, function, member function)<br>选择以下包含一组类型的通用抽象（或选择您自己的抽象）。将这些类型组织成一个继承层次结构：</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>(a) 图形文件格式（如 gif、tiff、jpeg、bmp）<br>(b) 几何原语（如盒子、圆、球、圆锥）<br>(c) C++ 语言类型（如类、函数、成员函数）</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">C++ Primer 5th Exercise Answer Source Code</span></span><br><span class="line"><span class="comment">Copyright (C) 2014-2015 github.com/pezy/Cpp-Primer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Geomtric Primitives</span></span><br><span class="line"><span class="comment">box, circle, sphere, cone</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">If you have questions, try to connect with me: pezy&lt;urbancpz@gmail.com&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CP5_EX15_21_GEOMTRIC_PRIMITIVES_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CP5_EX15_21_GEOMTRIC_PRIMITIVES_H_</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">namespace</span> EX21 &#123;</span><br><span class="line"></span><br><span class="line">	<span class="type">static</span> <span class="type">const</span> <span class="type">float</span> PI = <span class="number">3.14159f</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="function"><span class="keyword">virtual</span> <span class="type">const</span> <span class="type">char</span>* <span class="title">shape_name</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">		<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">resize_by_percentage</span><span class="params">(<span class="type">float</span> pct)</span> </span>= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">virtual</span> ~<span class="built_in">Shape</span>() &#123;&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Shape_2D</span> : <span class="keyword">public</span> Shape &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="built_in">Shape_2D</span>() = <span class="keyword">default</span>;</span><br><span class="line">		<span class="built_in">Shape_2D</span>(<span class="type">float</span> x, <span class="type">float</span> y) : <span class="built_in">x_</span>(x), <span class="built_in">y_</span>(y) &#123;&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">virtual</span> <span class="type">float</span> <span class="title">area</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line">		<span class="function"><span class="keyword">virtual</span> <span class="type">float</span> <span class="title">diameter</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line">		<span class="function"><span class="keyword">virtual</span> <span class="type">float</span> <span class="title">circumference</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">virtual</span> ~<span class="built_in">Shape_2D</span>() <span class="keyword">override</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span>:</span><br><span class="line">		<span class="type">float</span> x_ = <span class="number">0.f</span>;</span><br><span class="line">		<span class="type">float</span> y_ = <span class="number">0.f</span>;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Shape_3D</span> : <span class="keyword">public</span> Shape &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="built_in">Shape_3D</span>() = <span class="keyword">default</span>;</span><br><span class="line">		<span class="built_in">Shape_3D</span>(<span class="type">float</span> x, <span class="type">float</span> y, <span class="type">float</span> z) : <span class="built_in">x_</span>(x), <span class="built_in">y_</span>(y), <span class="built_in">z_</span>(z) &#123;&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">virtual</span> <span class="type">float</span> <span class="title">volume</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">virtual</span> ~<span class="built_in">Shape_3D</span>() <span class="keyword">override</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span>:</span><br><span class="line">		<span class="type">float</span> x_ = <span class="number">0.f</span>;</span><br><span class="line">		<span class="type">float</span> y_ = <span class="number">0.f</span>;</span><br><span class="line">		<span class="type">float</span> z_ = <span class="number">0.f</span>;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Box</span> : <span class="keyword">public</span> Shape_3D &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="built_in">Box</span>() = <span class="keyword">default</span>;</span><br><span class="line">		<span class="function"><span class="keyword">explicit</span> <span class="title">Box</span><span class="params">(<span class="type">float</span> width)</span> : half_len_x_(width * <span class="number">0.5f</span>), half_len_y_(width * <span class="number">0.5f</span>), half_len_z_(width * <span class="number">0.5f</span>) &#123;</span>&#125;</span><br><span class="line">		<span class="built_in">Box</span>(<span class="type">float</span> center_x, <span class="type">float</span> center_y, <span class="type">float</span> center_z, <span class="type">float</span> len_x, <span class="type">float</span> len_y, <span class="type">float</span> len_z) : <span class="built_in">Shape_3D</span>(center_x, center_y, center_z),</span><br><span class="line">		<span class="built_in">half_len_x_</span>(len_x * <span class="number">0.5f</span>), <span class="built_in">half_len_y_</span>(len_y * <span class="number">0.5f</span>), <span class="built_in">half_len_z_</span>(len_z * <span class="number">0.5f</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="type">const</span> <span class="type">char</span>* <span class="title">shape_name</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;Box&quot;</span>; &#125;</span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="type">void</span> <span class="title">resize_by_percentage</span><span class="params">(<span class="type">float</span> pct)</span> <span class="keyword">override</span> </span>&#123; half_len_x_ *= pct; half_len_y_ *= pct; half_len_z_ *= pct; &#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="type">float</span> <span class="title">volume</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> half_len_x_ * half_len_y_ * half_len_z_ * <span class="number">8</span>; &#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">virtual</span> ~<span class="built_in">Box</span>() <span class="keyword">override</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span>:</span><br><span class="line">		<span class="type">float</span> half_len_x_ = <span class="number">0.5f</span>;</span><br><span class="line">		<span class="type">float</span> half_len_y_ = <span class="number">0.5f</span>;</span><br><span class="line">		<span class="type">float</span> half_len_z_ = <span class="number">0.5f</span>;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Circle</span> : <span class="keyword">public</span> Shape_2D &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="built_in">Circle</span>() = <span class="keyword">default</span>;</span><br><span class="line">		<span class="function"><span class="keyword">explicit</span> <span class="title">Circle</span><span class="params">(<span class="type">float</span> radius)</span> : radius_(radius) &#123;</span>&#125;</span><br><span class="line">		<span class="built_in">Circle</span>(<span class="type">float</span> center_x, <span class="type">float</span> center_y, <span class="type">float</span> radius) : <span class="built_in">Shape_2D</span>(center_x, center_y), <span class="built_in">radius_</span>(radius) &#123;&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="type">float</span> <span class="title">area</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> PI * radius_ * radius_; &#125;</span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="type">float</span> <span class="title">diameter</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> <span class="number">2</span> * radius_; &#125;</span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="type">float</span> <span class="title">circumference</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> <span class="number">2</span> * PI * radius_; &#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="type">const</span> <span class="type">char</span>* <span class="title">shape_name</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;Circle&quot;</span>; &#125;</span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="type">void</span> <span class="title">resize_by_percentage</span><span class="params">(<span class="type">float</span> pct)</span> <span class="keyword">override</span> </span>&#123; radius_ *= pct; &#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">virtual</span> ~<span class="built_in">Circle</span>() <span class="keyword">override</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span>:</span><br><span class="line">		<span class="type">float</span> radius_ = <span class="number">1.f</span>;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Sphere</span> : <span class="keyword">public</span> Shape_3D &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="built_in">Sphere</span>() = <span class="keyword">default</span>;</span><br><span class="line">		<span class="function"><span class="keyword">explicit</span> <span class="title">Sphere</span><span class="params">(<span class="type">float</span> radius)</span> : radius_(radius) &#123;</span>&#125;</span><br><span class="line">		<span class="built_in">Sphere</span>(<span class="type">float</span> center_x, <span class="type">float</span> center_y, <span class="type">float</span> center_z, <span class="type">float</span> radius) : <span class="built_in">Shape_3D</span>(center_x, center_y, center_z), <span class="built_in">radius_</span>(radius) &#123;&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="type">const</span> <span class="type">char</span>* <span class="title">shape_name</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;Sphere&quot;</span>; &#125;</span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="type">void</span> <span class="title">resize_by_percentage</span><span class="params">(<span class="type">float</span> pct)</span> <span class="keyword">override</span> </span>&#123; radius_ *= pct; &#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="type">float</span> <span class="title">volume</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> <span class="number">4</span> * PI * radius_ * radius_ * radius_ / <span class="number">3</span>; &#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">virtual</span> ~<span class="built_in">Sphere</span>() <span class="keyword">override</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span>:</span><br><span class="line">		<span class="type">float</span> radius_ = <span class="number">1.f</span>;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Cone</span> : <span class="keyword">public</span> Shape_3D &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="built_in">Cone</span>() = <span class="keyword">default</span>;</span><br><span class="line">		<span class="built_in">Cone</span>(<span class="type">float</span> radius, <span class="type">float</span> height) : <span class="built_in">radius_</span>(radius), <span class="built_in">height_</span>(height) &#123;&#125;</span><br><span class="line">		<span class="built_in">Cone</span>(<span class="type">float</span> center_x, <span class="type">float</span> center_y, <span class="type">float</span> center_z, <span class="type">float</span> radius, <span class="type">float</span> height) : <span class="built_in">Shape_3D</span>(center_x, center_y, center_z), <span class="built_in">radius_</span>(radius), <span class="built_in">height_</span>(height) &#123;&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="type">const</span> <span class="type">char</span>* <span class="title">shape_name</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;Cone&quot;</span>; &#125;</span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="type">void</span> <span class="title">resize_by_percentage</span><span class="params">(<span class="type">float</span> pct)</span> <span class="keyword">override</span> </span>&#123; radius_ *= pct; height_ *= pct; &#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">inline</span> <span class="type">float</span> <span class="title">volume</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> PI * radius_ * radius_ * height_ / <span class="number">3</span>; &#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">virtual</span> ~<span class="built_in">Cone</span>() <span class="keyword">override</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span>:</span><br><span class="line">		<span class="type">float</span> radius_ = <span class="number">1.f</span>;</span><br><span class="line">		<span class="type">float</span> height_ = <span class="number">1.f</span>;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CP5_EX15_21_GEOMTRIC_PRIMITIVES_H_</span></span></span><br></pre></td></tr></table></figure>
<h2 id="Exercise-15-24"><a href="#Exercise-15-24" class="headerlink" title="Exercise 15.24"></a>Exercise 15.24</h2><blockquote>
<p>What kinds of classes need a virtual destructor? What operations must a virtual destructor perform?</p>
</blockquote>
<p>Generally, a base class should define a virtual destructor.</p>
<p>The destructor needs to be virtual to allow objects in the inheritance hierarchy to be <strong>dynamically allocated</strong>.</p>
<blockquote>
<blockquote>
<p>什么样的类需要虚析构函数？虚析构函数必须执行哪些操作？</p>
</blockquote>
<p>通常，一个基类应该定义一个虚析构函数。</p>
<p>虚析构函数需要在继承层次结构中允许对象进行<strong>动态分配</strong>。</p>
</blockquote>
<h2 id="Exercise-15-25"><a href="#Exercise-15-25" class="headerlink" title="Exercise 15.25"></a>Exercise 15.25</h2><blockquote>
<p>Why did we define a default constructor for <code>Disc_quote</code>? What effect, if any, would removing that constructor have on the behavior of <code>Bulk_quote</code>?</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> std::string;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Quote</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Quote</span>(string <span class="type">const</span>&amp; b, <span class="type">double</span> p) : <span class="built_in">bookNo</span>(b), <span class="built_in">price</span>(p) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">string <span class="title">isbn</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> bookNo; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">net_price</span><span class="params">(<span class="type">size_t</span> n)</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> n * price; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Quote</span>() = <span class="keyword">default</span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string bookNo;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">double</span> price = <span class="number">0.0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Disc_quote</span> : <span class="keyword">public</span> Quote &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//Disc_quote() = default;</span></span><br><span class="line">    <span class="built_in">Disc_quote</span>(string <span class="type">const</span>&amp; b, <span class="type">double</span> p, <span class="type">size_t</span> q, <span class="type">double</span> d) : <span class="built_in">Quote</span>(b, p), <span class="built_in">quantity</span>(q), <span class="built_in">discount</span>(d)&#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">net_price</span><span class="params">(<span class="type">size_t</span>)</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">size_t</span> quantity = <span class="number">0</span>;</span><br><span class="line">    <span class="type">double</span> discount = <span class="number">0.0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bulk_quote</span> : <span class="keyword">public</span> Disc_quote &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Bulk_quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Bulk_quote</span>(string <span class="type">const</span>&amp; book, <span class="type">double</span> price, <span class="type">size_t</span> qty, <span class="type">double</span> disc) : <span class="built_in">Disc_quote</span>(book, price, qty, disc) &#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">net_price</span><span class="params">(std::<span class="type">size_t</span> cnt)</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cnt &gt;= quantity) <span class="keyword">return</span> cnt * (<span class="number">1</span> - discount) * price;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> cnt * price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Bulk_quote b_quote;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Without it, when building the upper codes, the compiler would conplain that:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">error: use of deleted function <span class="string">&#x27;Bulk_quote::Bulk_quote()&#x27;</span></span><br><span class="line">    Bulk_quote b_quote;</span><br><span class="line">                ^</span><br><span class="line"><span class="string">&#x27;Bulk_quote::Bulk_quote()&#x27;</span> is implicitly deleted because the <span class="keyword">default</span> definition would be ill-formed:</span><br><span class="line">    <span class="built_in">Bulk_quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    ^</span><br></pre></td></tr></table></figure>
<p>The reason is that a constructor taking 4 parameters has been defined, which prevented the compiler generate synthesized version default constructor. As a result, the default constructor of any class derived from it has been defined as deleted. Thus the default constructor must be defined explicitly so that the derived classes can call it when executing its default constructor.</p>
<blockquote>
<p>我们为什么要为 <code>Disc_quote</code> 定义一个默认构造函数？如果删除该构造函数，对 <code>Bulk_quote</code> 的行为会有什么影响？</p>
<p>在 <code>Disc_quote</code> 中定义一个默认构造函数的目的是为了确保派生类（如 <code>Bulk_quote</code>）可以调用该构造函数，从而正确地构造对象。如果我们删除了 <code>Disc_quote</code> 中的默认构造函数，编译器将会为其生成一个合成的默认构造函数，但由于 <code>Disc_quote</code> 存在一个带参数的构造函数，这将导致合成的默认构造函数被删除。结果，派生类 <code>Bulk_quote</code> 将无法调用其默认构造函数，因为默认构造函数已经被删除了。</p>
<p>因此，为了确保派生类可以正确地构造对象，我们需要显式地定义 <code>Disc_quote</code> 的默认构造函数。</p>
</blockquote>
<h2 id="Exercise-15-26"><a href="#Exercise-15-26" class="headerlink" title="Exercise 15.26"></a>Exercise 15.26</h2><blockquote>
<p>Define the <code>Quote</code> and <code>Bulk_quote</code> copy-control members to do the same job as the synthesized versions. Give them and the other constructors print statements that identify which function is running. Write programs using these classes and predict what objects will be created and destroyed. Compare your predictions with the output and continue experimenting until your predictions are reliably correct.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">C++ Primer 5th Exercise Answer Source Code</span></span><br><span class="line"><span class="comment">Copyright (C) 2014-2015 https://github.com/pezy/Cpp-Primer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Quote class</span></span><br><span class="line"><span class="comment"> 1. define copy-control members to do the same job as the synthesized versions.</span></span><br><span class="line"><span class="comment"> 2. Print function name to trace the running.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">If you have questions, try to connect with me: pezy&lt;urbancpz@gmail.com&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CP5_EX15_26_QUOTE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CP5_EX15_26_QUOTE_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> EX26 &#123;</span><br><span class="line">    <span class="keyword">using</span> std::string;</span><br><span class="line">    <span class="keyword">using</span> std::cout; <span class="keyword">using</span> std::endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Quote</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Quote</span>() &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Quote Constructor&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Quote</span>(<span class="type">const</span> string &amp;b, <span class="type">double</span> p) : <span class="built_in">bookNo</span>(b), <span class="built_in">price</span>(p) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Quote Constructor taking two parameters&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Quote</span>(<span class="type">const</span> Quote &amp;rhs) : <span class="built_in">bookNo</span>(rhs.bookNo), <span class="built_in">price</span>(rhs.price) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Quote Copy Constructor&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Quote&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Quote &amp;rhs) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Quote Copy assignment operator&quot;</span> &lt;&lt; endl;</span><br><span class="line">        price = rhs.price;</span><br><span class="line">        bookNo = rhs.bookNo;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Quote</span>(Quote &amp;&amp;rhs) <span class="keyword">noexcept</span> : <span class="built_in">bookNo</span>(std::<span class="built_in">move</span>(rhs.bookNo)), <span class="built_in">price</span>(std::<span class="built_in">move</span>(rhs.price)) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Quote Move Constructor&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Quote&amp; <span class="keyword">operator</span>=(Quote &amp;&amp;rhs) <span class="keyword">noexcept</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Quote Move assignment operator&quot;</span> &lt;&lt; endl;</span><br><span class="line">        bookNo = std::<span class="built_in">move</span>(rhs.bookNo);</span><br><span class="line">        price = std::<span class="built_in">move</span>(rhs.price);</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Quote</span>() &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Quote Destructor&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">string <span class="title">isbn</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> bookNo; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">net_price</span><span class="params">(<span class="type">size_t</span> n)</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> n * price; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string bookNo;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">double</span> price = <span class="number">0.0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//CP_EX15_26_QUOTE_H</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">C++ Primer 5th Exercise Answer Source Code</span></span><br><span class="line"><span class="comment">Copyright (C) 2014-2015 https://github.com/pezy/Cpp-Primer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Disc_quote class</span></span><br><span class="line"><span class="comment"> 1. define copy-control members to do the same job as the synthesized versions.</span></span><br><span class="line"><span class="comment"> 2. Print function name to trace the running.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">If you have questions, try to connect with me: pezy&lt;urbancpz@gmail.com&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CP5_EX15_26_DISC_QUOTE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CP5_EX15_26_DISC_QUOTE_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ex15_26_Quote.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> EX26 &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bulk_quote</span> : <span class="keyword">public</span> Quote &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Bulk_quote</span>() &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Bulk_quote Constructor&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Bulk_quote</span>(<span class="type">const</span> string &amp;b, <span class="type">double</span> p, <span class="type">size_t</span> q, <span class="type">double</span> d) : <span class="built_in">Quote</span>(b, p), <span class="built_in">min_qty</span>(q), <span class="built_in">discount</span>(d) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Bulk_quote Constructor taking four paramters&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Bulk_quote</span>(<span class="type">const</span> Bulk_quote&amp; rhs) : <span class="built_in">Quote</span>(rhs), <span class="built_in">min_qty</span>(rhs.min_qty), <span class="built_in">discount</span>(rhs.discount) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Bulk_quote Copy Constructor&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Bulk_quote&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Bulk_quote&amp; rhs) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Bulk_quote Copy assignment operator&quot;</span> &lt;&lt; endl;</span><br><span class="line">        Quote::<span class="keyword">operator</span>=(rhs);</span><br><span class="line">        min_qty = rhs.min_qty;</span><br><span class="line">        discount = rhs.discount;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Bulk_quote</span>(Bulk_quote &amp;&amp;rhs) <span class="keyword">noexcept</span> : <span class="built_in">Quote</span>(rhs), <span class="built_in">min_qty</span>(std::<span class="built_in">move</span>(rhs.min_qty)),</span><br><span class="line">                                            <span class="built_in">discount</span>(std::<span class="built_in">move</span>(rhs.discount)) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Bulk_quote Move constructor&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Bulk_quote&amp; <span class="keyword">operator</span>=(Bulk_quote &amp;&amp;rhs) <span class="keyword">noexcept</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Bulk_quote Move assignment operator&quot;</span> &lt;&lt; endl;</span><br><span class="line">        Quote::<span class="keyword">operator</span>=(rhs);</span><br><span class="line">        min_qty = std::<span class="built_in">move</span>(rhs.min_qty);</span><br><span class="line">        discount = std::<span class="built_in">move</span>(rhs.discount);</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Bulk_quote</span>() &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Bulk_quote destructor&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">net_price</span><span class="params">(<span class="type">size_t</span> cnt)</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cnt &gt;= min_qty) <span class="keyword">return</span> cnt * (<span class="number">1</span> - discount) * price;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> cnt * price;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">size_t</span> min_qty = <span class="number">0</span>;</span><br><span class="line">    <span class="type">double</span> discount = <span class="number">0.0</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//CP5_EX15_26_DISC_QUOTE_H</span></span></span><br></pre></td></tr></table></figure>
<h2 id="Exercise-15-27"><a href="#Exercise-15-27" class="headerlink" title="Exercise 15.27"></a>Exercise 15.27</h2><blockquote>
<p>Redefine your <code>Bulk_quote</code> class to inherit its constructors.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">C++ Primer 5th Exercise Answer Source Code</span></span><br><span class="line"><span class="comment">Copyright (C) 2014-2015 https://github.com/pezy/Cpp-Primer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Bulk_quote</span></span><br><span class="line"><span class="comment"> inherited constructors from EX15::Disc_quote</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">If you have questions, try to connect with me: pezy&lt;urbancpz@gmail.com&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CP5_EX15_27_BULK_QUOTE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CP5_EX15_27_BULK_QUOTE_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ex15_15_Disc_quote.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">namespace</span> EX27 &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">using</span> std::string;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bulk_quote</span> : <span class="keyword">public</span> Disc_quote &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">using</span> Disc_quote::Disc_quote;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">net_price</span><span class="params">(std::<span class="type">size_t</span> cnt)</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cnt &gt;= quantity) <span class="keyword">return</span> cnt * (<span class="number">1</span> - discount) * price;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> cnt * price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CP5_EX15_27_BULK_QUOTE_H</span></span></span><br></pre></td></tr></table></figure>
<h2 id="Exercise-15-28"><a href="#Exercise-15-28" class="headerlink" title="Exercise 15.28"></a>Exercise 15.28</h2><blockquote>
<p>Define a <code>vector</code> to hold <code>Quote</code> objects but put <code>Bulk_quote</code> objects into that <code>vector</code>. Compute the total <code>net_price</code> of all the elements in the <code>vector</code>.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ex15_27_Bulk_quote.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::vector&lt;Quote&gt; vecQuote;</span><br><span class="line"></span><br><span class="line">    <span class="function">Bulk_quote <span class="title">bulk0</span><span class="params">(<span class="string">&quot;0-201-82470-1&quot;</span>, <span class="number">50</span>, <span class="number">5</span>, <span class="number">0.2</span>)</span></span>;</span><br><span class="line">    <span class="function">Bulk_quote <span class="title">bulk1</span><span class="params">(<span class="string">&quot;0-201-82470-1&quot;</span>, <span class="number">50</span>, <span class="number">3</span>, <span class="number">0.5</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// total price should be:</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;bulk_quote&#x27;s total: &quot;</span> &lt;&lt; bulk0.<span class="built_in">net_price</span>(<span class="number">5</span>) + bulk1.<span class="built_in">net_price</span>(<span class="number">5</span>) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    vecQuote.<span class="built_in">push_back</span>(bulk0);</span><br><span class="line">    vecQuote.<span class="built_in">push_back</span>(bulk1);</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> total = std::<span class="built_in">accumulate</span>(vecQuote.<span class="built_in">cbegin</span>(), vecQuote.<span class="built_in">cend</span>(),<span class="number">0.0</span>, [](<span class="type">double</span> ret, <span class="type">const</span> Quote &amp;obj)&#123;</span><br><span class="line">        <span class="keyword">return</span> ret += obj.<span class="built_in">net_price</span>(<span class="number">5</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// total price in the vector.</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;total in the vector: &quot;</span> &lt;&lt; total &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bulk_quote<span class="number">&#x27;</span>s total: <span class="number">325</span></span><br><span class="line">total in the vector: <span class="number">500</span></span><br></pre></td></tr></table></figure>
<h2 id="Exercise-15-29"><a href="#Exercise-15-29" class="headerlink" title="Exercise 15.29"></a>Exercise 15.29</h2><blockquote>
<p>Repeat your program, but this time store <code>shared_ptrs</code> to objects of type <code>Quote</code>. Explain any discrepancy in the sum generated by the this version and the previous program. If there is no discrepancy, explain why there isn’t one.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ex15_27_Bulk_quote.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::vector&lt;std::shared_ptr&lt;Quote&gt;&gt; vecQuote;</span><br><span class="line"></span><br><span class="line">    std::shared_ptr&lt;Bulk_quote&gt; spBulk0 = std::<span class="built_in">make_shared</span>&lt;Bulk_quote&gt;(<span class="string">&quot;0-201-82470-1&quot;</span>, <span class="number">50</span>, <span class="number">5</span>, <span class="number">0.2</span>);</span><br><span class="line">    std::shared_ptr&lt;Bulk_quote&gt; spBulk1 = std::<span class="built_in">make_shared</span>&lt;Bulk_quote&gt;(<span class="string">&quot;0-201-82470-1&quot;</span>, <span class="number">50</span>, <span class="number">3</span>, <span class="number">0.5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// total price should be:</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;bulk_quote&#x27;s total: &quot;</span> &lt;&lt; spBulk0-&gt;<span class="built_in">net_price</span>(<span class="number">5</span>) + spBulk1-&gt;<span class="built_in">net_price</span>(<span class="number">5</span>) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    vecQuote.<span class="built_in">push_back</span>(spBulk0);</span><br><span class="line">    vecQuote.<span class="built_in">push_back</span>(spBulk1);</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> total = std::<span class="built_in">accumulate</span>(vecQuote.<span class="built_in">cbegin</span>(), vecQuote.<span class="built_in">cend</span>(),<span class="number">0.0</span>, [](<span class="type">double</span> ret, std::shared_ptr&lt;Quote&gt; sp)&#123;</span><br><span class="line">        <span class="keyword">return</span> ret += sp-&gt;<span class="built_in">net_price</span>(<span class="number">5</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// total price in the vector.</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;total in the vector: &quot;</span> &lt;&lt; total &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bulk_quote<span class="number">&#x27;</span>s total: <span class="number">325</span></span><br><span class="line">total in the vector: <span class="number">325</span></span><br></pre></td></tr></table></figure>
<h2 id="Exercise-15-30"><a href="#Exercise-15-30" class="headerlink" title="Exercise 15.30"></a>Exercise 15.30</h2><blockquote>
<p>Write your own version of the <code>Basket</code> class and use it to compute prices for the same transactions as you used in the previous exercises.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">C++ Primer 5th Exercise Answer Source Code</span></span><br><span class="line"><span class="comment">Copyright (C) 2014-2015 https://github.com/pezy/Cpp-Primer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Basket.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">If you have questions, try to connect with me: pezy&lt;urbancpz@gmail.com&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">=================================================================================</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CP5_EX15_30_BASKET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CP5_EX15_30_BASKET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ex15_30_Quote_Bulk_quote.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> EX30 &#123;</span><br><span class="line">    <span class="keyword">using</span> std::shared_ptr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Basket</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">Basket</span>() = <span class="keyword">default</span>;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">add_item</span><span class="params">(<span class="type">const</span> Quote &amp;sale)</span> </span>&#123; items.<span class="built_in">insert</span>(<span class="built_in">shared_ptr</span>&lt;Quote&gt;(sale.<span class="built_in">clone</span>())); &#125;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">add_item</span><span class="params">(Quote &amp;&amp;sale)</span> </span>&#123; items.<span class="built_in">insert</span>(<span class="built_in">shared_ptr</span>&lt;Quote&gt;(std::<span class="built_in">move</span>(sale).<span class="built_in">clone</span>())); &#125;</span><br><span class="line">        <span class="function"><span class="keyword">inline</span> <span class="type">double</span> <span class="title">total_receipt</span><span class="params">(std::ostream&amp;)</span> <span class="type">const</span></span>;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="function"><span class="type">static</span> <span class="type">bool</span> <span class="title">compare</span><span class="params">(<span class="type">const</span> shared_ptr&lt;Quote&gt; &amp;lhs, <span class="type">const</span> shared_ptr&lt;Quote&gt; &amp;rhs)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> lhs-&gt;<span class="built_in">isbn</span>() &lt; rhs-&gt;<span class="built_in">isbn</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        std::multiset&lt;shared_ptr&lt;Quote&gt;, <span class="keyword">decltype</span>(compare)*&gt; items&#123;compare&#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">double</span> <span class="title">Basket::total_receipt</span><span class="params">(std::ostream &amp;os)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> sum = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> iter = items.<span class="built_in">cbegin</span>(); iter != items.<span class="built_in">cend</span>(); iter = items.<span class="built_in">upper_bound</span>(*iter)) &#123;</span><br><span class="line">            sum += <span class="built_in">print_total</span>(os, **iter, items.<span class="built_in">count</span>(*iter));</span><br><span class="line">        &#125;</span><br><span class="line">        os &lt;&lt; <span class="string">&quot;Total Sale: &quot;</span> &lt;&lt; sum &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//CP5_EX15_30_BASKET_H</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这段代码实现了一个名为 <code>Basket</code> 的类，用于管理销售物品。它包括以下功能：</p>
<ul>
<li><code>add_item(const Quote &amp;sale)</code>：向购物篮中添加一个销售物品，参数为 <code>Quote</code> 类型的常量引用。</li>
<li><code>add_item(Quote &amp;&amp;sale)</code>：向购物篮中添加一个销售物品，参数为 <code>Quote</code> 类型的右值引用。</li>
<li><code>total_receipt(std::ostream&amp;)</code>：计算购物篮中所有销售物品的总销售额，并打印每种物品的销售情况到给定的输出流中。</li>
</ul>
<p>购物篮内部使用了 <code>std::multiset</code> 容器来存储销售物品的指针，并且提供了一个用于比较指针的比较函数 <code>compare</code>。在 <code>total_receipt</code> 函数中，使用 <code>print_total</code> 函数计算每种物品的销售额，并将结果累加到 <code>sum</code> 中，然后打印总销售额。</p>
<p>这个类的设计允许用户添加不同类型的销售物品，并根据每种物品的销售数量计算总销售额。</p>
</blockquote>
<h2 id="Exercise-15-32"><a href="#Exercise-15-32" class="headerlink" title="Exercise 15.32"></a>Exercise 15.32</h2><blockquote>
<p>What happens when an object of type <code>Query</code> is copied, moved, assigned, and destroyed?</p>
</blockquote>
<ul>
<li><strong>copy</strong>: While being copied, the synthesized copy constructor is called. It copies the data member into the new object. Since in this case, the data member is a shared pointer, while copying, the corresponding shared pointer points to the same address and the use count from the both shared pointer becomes 2.</li>
<li><strong>move</strong>: while being moved, the synthesized move constructor is called. It moves the data member into the new object. In this case, the shared pointer from the newly created object will point to the address to which the original shared pointer pointed. After the move operation, the use count of the shared pointer in the new object is 1, whereas the pointer from the original object becomes <code>nullptr</code>.</li>
<li><strong>copy assignment</strong>: The synthesized copy assignment will be called. The outcome of this operation is identical with the copy operation.</li>
<li><strong>move assignment</strong>: The synthesized move assignment will be called. The rest is the same as the move operation.</li>
<li><strong>destroy</strong>: The synthesized destructor will be called. It will call the destructor of <code>shared_ptr</code> which decrements the use count. If the count becomes zero, the destructor from <code>shared_ptr</code> will delete the resources it point to.</li>
</ul>
<blockquote>
<p>当类型为 Query 的对象被复制、移动、赋值和销毁时会发生什么？</p>
<p>复制：在复制过程中，会调用合成的复制构造函数。它将数据成员复制到新对象中。由于在这种情况下，数据成员是一个共享指针，因此在复制时，对应的共享指针将指向相同的地址，并且两个共享指针的引用计数都变为 2。</p>
<p>移动：在移动过程中，会调用合成的移动构造函数。它将数据成员移动到新对象中。在这种情况下，新创建的对象中的共享指针将指向原始共享指针指向的地址。移动操作完成后，新对象中的共享指针的引用计数为 1，而原始对象中的指针变为 nullptr。</p>
<p>复制赋值：将调用合成的复制赋值操作符。这个操作的结果与复制操作相同。</p>
<p>移动赋值：将调用合成的移动赋值操作符。剩下的操作与移动操作相同。</p>
<p>销毁：将调用合成的析构函数。它将调用 shared_ptr 的析构函数，该析构函数会将引用计数减一。如果计数变为零，则 shared_ptr 的析构函数将删除其指向的资源。</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://www.totorocatcat.top/">Totoro</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://totorocatcat.top/2024/04/07/Object-Oriented-Programming/">http://totorocatcat.top/2024/04/07/Object-Oriented-Programming/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://totorocatcat.top" target="_blank">Totoroの旅</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%9F%BA%E7%A1%80/">基础</a></div><div class="post_share"><div class="social-share" data-image="https://npm.elemecdn.com/ushio-api-img-moe@5.0.2/img_21_2500x1084_347.97998046875_null_normal.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/04/07/%E8%93%9D%E6%A1%A5%E6%9D%AF%E3%81%AE%E6%97%85/" title="蓝桥杯の旅"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.6/img_63_2000x1052_399.999176025391_null_normal.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">蓝桥杯の旅</div></div></a></div><div class="next-post pull-right"><a href="/2024/04/06/Sequential-Containers/" title="Sequential_Containers"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.30/img_306_1920x1080_72_null_normal.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Sequential_Containers</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/10/04/2009%E5%B9%B4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%9F%E8%80%83-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%83%A8%E5%88%86/" title="2009年计算机统考-数据结构部分"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/e345af5b515d2f76bb44fdaa6eff3db4d6f598d3.jpg@1256w_908h_!web-article-pic.avif" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-04</div><div class="title">2009年计算机统考-数据结构部分</div></div></a></div><div><a href="/2024/10/04/2010%E5%B9%B4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%9F%E8%80%83-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="2010年计算机统考-数据结构"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/e345af5b515d2f76bb44fdaa6eff3db4d6f598d3.jpg@1256w_908h_!web-article-pic.avif" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-04</div><div class="title">2010年计算机统考-数据结构</div></div></a></div><div><a href="/2024/10/05/2011%E5%B9%B4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%9F%E8%80%83-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%83%A8%E5%88%86/" title="2011年计算机统考-数据结构部分"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/e345af5b515d2f76bb44fdaa6eff3db4d6f598d3.jpg@1256w_908h_!web-article-pic.avif" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-05</div><div class="title">2011年计算机统考-数据结构部分</div></div></a></div><div><a href="/2024/10/05/2012%E5%B9%B4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%9F%E8%80%83-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%83%A8%E5%88%86/" title="2012年计算机统考-数据结构部分"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/e345af5b515d2f76bb44fdaa6eff3db4d6f598d3.jpg@1256w_908h_!web-article-pic.avif" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-05</div><div class="title">2012年计算机统考-数据结构部分</div></div></a></div><div><a href="/2024/05/16/2022C-%E8%AF%95%E5%8D%B7/" title="2022C++试卷"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_80.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-16</div><div class="title">2022C++试卷</div></div></a></div><div><a href="/2024/05/16/2022%E5%B9%B4C-%E8%AF%95%E5%8D%B7%E8%BD%AF%E4%BB%B6%E5%AD%A6%E9%99%A2/" title="2022年C++试卷软件学院"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_80.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-16</div><div class="title">2022年C++试卷软件学院</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/px3.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Totoro</div><div class="author-info__description">热爱文学的SCUT软件学院学生</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">782</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">32</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/4512abc"><i class="fab fa-github"></i><span>🛴前往小窝......</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/4512abc" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:4512abc@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到龙猫の小窝</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Chapter-15-Object-Oriented-Programming"><span class="toc-number">1.</span> <span class="toc-text">Chapter 15. Object-Oriented Programming</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-1"><span class="toc-number">1.1.</span> <span class="toc-text">Exercise 15.1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-2"><span class="toc-number">1.2.</span> <span class="toc-text">Exercise 15.2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-3"><span class="toc-number">1.3.</span> <span class="toc-text">Exercise 15.3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-4"><span class="toc-number">1.4.</span> <span class="toc-text">Exercise 15.4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-5"><span class="toc-number">1.5.</span> <span class="toc-text">Exercise 15.5</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-7"><span class="toc-number">1.6.</span> <span class="toc-text">Exercise 15.7</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-8"><span class="toc-number">1.7.</span> <span class="toc-text">Exercise 15.8</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-9"><span class="toc-number">1.8.</span> <span class="toc-text">Exercise 15.9</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-10"><span class="toc-number">1.9.</span> <span class="toc-text">Exercise 15.10</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-12"><span class="toc-number">1.10.</span> <span class="toc-text">Exercise 15.12</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-13"><span class="toc-number">1.11.</span> <span class="toc-text">Exercise 15.13</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-14"><span class="toc-number">1.12.</span> <span class="toc-text">Exercise 15.14</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-15"><span class="toc-number">1.13.</span> <span class="toc-text">Exercise 15.15</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-16"><span class="toc-number">1.14.</span> <span class="toc-text">Exercise 15.16</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-17"><span class="toc-number">1.15.</span> <span class="toc-text">Exercise 15.17</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-21"><span class="toc-number">1.16.</span> <span class="toc-text">Exercise 15.21</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-24"><span class="toc-number">1.17.</span> <span class="toc-text">Exercise 15.24</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-25"><span class="toc-number">1.18.</span> <span class="toc-text">Exercise 15.25</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-26"><span class="toc-number">1.19.</span> <span class="toc-text">Exercise 15.26</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-27"><span class="toc-number">1.20.</span> <span class="toc-text">Exercise 15.27</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-28"><span class="toc-number">1.21.</span> <span class="toc-text">Exercise 15.28</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-29"><span class="toc-number">1.22.</span> <span class="toc-text">Exercise 15.29</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-30"><span class="toc-number">1.23.</span> <span class="toc-text">Exercise 15.30</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exercise-15-32"><span class="toc-number">1.24.</span> <span class="toc-text">Exercise 15.32</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/12/04/Java-Exam/" title="Java-Exam"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/0451e0c37d72259ec83c6c743dcd6c6.bmp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java-Exam"/></a><div class="content"><a class="title" href="/2024/12/04/Java-Exam/" title="Java-Exam">Java-Exam</a><time datetime="2024-12-04T08:57:33.000Z" title="发表于 2024-12-04 16:57:33">2024-12-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/04/Java-ch15/" title="Java-Chapter 15 Event-driven Programming"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/348ce1c18a787da464b60e8035b638e.bmp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java-Chapter 15 Event-driven Programming"/></a><div class="content"><a class="title" href="/2024/12/04/Java-ch15/" title="Java-Chapter 15 Event-driven Programming">Java-Chapter 15 Event-driven Programming</a><time datetime="2024-12-04T08:42:40.000Z" title="发表于 2024-12-04 16:42:40">2024-12-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/04/Java-ch14/" title="Java-Chapter 14 Java FX Basics"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/e8e708505ec3a3d7fab068b000a072c.bmp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java-Chapter 14 Java FX Basics"/></a><div class="content"><a class="title" href="/2024/12/04/Java-ch14/" title="Java-Chapter 14 Java FX Basics">Java-Chapter 14 Java FX Basics</a><time datetime="2024-12-04T08:33:28.000Z" title="发表于 2024-12-04 16:33:28">2024-12-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/04/Java-ch13/" title="Java-Chapter 13 Abstract Classes and Interfaces"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/aea25595aa26b515e265b91a8abeee4.bmp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java-Chapter 13 Abstract Classes and Interfaces"/></a><div class="content"><a class="title" href="/2024/12/04/Java-ch13/" title="Java-Chapter 13 Abstract Classes and Interfaces">Java-Chapter 13 Abstract Classes and Interfaces</a><time datetime="2024-12-04T08:28:21.000Z" title="发表于 2024-12-04 16:28:21">2024-12-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/04/Java-ch12/" title="Java-Chapter 12 Exception Handling and Text IO"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/77c3bd1b086a51dcbe3e329a9f6b373.bmp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java-Chapter 12 Exception Handling and Text IO"/></a><div class="content"><a class="title" href="/2024/12/04/Java-ch12/" title="Java-Chapter 12 Exception Handling and Text IO">Java-Chapter 12 Exception Handling and Text IO</a><time datetime="2024-12-04T08:20:02.000Z" title="发表于 2024-12-04 16:20:02">2024-12-04</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 By Totoro</div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.<p><a target="_blank" href="https://hexo.io/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a>&nbsp;<a target="_blank" href="https://butterfly.js.org/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a>&nbsp;<a target="_blank" href="https://www.jsdelivr.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a> &nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&logo=Vercel" title="本站采用双线部署，默认线路托管于Vercel"></a>&nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&logo=Codio" title="本站采用双线部署，联通线路托管于Coding"></a>&nbsp;<a target="_blank" href="https://github.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Gtihub托管"></a>&nbsp;<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.12.0"></script><script src="/js/main.js?v=4.12.0"></script><script src="/js/tw_cn.js?v=4.12.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'HT1PalaKkPaG1UqAXBhJXIu8-gzGzoHsz',
      appKey: 'iT0TnVVAwf9zuZ7NqwclQItY',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.jsdelivr.net/npm/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script></div><script defer src="/js/light.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script async src="/js/title.js"></script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="1" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="只此无为身，且前行,忘记过去的人注定重蹈覆辙,我是我，我靠自己站立，我会做好自身,如果我睡大觉，谁给我摘月亮呢,假期和朋友，是人生中顶好的两样东西啊。,去爱，去失去，要不负相遇,没什么想不想通的，只是固执而已,我们深爱星辰，乃至不惧夜的黑,吃，喝，享受幸福，接受奇迹,浊水若长流，自清澄,雅俗共赏,总会有什么也不想的幸福时刻吧,时间顺流而下，生活逆流而上,悟已往之不谏，知来者之可追,希望你的小世界里,山花烂漫,茶酒俱全,安宁清淡,明朗欢愉" data-fontsize="20px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.12.0"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 380px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 320px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_12.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/CS70の旅/&quot;);" href="javascript:void(0);">CS70の旅</a><span class="categoryBar-list-count">25</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_13.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/CS61B/&quot;);" href="javascript:void(0);">CS61B</a><span class="categoryBar-list-count">76</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_14.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/期末の旅/&quot;);" href="javascript:void(0);">期末の旅</a><span class="categoryBar-list-count">97</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_17.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/ACMの旅/&quot;);" href="javascript:void(0);">ACMの旅</a><span class="categoryBar-list-count">68</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_18.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/区域赛の旅/&quot;);" href="javascript:void(0);">区域赛の旅</a><span class="categoryBar-list-count">7</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_19.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/数学建模/&quot;);" href="javascript:void(0);">数学建模</a><span class="categoryBar-list-count">31</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_20.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Codeforcesの旅/&quot;);" href="javascript:void(0);">Codeforcesの旅</a><span class="categoryBar-list-count">24</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_21.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/刷题计划/&quot;);" href="javascript:void(0);">刷题计划</a><span class="categoryBar-list-count">40</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_22.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/牛客の旅/&quot;);" href="javascript:void(0);">牛客の旅</a><span class="categoryBar-list-count">65</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_22.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/前端の旅/&quot;);" href="javascript:void(0);">前端の旅</a><span class="categoryBar-list-count">17</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_23.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/数据结构/&quot;);" href="javascript:void(0);">数据结构</a><span class="categoryBar-list-count">47</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_24.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Atcoderの旅/&quot;);" href="javascript:void(0);">Atcoderの旅</a><span class="categoryBar-list-count">53</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_25.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/C-の旅/&quot;);" href="javascript:void(0);">C++の旅</a><span class="categoryBar-list-count">17</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_26.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/CSAPPの旅/&quot;);" href="javascript:void(0);">CSAPPの旅</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_27.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/CS知识/&quot;);" href="javascript:void(0);">CS知识</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_28.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/编程基础/&quot;);" href="javascript:void(0);">编程基础</a><span class="categoryBar-list-count">22</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_29.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/离散数学/&quot;);" href="javascript:void(0);">离散数学</a><span class="categoryBar-list-count">29</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_30.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/JAVAの旅/&quot;);" href="javascript:void(0);">JAVAの旅</a><span class="categoryBar-list-count">10</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_31.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/MIT-6-031-Software-Construction/&quot;);" href="javascript:void(0);">MIT 6.031:Software Construction</a><span class="categoryBar-list-count">16</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_32.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/CS-110L/&quot;);" href="javascript:void(0);">CS 110L</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_33.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/灵魂の旅/&quot;);" href="javascript:void(0);">灵魂の旅</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_34.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/个人安排/&quot;);" href="javascript:void(0);">个人安排</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_35.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/杂项/&quot;);" href="javascript:void(0);">杂项</a><span class="categoryBar-list-count">12</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_36.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/计算机组成原理/&quot;);" href="javascript:void(0);">计算机组成原理</a><span class="categoryBar-list-count">30</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_37.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/文学/&quot;);" href="javascript:void(0);">文学</a><span class="categoryBar-list-count">49</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_38.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/力扣の旅/&quot;);" href="javascript:void(0);">力扣の旅</a><span class="categoryBar-list-count">20</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_39.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/千里十二行/&quot;);" href="javascript:void(0);">千里十二行</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_40.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/🗡指offer/&quot;);" href="javascript:void(0);">🗡指offer</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_41.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/少年游/&quot;);" href="javascript:void(0);">少年游</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_42.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/算法提高课/&quot;);" href="javascript:void(0);">算法提高课</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_43.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/汇编の旅/&quot;);" href="javascript:void(0);">汇编の旅</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_44.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/C-实训/&quot;);" href="javascript:void(0);">C++实训</a><span class="categoryBar-list-count">8</span><span class="categoryBar-list-descr"></span></li></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/10/01/诗录/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/4b31456c6f0f4489f99177f89e936de7286431045.png@1256w_708h_!web-article-pic.avif" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-10-01</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/10/01/诗录/&quot;);" href="javascript:void(0);" alt="">诗录</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/10/01/诗录/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/01/29/诗兴大发/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_69.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-01-29</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/01/29/诗兴大发/&quot;);" href="javascript:void(0);" alt="">诗兴大发</a><div class="blog-slider__text">未觉，却是中二少年的诗仙梦</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/01/29/诗兴大发/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/10/05/TotoroのPlan/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/4512abc/Pictures@main/Pictures/51d37eba99d243607ddedfff6e91568f617436609.jpg@1256w_1884h_!web-article-pic.avif" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-10-05</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/10/05/TotoroのPlan/&quot;);" href="javascript:void(0);" alt="">TotoroのPlan</a><div class="blog-slider__text">方便大二看（）</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/10/05/TotoroのPlan/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/03/03/Markdown格式/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.48/img_482_1920x1080_96_null_normal.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-03-03</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/03/03/Markdown格式/&quot;);" href="javascript:void(0);" alt="">Markdown格式</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/03/03/Markdown格式/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>