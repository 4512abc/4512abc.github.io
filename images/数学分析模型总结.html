<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Totoroの旅 | Totoroの旅</title><meta name="author" content="Totoro"><meta name="copyright" content="Totoro"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数学分析模型总结层次分析法1.建立层次结构模型将决策的目标、考虑的因素（决策准则）和决策对象按照他们之间的相互关系分为最高层、中间层和最低层，绘出层次结构图。最高层： 决策的目的、要解决的问题。最低层： 决策时的备选方案。中间层： 考虑的因素、决策的准则。对相邻的两层，称高层为目标层，低层为因素层。层次分析法所要解决的问题是关于最低层对最高层的相对权重的问题，按此相对权重可以对最低层中的各种方案、">
<meta property="og:type" content="website">
<meta property="og:title" content="Totoroの旅">
<meta property="og:url" content="http://totorocatcat.top/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.html">
<meta property="og:site_name" content="Totoroの旅">
<meta property="og:description" content="数学分析模型总结层次分析法1.建立层次结构模型将决策的目标、考虑的因素（决策准则）和决策对象按照他们之间的相互关系分为最高层、中间层和最低层，绘出层次结构图。最高层： 决策的目的、要解决的问题。最低层： 决策时的备选方案。中间层： 考虑的因素、决策的准则。对相邻的两层，称高层为目标层，低层为因素层。层次分析法所要解决的问题是关于最低层对最高层的相对权重的问题，按此相对权重可以对最低层中的各种方案、">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://source.fomal.cc/img/default_cover_12.webp">
<meta property="article:published_time" content="2024-01-30T03:47:35.288Z">
<meta property="article:modified_time" content="2024-01-30T03:47:35.282Z">
<meta property="article:author" content="Totoro">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://source.fomal.cc/img/default_cover_12.webp"><link rel="shortcut icon" href="https://source.fomal.cc/img/default_cover_227.webp"><link rel="canonical" href="http://totorocatcat.top/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css?v=4.12.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Totoroの旅',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-01-30 11:47:35'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/scrollbar.css"><link rel="stylesheet" href="/css/cat.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/px3.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">340</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 趣味</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Totoroの旅"><span class="site-name">Totoroの旅</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 趣味</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">Totoroの旅</h1></div></header><main class="layout" id="content-inner"><div id="page"><div id="article-container"><h1 id="数学分析模型总结"><a href="#数学分析模型总结" class="headerlink" title="数学分析模型总结"></a>数学分析模型总结</h1><h2 id="层次分析法"><a href="#层次分析法" class="headerlink" title="层次分析法"></a>层次分析法</h2><h3 id="1-建立层次结构模型"><a href="#1-建立层次结构模型" class="headerlink" title="1.建立层次结构模型"></a>1.建立层次结构模型</h3><p>将决策的目标、考虑的因素（决策准则）和决策对象按照他们之间的相互关系分为最高层、中间层和最低层，绘出层次结构图。<br>最高层： 决策的目的、要解决的问题。<br>最低层： 决策时的备选方案。<br>中间层： 考虑的因素、决策的准则。<br>对相邻的两层，称高层为目标层，低层为因素层。<br>层次分析法所要解决的问题是关于最低层对最高层的相对权重的问题，按此相对权重可以对最低层中的各种方案、措施进行排序，从而在不同的方案中做出选择或形成选择方案的原则。</p>
<p><strong>2.构造判断矩阵</strong><br>层次分析法中构造判断矩阵的方法是一致矩阵法，即：不把所有因素放在一起比较，而是两两相互比较；对此时采用相对尺度，以尽可能减少性质不同因素相互比较的困难，以提高准确度。</p>
<p>3.层次单排序及其一致性检验<br>对应于判断矩阵最大特征根λ m a x的特征向量，经归一化（使向量中各元素之和为1）后记为W。W的元素为同一层次元素对于上一层因素某因素相对重要性的排序权值，这一过程称为层次单排序。</p>
<p><strong>4.层次总排序及其一致性检验</strong></p>
<ul>
<li>计算某一层次所有因素对于最高层（总目标）相对重要性的权值，称为层次总排序。</li>
<li>这一过程是从最高层次到最低层次依次进行的。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130105508933.png" alt="image-20240130105508933"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130105522533.png" alt="image-20240130105522533"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130105530952.png" alt="image-20240130105530952"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130105602627.png" alt="image-20240130105602627"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130105612247.png" alt="image-20240130105612247"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130105622706.png" alt="image-20240130105622706"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130105634826.png" alt="image-20240130105634826"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130105642063.png" alt="image-20240130105642063"></p>
<h2 id="多属性决策模型"><a href="#多属性决策模型" class="headerlink" title="多属性决策模型"></a>多属性决策模型</h2><h3 id="加权平均"><a href="#加权平均" class="headerlink" title="加权平均"></a>加权平均</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130110100685.png" alt="image-20240130110100685"></p>
<h3 id="正向化标准化（内容不贴了）"><a href="#正向化标准化（内容不贴了）" class="headerlink" title="正向化标准化（内容不贴了）"></a>正向化标准化（内容不贴了）</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130110331660.png" alt="image-20240130110331660"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130110339299.png" alt="image-20240130110339299"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130110351212.png" alt="image-20240130110351212"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130110356088.png" alt="image-20240130110356088"></p>
<h2 id="灰色预测"><a href="#灰色预测" class="headerlink" title="灰色预测"></a>灰色预测</h2><blockquote>
<p>美赛不推荐使用，评委不知道这个算法</p>
</blockquote>
<h2 id="最短路径算法"><a href="#最短路径算法" class="headerlink" title="最短路径算法"></a>最短路径算法</h2><h3 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130110629888.png" alt="image-20240130110629888"></p>
<p>每次从 「未求出最短路径的点」中 <strong>取出</strong> 距离距离起点 <strong>最小路径的点</strong>，以这个点为桥梁 <strong>刷新</strong>「未求出最短路径的点」的距<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130110726035.png" alt="image-20240130110726035"></p>
<h2 id="代码实例"><a href="#代码实例" class="headerlink" title="代码实例"></a>代码实例</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PII pair<span class="string">&lt;int ,int&gt;</span></span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF=<span class="number">1e10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1000010</span>;</span><br><span class="line"><span class="type">int</span> n,m,s;</span><br><span class="line"><span class="type">int</span> dis[N];</span><br><span class="line"><span class="type">int</span> vis[N];</span><br><span class="line">vector&lt;PII&gt;E[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dj</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		dis[i]=INF;</span><br><span class="line">		vis[i]=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	dis[s]=<span class="number">0</span>;</span><br><span class="line">	priority_queue&lt;PII,vector&lt;PII&gt;,greater&lt;PII&gt; &gt;q;</span><br><span class="line">	q.<span class="built_in">push</span>(&#123;<span class="number">0</span>,s&#125;);</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> t=q.<span class="built_in">top</span>().second;</span><br><span class="line">	q.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">if</span>(vis[t])&#123;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		vis[t]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,l=E[t].<span class="built_in">size</span>();i&lt;l;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> v=E[t][i].first;</span><br><span class="line">		<span class="type">int</span> w=E[t][i].second;</span><br><span class="line">	</span><br><span class="line">		<span class="keyword">if</span>(dis[v]&gt;dis[t]+w)</span><br><span class="line">		&#123;		</span><br><span class="line">			dis[v]=dis[t]+w;</span><br><span class="line">			q.<span class="built_in">push</span>(&#123;dis[v],v&#125;);		</span><br><span class="line">		&#125;	</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	 ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);cin.<span class="built_in">tie</span>(<span class="number">0</span>);cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m&gt;&gt;s;</span><br><span class="line"><span class="type">int</span> u,v,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">	cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">	E[u].<span class="built_in">push_back</span>(&#123;v,w&#125;);</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="built_in">dj</span>(s);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;dis[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% Matlab作无向图</span></span><br><span class="line"><span class="comment">% （1）无权重（每条边的权重默认为1）</span></span><br><span class="line"><span class="comment">% 函数graph(s,t)：可在 s 和 t 中的对应节点之间创建边，并生成一个图</span></span><br><span class="line"><span class="comment">% s 和 t 都必须具有相同的元素数；这些节点必须都是从1开始的正整数，或都是字符串元胞数组。</span></span><br><span class="line">s1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">t1 = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>];</span><br><span class="line">G1 = graph(s1, t1);</span><br><span class="line"><span class="built_in">plot</span>(G1)</span><br><span class="line"><span class="comment">% 注意哦，编号最好是从1开始连续编号，不要自己随便定义编号</span></span><br><span class="line">s1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">t1 = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>];</span><br><span class="line">G1 = graph(s1, t1);</span><br><span class="line"><span class="built_in">plot</span>(G1)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 注意字符串元胞数组是用大括号包起来的哦</span></span><br><span class="line">s2 = &#123;<span class="string">&#x27;学校&#x27;</span>,<span class="string">&#x27;电影院&#x27;</span>,<span class="string">&#x27;网吧&#x27;</span>,<span class="string">&#x27;酒店&#x27;</span>&#125;;</span><br><span class="line">t2 = &#123;<span class="string">&#x27;电影院&#x27;</span>,<span class="string">&#x27;酒店&#x27;</span>,<span class="string">&#x27;酒店&#x27;</span>,<span class="string">&#x27;KTV&#x27;</span>&#125;;</span><br><span class="line">G2 = graph(s2, t2);</span><br><span class="line"><span class="built_in">plot</span>(G2, <span class="string">&#x27;linewidth&#x27;</span>, <span class="number">2</span>)  <span class="comment">% 设置线的宽度</span></span><br><span class="line"><span class="comment">% 下面的命令是在画图后不显示坐标</span></span><br><span class="line">set( gca, <span class="string">&#x27;XTick&#x27;</span>, [], <span class="string">&#x27;YTick&#x27;</span>, [] );  </span><br><span class="line"></span><br><span class="line"><span class="comment">% （2）有权重</span></span><br><span class="line"><span class="comment">% 函数graph(s,t,w)：可在 s 和 t 中的对应节点之间以w的权重创建边，并生成一个图</span></span><br><span class="line">s = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">t = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>];</span><br><span class="line">w = [<span class="number">3</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">2</span>];</span><br><span class="line">G = graph(s, t, w);</span><br><span class="line"><span class="built_in">plot</span>(G, <span class="string">&#x27;EdgeLabel&#x27;</span>, G.Edges.Weight, <span class="string">&#x27;linewidth&#x27;</span>, <span class="number">2</span>) </span><br><span class="line">set( gca, <span class="string">&#x27;XTick&#x27;</span>, [], <span class="string">&#x27;YTick&#x27;</span>, [] );  </span><br><span class="line"></span><br><span class="line"><span class="comment">%% Matlab作有向图</span></span><br><span class="line"><span class="comment">% 无权图 digraph(s,t)</span></span><br><span class="line">s = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>];</span><br><span class="line">t = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">4</span>];</span><br><span class="line">G = digraph(s, t);</span><br><span class="line"><span class="built_in">plot</span>(G)</span><br><span class="line">set( gca, <span class="string">&#x27;XTick&#x27;</span>, [], <span class="string">&#x27;YTick&#x27;</span>, [] );  </span><br><span class="line"></span><br><span class="line"><span class="comment">% 有权图 digraph(s,t,w)</span></span><br><span class="line">s = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">t = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>];</span><br><span class="line">w = [<span class="number">3</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">2</span>];</span><br><span class="line">G = digraph(s, t, w);</span><br><span class="line"><span class="built_in">plot</span>(G, <span class="string">&#x27;EdgeLabel&#x27;</span>, G.Edges.Weight, <span class="string">&#x27;linewidth&#x27;</span>, <span class="number">2</span>) </span><br><span class="line">set( gca, <span class="string">&#x27;XTick&#x27;</span>, [], <span class="string">&#x27;YTick&#x27;</span>, [] );  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% 注意：以下代码需要较新版本的matlab才能运行（最好是2016版本及以上哦）</span></span><br><span class="line"><span class="comment">% 如果运行出错请下载新版的matlab代码再运行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 注意哦，Matlab中的图节点要从1开始编号，所以这里把0全部改为了9</span></span><br><span class="line"><span class="comment">% 编号最好是从1开始连续编号，不要自己随便定义编号</span></span><br><span class="line">s = [<span class="number">9</span> <span class="number">9</span> <span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">7</span> <span class="number">7</span> <span class="number">6</span> <span class="number">6</span>  <span class="number">5</span>  <span class="number">5</span> <span class="number">4</span>];</span><br><span class="line">t = [<span class="number">1</span> <span class="number">7</span> <span class="number">7</span> <span class="number">2</span> <span class="number">8</span> <span class="number">3</span> <span class="number">5</span> <span class="number">8</span> <span class="number">6</span> <span class="number">8</span> <span class="number">5</span>  <span class="number">3</span>  <span class="number">4</span> <span class="number">3</span>];</span><br><span class="line">w = [<span class="number">4</span> <span class="number">8</span> <span class="number">3</span> <span class="number">8</span> <span class="number">2</span> <span class="number">7</span> <span class="number">4</span> <span class="number">1</span> <span class="number">6</span> <span class="number">6</span> <span class="number">2</span> <span class="number">14</span> <span class="number">10</span> <span class="number">9</span>];</span><br><span class="line">G = graph(s,t,w);</span><br><span class="line"><span class="built_in">plot</span>(G, <span class="string">&#x27;EdgeLabel&#x27;</span>, G.Edges.Weight, <span class="string">&#x27;linewidth&#x27;</span>, <span class="number">2</span>) </span><br><span class="line">set( gca, <span class="string">&#x27;XTick&#x27;</span>, [], <span class="string">&#x27;YTick&#x27;</span>, [] );  </span><br><span class="line">[P,d] = shortestpath(G, <span class="number">9</span>, <span class="number">4</span>)  <span class="comment">%注意：该函数matlab2015b之后才有哦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 在图中高亮我们的最短路径</span></span><br><span class="line">myplot = <span class="built_in">plot</span>(G, <span class="string">&#x27;EdgeLabel&#x27;</span>, G.Edges.Weight, <span class="string">&#x27;linewidth&#x27;</span>, <span class="number">2</span>);  <span class="comment">%首先将图赋给一个变量</span></span><br><span class="line">highlight(myplot, P, <span class="string">&#x27;EdgeColor&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)   <span class="comment">%对这个变量即我们刚刚绘制的图形进行高亮处理（给边加上r红色）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 求出任意两点的最短路径矩阵</span></span><br><span class="line">D = distances(G)   <span class="comment">%注意：该函数matlab2015b之后才有哦</span></span><br><span class="line">D(<span class="number">1</span>,<span class="number">2</span>)  <span class="comment">% 1 -&gt; 2的最短路径</span></span><br><span class="line">D(<span class="number">9</span>,<span class="number">4</span>)  <span class="comment">% 9 -&gt; 4的最短路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 找出给定范围内的所有点  nearest(G,s,d)</span></span><br><span class="line"><span class="comment">% 返回图形 G 中与节点 s 的距离在 d 之内的所有节点</span></span><br><span class="line">[nodeIDs,dist] = nearest(G, <span class="number">2</span>, <span class="number">10</span>)   <span class="comment">%注意：该函数matlab2016a之后才有哦</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130111841434.png" alt="image-20240130111841434"></p>
<p>Floyd算法代码：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[dist,path]</span> = <span class="title">Floyd_algorithm</span><span class="params">(D)</span></span></span><br><span class="line"><span class="comment">%% 该函数用于求解一个权重邻接矩阵任意两个节点之间的最短路径</span></span><br><span class="line"><span class="comment">% 输入：</span></span><br><span class="line"><span class="comment">%        D是权重邻接矩阵</span></span><br><span class="line"><span class="comment">% 输出：</span></span><br><span class="line"><span class="comment">%        dist是最短距离矩阵，其元素dist_ij表示表示i,j两个节点的最短距离</span></span><br><span class="line"><span class="comment">%        path是路径矩阵，其元素path_ij表示起点为i，终点为j的两个节点之间的最短路径要经过的节点</span></span><br><span class="line"></span><br><span class="line">n = <span class="built_in">size</span>(D,<span class="number">1</span>);  <span class="comment">% 计算节点的个数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 初始化dist矩阵</span></span><br><span class="line">dist = D;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 下面我们来初始化path矩阵</span></span><br><span class="line">path = <span class="built_in">zeros</span>(n);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:n</span><br><span class="line">    path(:,<span class="built_in">j</span>) = <span class="built_in">j</span>;   <span class="comment">% 将第j列的元素变为j</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n</span><br><span class="line">    path(<span class="built_in">i</span>,<span class="built_in">i</span>) = <span class="number">-1</span>;  <span class="comment">% 将主对角线元素变为-1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 下面开始三个循环</span></span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:n    <span class="comment">% 中间节点k从1- n 循环</span></span><br><span class="line">   <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:n     <span class="comment">% 起始节点i从1- n 循环</span></span><br><span class="line">      <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:n    <span class="comment">% 终点节点j从1-n 循环</span></span><br><span class="line">          <span class="keyword">if</span> dist(<span class="built_in">i</span>,<span class="built_in">j</span>)&gt;dist(<span class="built_in">i</span>,k)+dist(k,<span class="built_in">j</span>)  <span class="comment">% 如果i,j两个节点间的最短距离大于i和k的最短距离+k和j的最短距离</span></span><br><span class="line">             dist(<span class="built_in">i</span>,<span class="built_in">j</span>)=dist(<span class="built_in">i</span>,k)+dist(k,<span class="built_in">j</span>);  <span class="comment">% 那么我们就令这两个较短的距离之和取代i,j两点之间的最短距离</span></span><br><span class="line">             path(<span class="built_in">i</span>,<span class="built_in">j</span>)=path(<span class="built_in">i</span>,k);   <span class="comment">% 起点为i，终点为j的两个节点之间的最短路径要经过的节点更新为path(i,k)</span></span><br><span class="line">             <span class="comment">% 注意，上面一行语句不能写成path(i,j) = k; 这是网上很多地方都容易犯的错误，在PPT11页中会告诉大家为什么不能这么写</span></span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>例子</p>
<h3 id="有向图"><a href="#有向图" class="headerlink" title="有向图"></a>有向图</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% PPT第七页的例子</span></span><br><span class="line"><span class="comment">%% 首先将图转换为权重邻接矩阵D</span></span><br><span class="line">n = <span class="number">5</span>;  <span class="comment">%一共五个节点</span></span><br><span class="line">D = <span class="built_in">ones</span>(n) ./ <span class="built_in">zeros</span>(n);  <span class="comment">% 全部元素初始化为Inf</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n</span><br><span class="line">    D(<span class="built_in">i</span>,<span class="built_in">i</span>) = <span class="number">0</span>;  <span class="comment">% 主对角线元素为0</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">D(<span class="number">1</span>,<span class="number">2</span>) = <span class="number">3</span>;</span><br><span class="line">D(<span class="number">1</span>,<span class="number">3</span>) = <span class="number">8</span>;</span><br><span class="line">D(<span class="number">1</span>,<span class="number">5</span>) = <span class="number">-4</span>;</span><br><span class="line">D(<span class="number">2</span>,<span class="number">5</span>) = <span class="number">7</span>;</span><br><span class="line">D(<span class="number">2</span>,<span class="number">4</span>) = <span class="number">1</span>;</span><br><span class="line">D(<span class="number">3</span>,<span class="number">2</span>) = <span class="number">4</span>;</span><br><span class="line">D(<span class="number">4</span>,<span class="number">3</span>) = <span class="number">-5</span>;</span><br><span class="line">D(<span class="number">5</span>,<span class="number">4</span>) = <span class="number">6</span>;</span><br><span class="line">D(<span class="number">4</span>,<span class="number">1</span>) = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 调用Floyd_algorithm函数求解</span></span><br><span class="line">[dist,path] = Floyd_algorithm(D)</span><br><span class="line"></span><br><span class="line">print_path(path,dist,<span class="number">1</span>,<span class="number">5</span>)</span><br><span class="line">print_path(path,dist,<span class="number">1</span>,<span class="number">4</span>)</span><br><span class="line">print_path(path,dist,<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">clc</span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;下面我们打印任意两点之间的最短距离：&#x27;</span>)</span><br><span class="line">print_all_path(D)</span><br></pre></td></tr></table></figure>
<h3 id="无向图"><a href="#无向图" class="headerlink" title="无向图"></a>无向图</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 思考题的参考答案</span></span><br><span class="line"><span class="comment">%% 首先将图转换为权重邻接矩阵D</span></span><br><span class="line">n = <span class="number">9</span>;  <span class="comment">%一共九个节点</span></span><br><span class="line">D = <span class="built_in">zeros</span>(n);  <span class="comment">% 全部元素初始化为0, 等会你们就知道为什么这样设置啦</span></span><br><span class="line"><span class="comment">% 因为是无向图，所以权重邻接矩阵是一个对称矩阵</span></span><br><span class="line">D(<span class="number">1</span>,<span class="number">2</span>) = <span class="number">4</span>; D(<span class="number">1</span>,<span class="number">8</span>) = <span class="number">8</span>; </span><br><span class="line">D(<span class="number">2</span>,<span class="number">8</span>) = <span class="number">3</span>; D(<span class="number">2</span>,<span class="number">3</span>) = <span class="number">8</span>;</span><br><span class="line">D(<span class="number">8</span>,<span class="number">9</span>) = <span class="number">1</span>; D(<span class="number">8</span>,<span class="number">7</span>) = <span class="number">6</span>; </span><br><span class="line">D(<span class="number">9</span>,<span class="number">7</span>) = <span class="number">6</span>; D(<span class="number">9</span>,<span class="number">3</span>) = <span class="number">2</span>;</span><br><span class="line">D(<span class="number">7</span>,<span class="number">6</span>) = <span class="number">2</span>; D(<span class="number">3</span>,<span class="number">4</span>) = <span class="number">7</span>; </span><br><span class="line">D(<span class="number">3</span>,<span class="number">6</span>) = <span class="number">4</span>; D(<span class="number">6</span>,<span class="number">4</span>) = <span class="number">14</span>;</span><br><span class="line">D(<span class="number">4</span>,<span class="number">5</span>) = <span class="number">9</span>; D(<span class="number">6</span>,<span class="number">5</span>) = <span class="number">10</span>;</span><br><span class="line">D = D+D&#x27;;   <span class="comment">% 这个操作可以得到对称矩阵的另一半</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:n</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">i</span> ~= <span class="built_in">j</span>) &amp;&amp; (D(<span class="built_in">i</span>,<span class="built_in">j</span>) == <span class="number">0</span>)  </span><br><span class="line">            D(<span class="built_in">i</span>,<span class="built_in">j</span>) = Inf;   <span class="comment">% 将非主对角线上的0元素全部变为Inf</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 调用Floyd_algorithm函数求解</span></span><br><span class="line">[dist,path] = Floyd_algorithm(D)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="打印"><a href="#打印" class="headerlink" title="打印"></a>打印</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">function [] = <span class="built_in">print_all_path</span>(D)</span><br><span class="line">%% 该函数的作用是求解一个权重邻接矩阵任意两个节点之间的最短路径,并打印所有的结果出来</span><br><span class="line">% 输入：</span><br><span class="line">%        D是权重邻接矩阵</span><br><span class="line">% 输出：无</span><br><span class="line"></span><br><span class="line">[dist,path] = <span class="built_in">Floyd_algorithm</span>(D);   % 调用之前的Floyd_algorithm函数</span><br><span class="line">n = <span class="built_in">size</span>(D,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span> n == <span class="number">1</span></span><br><span class="line">    <span class="built_in">warning</span>(<span class="string">&#x27;请输入至少两阶以上的权重邻接矩阵&#x27;</span>)   % 在屏幕中提示警告信息</span><br><span class="line">    <span class="keyword">return</span>;   % 不运行下面的语句，直接退出函数</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>:n</span><br><span class="line">    <span class="keyword">for</span> j = <span class="number">1</span>:n</span><br><span class="line">        <span class="keyword">if</span> i ~= j  % 不等号用~=表示</span><br><span class="line">            <span class="built_in">print_path</span>(path,dist,i,j);   % 调用之前的print_path函数</span><br><span class="line">            <span class="built_in">disp</span>(<span class="string">&#x27;-------------------------------------------&#x27;</span>)</span><br><span class="line">            <span class="built_in">disp</span>(<span class="string">&#x27;  &#x27;</span>)</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[]</span> = <span class="title">print_path</span><span class="params">(path,dist,i,j)</span></span></span><br><span class="line"><span class="comment">%% 该函数的作用是打印从i到j经过的最短路径</span></span><br><span class="line"><span class="comment">% 输入：</span></span><br><span class="line"><span class="comment">%        path是使用floyd算法求出来的路径矩阵</span></span><br><span class="line"><span class="comment">%        dist是使用floyd算法求出来的最短距离矩阵</span></span><br><span class="line"><span class="comment">%        i是起始节点的编号</span></span><br><span class="line"><span class="comment">%        j是终点节点的编号</span></span><br><span class="line"><span class="comment">% 输出：无</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">i</span> == <span class="built_in">j</span></span><br><span class="line">    warning(<span class="string">&#x27;起点和终点相同，请检查后重新输入&#x27;</span>)  <span class="comment">% 在屏幕中提示警告信息</span></span><br><span class="line">    <span class="keyword">return</span>;  <span class="comment">% 不运行下面的语句，直接退出函数</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">if</span> path(<span class="built_in">i</span>,<span class="built_in">j</span>) == <span class="built_in">j</span>   <span class="comment">% 如果path(i,j) = j，则有两种可能：</span></span><br><span class="line"><span class="comment">% （1）如果dist(i,j) 为 Inf , 则说明从i到j没有路径可以到达</span></span><br><span class="line">    <span class="keyword">if</span> dist(<span class="built_in">i</span>,<span class="built_in">j</span>) == Inf</span><br><span class="line">        <span class="built_in">disp</span>([<span class="string">&#x27;从&#x27;</span>,num2str(<span class="built_in">i</span>),<span class="string">&#x27;到&#x27;</span>,num2str(<span class="built_in">j</span>),<span class="string">&#x27;没有路径可以到达&#x27;</span>])</span><br><span class="line"><span class="comment">% （2）如果dist(i,j) 不为 Inf , 则说明从i到j可直接到达，且为最短路径</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">disp</span>([<span class="string">&#x27;从&#x27;</span>,num2str(<span class="built_in">i</span>),<span class="string">&#x27;到&#x27;</span>,num2str(<span class="built_in">j</span>),<span class="string">&#x27;的最短路径为&#x27;</span>])</span><br><span class="line">        <span class="built_in">disp</span>([num2str(<span class="built_in">i</span>),<span class="string">&#x27; ---&gt; &#x27;</span>,num2str(<span class="built_in">j</span>)])</span><br><span class="line">        <span class="built_in">disp</span>([<span class="string">&#x27;最短距离为&#x27;</span>,num2str(dist(<span class="built_in">i</span>,<span class="built_in">j</span>))])</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">else</span>  <span class="comment">% 如果path(i,j) ~= j，则说明中间经过了其他节点：</span></span><br><span class="line">    k = path(<span class="built_in">i</span>,<span class="built_in">j</span>);</span><br><span class="line">    result = [num2str(<span class="built_in">i</span>),<span class="string">&#x27; ---&gt; &#x27;</span>];  <span class="comment">% 初始化要打印的这个字符串</span></span><br><span class="line">    <span class="keyword">while</span> k ~= <span class="built_in">j</span>  <span class="comment">% 只要k不等于j, 就一直循环下去</span></span><br><span class="line">        result = [result , num2str(k) , <span class="string">&#x27; ---&gt; &#x27;</span> ];  <span class="comment">% i先走到k这个节点处</span></span><br><span class="line">        k = path(k,<span class="built_in">j</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    result = [result , num2str(k)];</span><br><span class="line">    <span class="built_in">disp</span>([<span class="string">&#x27;从&#x27;</span>,num2str(<span class="built_in">i</span>),<span class="string">&#x27;到&#x27;</span>,num2str(<span class="built_in">j</span>),<span class="string">&#x27;的最短路径为&#x27;</span>])</span><br><span class="line">    <span class="built_in">disp</span>(result)</span><br><span class="line">    <span class="built_in">disp</span>([<span class="string">&#x27;最短距离为&#x27;</span>,num2str(dist(<span class="built_in">i</span>,<span class="built_in">j</span>))])</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="模拟退火算法"><a href="#模拟退火算法" class="headerlink" title="模拟退火算法"></a>模拟退火算法</h2><blockquote>
<p> 模拟退火是物理上退火的方法，通过N次迭代，逼近函数上的一个值</p>
<p>大方向：循环算法</p>
<p>模拟退火算法(Simulated Annealing，简称SA)的思想最早是由Metropolis等提出的。其出发点是基于物理中固体物质的退火过程与一般的组合优化问题之间的相似性。模拟退火法是一种通用的优化算法，其物理退火过程由以下三部分组成:</p>
<p>（1） 加温过程。其目的是增强粒子的热运动，使其偏离平衡位置。当温度足够高时，固体将熔为液体，从而消除系统原先存在的非均匀状态。</p>
<p>（2） 等温过程。对于与周围环境交换热量而温度不变的封闭系统，系统状态的自发变化总是朝自由能减少的方向进行的，当自由能达到最小时，系统达到平衡状态。</p>
<p>（3） 冷却过程。使粒子热运动减弱，系统能量下降，得到晶体结构。</p>
<p>加温过程相当于对算法设定初值，等温过程对应算法的Metropolis抽样过程，冷却过程对应控制参数的下降。这里能量的变化就是目标函数，我们要得到的最优解就是能量最低态。其中Metropolis准则是SA算法收敛于全局最优解的关键所在，Metropolis准则以一定的概率接受恶化解，这样就使算法跳离局部最优的陷阱。</p>
<p>SA算法的Metropolis准则允许接受一定的恶化解，具体来讲，是以一定概率来接受非最优解。举个例子，相当于保留一些“潜力股”，使解空间里有更多的可能性。对比轮盘赌法，从概率论来讲，它是对非最优解给予概率0，即全部抛弃。</p>
<p>模拟退火本身是求一个最小值问题，但可以转化为求最大值问题，只需要对目标函数加个负号或者取倒数。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\bf3f480b814b4128a9a8b56e67cc7292.png" alt="img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>不断滚动，概率变动</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\2332b75e55ef41f5bdf4bce6d91a0108.png" alt="img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\c9d8f8aa383c40a1b94e63165a248b36.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\a057b531f74e42e08cc661aad387f675.png" alt="img"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% SA 模拟退火: 求解函数y = 11*sin(x) + 7*cos(5*x)在[-3,3]内的最大值(动画演示）</span></span><br><span class="line">tic</span><br><span class="line">clear; clc</span><br><span class="line"> </span><br><span class="line"><span class="comment">%% 绘制函数的图形</span></span><br><span class="line">x = <span class="number">-3</span>:<span class="number">0.1</span>:<span class="number">3</span>;</span><br><span class="line">y = <span class="number">11</span>*<span class="built_in">sin</span>(x) + <span class="number">7</span>*<span class="built_in">cos</span>(<span class="number">5</span>*x);</span><br><span class="line"><span class="built_in">figure</span></span><br><span class="line"><span class="built_in">plot</span>(x,y,<span class="string">&#x27;b-&#x27;</span>)</span><br><span class="line"><span class="built_in">hold</span> on  <span class="comment">% 不关闭图形，继续在上面画图</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">%% 参数初始化</span></span><br><span class="line">narvs = <span class="number">1</span>; <span class="comment">% 变量个数</span></span><br><span class="line">T0 = <span class="number">100</span>;   <span class="comment">% 初始温度</span></span><br><span class="line">T = T0; <span class="comment">% 迭代中温度会发生改变，第一次迭代时温度就是T0</span></span><br><span class="line">maxgen = <span class="number">200</span>;  <span class="comment">% 最大迭代次数</span></span><br><span class="line">Lk = <span class="number">100</span>;  <span class="comment">% 每个温度下的迭代次数</span></span><br><span class="line">alfa = <span class="number">0.95</span>;  <span class="comment">% 温度衰减系数</span></span><br><span class="line">x_lb = <span class="number">-3</span>; <span class="comment">% x的下界</span></span><br><span class="line">x_ub = <span class="number">3</span>; <span class="comment">% x的上界</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">%%  随机生成一个初始解</span></span><br><span class="line">x0 = <span class="built_in">zeros</span>(<span class="number">1</span>,narvs);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>: narvs</span><br><span class="line">    x0(<span class="built_in">i</span>) = x_lb(<span class="built_in">i</span>) + (x_ub(<span class="built_in">i</span>)-x_lb(<span class="built_in">i</span>))*<span class="built_in">rand</span>(<span class="number">1</span>);    </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">y0 = Obj_fun1(x0); <span class="comment">% 计算当前解的函数值</span></span><br><span class="line">h = <span class="built_in">scatter</span>(x0,y0,<span class="string">&#x27;*r&#x27;</span>);  <span class="comment">% scatter是绘制二维散点图的函数（这里返回h是为了得到图形的句柄，未来我们对其位置进行更新）</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">%% 定义一些保存中间过程的量，方便输出结果和画图</span></span><br><span class="line">max_y = y0;     <span class="comment">% 初始化找到的最佳的解对应的函数值为y0</span></span><br><span class="line">MAXY = <span class="built_in">zeros</span>(maxgen,<span class="number">1</span>); <span class="comment">% 记录每一次外层循环结束后找到的max_y (方便画图）</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">%% 模拟退火过程</span></span><br><span class="line"><span class="keyword">for</span> iter = <span class="number">1</span> : maxgen  <span class="comment">% 外循环, 我这里采用的是指定最大迭代次数</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : Lk  <span class="comment">% 内循环，在每个温度下开始迭代</span></span><br><span class="line">        y = <span class="built_in">randn</span>(<span class="number">1</span>,narvs);  <span class="comment">% 生成1行narvs列的N(0,1)随机数</span></span><br><span class="line">        z = y / <span class="built_in">sqrt</span>(sum(y.^<span class="number">2</span>)); <span class="comment">% 根据新解的产生规则计算z</span></span><br><span class="line">        x_new = x0 + z*T; <span class="comment">% 根据新解的产生规则计算x_new的值</span></span><br><span class="line">        <span class="comment">% 如果这个新解的位置超出了定义域，就对其进行调整</span></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>: narvs</span><br><span class="line">            <span class="keyword">if</span> x_new(<span class="built_in">j</span>) &lt; x_lb(<span class="built_in">j</span>)</span><br><span class="line">                r = <span class="built_in">rand</span>(<span class="number">1</span>);</span><br><span class="line">                x_new(<span class="built_in">j</span>) = r*x_lb(<span class="built_in">j</span>)+(<span class="number">1</span>-r)*x0(<span class="built_in">j</span>);</span><br><span class="line">            <span class="keyword">elseif</span> x_new(<span class="built_in">j</span>) &gt; x_ub(<span class="built_in">j</span>)</span><br><span class="line">                r = <span class="built_in">rand</span>(<span class="number">1</span>);</span><br><span class="line">                x_new(<span class="built_in">j</span>) = r*x_ub(<span class="built_in">j</span>)+(<span class="number">1</span>-r)*x0(<span class="built_in">j</span>);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        x1 = x_new;    <span class="comment">% 将调整后的x_new赋值给新解x1</span></span><br><span class="line">        y1 = Obj_fun1(x1);  <span class="comment">% 计算新解的函数值</span></span><br><span class="line">        <span class="keyword">if</span> y1 &gt; y0    <span class="comment">% 如果新解函数值大于当前解的函数值</span></span><br><span class="line">            x0 = x1; <span class="comment">% 更新当前解为新解</span></span><br><span class="line">            y0 = y1;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            p = <span class="built_in">exp</span>(-(y0 - y1)/T); <span class="comment">% 根据Metropolis准则计算一个概率</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">rand</span>(<span class="number">1</span>) &lt; p   <span class="comment">% 生成一个随机数和这个概率比较，如果该随机数小于这个概率</span></span><br><span class="line">                x0 = x1; <span class="comment">% 更新当前解为新解</span></span><br><span class="line">                y0 = y1;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="comment">% 判断是否要更新找到的最佳的解</span></span><br><span class="line">        <span class="keyword">if</span> y0 &gt; max_y  <span class="comment">% 如果当前解更好，则对其进行更新</span></span><br><span class="line">            max_y = y0;  <span class="comment">% 更新最大的y</span></span><br><span class="line">            best_x = x0;  <span class="comment">% 更新找到的最好的x</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    MAXY(iter) = max_y; <span class="comment">% 保存本轮外循环结束后找到的最大的y</span></span><br><span class="line">    T = alfa*T;   <span class="comment">% 温度下降</span></span><br><span class="line">    pause(<span class="number">0.01</span>)  <span class="comment">% 暂停一段时间(单位：秒)后再接着画图</span></span><br><span class="line">    h.XData = x0;  <span class="comment">% 更新散点图句柄的x轴的数据（此时解的位置在图上发生了变化）</span></span><br><span class="line">    h.YData = Obj_fun1(x0); <span class="comment">% 更新散点图句柄的y轴的数据（此时解的位置在图上发生了变化）</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;最佳的位置是：&#x27;</span>); <span class="built_in">disp</span>(best_x)</span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;此时最优值是：&#x27;</span>); <span class="built_in">disp</span>(max_y)</span><br><span class="line"> </span><br><span class="line">pause(<span class="number">0.5</span>)</span><br><span class="line">h.XData = [];  h.YData = [];  <span class="comment">% 将原来的散点删除</span></span><br><span class="line"><span class="built_in">scatter</span>(best_x,max_y,<span class="string">&#x27;*r&#x27;</span>);  <span class="comment">% 在最大值处重新标上散点</span></span><br><span class="line">title([<span class="string">&#x27;模拟退火找到的最大值为&#x27;</span>, num2str(max_y)])  <span class="comment">% 加上图的标题</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">%% 画出每次迭代后找到的最大y的图形</span></span><br><span class="line"><span class="built_in">figure</span></span><br><span class="line"><span class="built_in">plot</span>(<span class="number">1</span>:maxgen,MAXY,<span class="string">&#x27;b-&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;迭代次数&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;y的值&#x27;</span>);</span><br><span class="line">toc</span><br></pre></td></tr></table></figure>
<h3 id="旅行商问题也可以用蒙特卡罗解决"><a href="#旅行商问题也可以用蒙特卡罗解决" class="headerlink" title="旅行商问题也可以用蒙特卡罗解决"></a>旅行商问题也可以用蒙特卡罗解决</h3><h2 id="种群竞争模型"><a href="#种群竞争模型" class="headerlink" title="种群竞争模型"></a>种群竞争模型</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130112916180.png" alt="image-20240130112916180"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130112922246.png" alt="image-20240130112922246"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">clc;clear</span><br><span class="line"><span class="comment">%  Matlab求不出来解析解</span></span><br><span class="line"><span class="comment">% dsolve(&#x27;Dx1 = 0.5*x1*(1-x1/300-0.5*x2/500)&#x27;,&#x27;Dx2=0.5*x2*(1-x2/500-2*x1/300)&#x27;,&#x27;x1(0)=80,x2(0)=100&#x27;,&#x27;t&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 下面用ode45函数求数值解</span></span><br><span class="line"><span class="comment">% 自变量为时间t，范围为0-30； 甲乙两个种群的数量初始值为80，100（随便给的，大家可以调整来看结果的变化）</span></span><br><span class="line">[t,x]=ode45(<span class="string">&#x27;fun&#x27;</span>,[<span class="number">0</span> <span class="number">30</span>],[<span class="number">80</span> <span class="number">100</span>]); </span><br><span class="line"><span class="built_in">plot</span>(t,x(:,<span class="number">1</span>),<span class="string">&#x27;r-&#x27;</span>,t,x(:,<span class="number">2</span>),<span class="string">&#x27;b-&#x27;</span>)  <span class="comment">% x的第一列是甲种群数量，x的第二列是乙种群数量</span></span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;种群甲&#x27;</span>,<span class="string">&#x27;种群乙&#x27;</span>)</span><br><span class="line"><span class="comment">% axis([0 30 0 500])</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dx</span>=<span class="title">fun</span><span class="params">(t,x)</span>   % 大家可以修改里面的参数，来看结果的变化</span></span><br><span class="line">    r1=<span class="number">0.5</span>;  r <span class="number">2</span>=<span class="number">0.5</span>; <span class="comment">% 甲乙的增长率</span></span><br><span class="line"><span class="comment">%     r1=0.8;  r2=1; % 甲乙的增长率</span></span><br><span class="line">    N1=<span class="number">300</span>;   N2=<span class="number">500</span>;   <span class="comment">% 甲乙的最大数量</span></span><br><span class="line">    <span class="comment">% sigma1: 单位数量的乙种群(相对于N2)消耗的供养甲的食物量为单位数量的甲(相对于N1)消耗的供养甲的食物量的倍数。</span></span><br><span class="line">    <span class="comment">% sigma2: 单位数量的甲种群(相对于N1)消耗的供养乙的食物量为单位数量的乙(相对于N2)消耗的供养乙的食物量的倍数。</span></span><br><span class="line">    sigma1=<span class="number">0.5</span>;  sigma2=<span class="number">2</span>;   </span><br><span class="line"><span class="comment">%     sigma1=0.5;  sigma2=4;   </span></span><br><span class="line"><span class="comment">%     sigma1=0.4;  sigma2=0.2;</span></span><br><span class="line"><span class="comment">%   当sigma1和sigma2同时大于1时（这种现象本身在自然界就几乎不可能出现），得到的结果不稳定。</span></span><br><span class="line"><span class="comment">%     sigma1=3;  sigma2=2;   </span></span><br><span class="line"><span class="comment">%     sigma1=2.2;  sigma2=2;   </span></span><br><span class="line"></span><br><span class="line">    dx = <span class="built_in">zeros</span>(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">    dx(<span class="number">1</span>) = r1*x(<span class="number">1</span>)*(<span class="number">1</span>-x(<span class="number">1</span>)/N1-sigma1*x(<span class="number">2</span>)/N2);</span><br><span class="line">    dx(<span class="number">2</span>) = r2*x(<span class="number">2</span>)*(<span class="number">1</span>-x(<span class="number">2</span>)/N2-sigma2*x(<span class="number">1</span>)/N1);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130113132533.png" alt="image-20240130113132533"></p>
<h2 id="数学规划模型"><a href="#数学规划模型" class="headerlink" title="数学规划模型"></a>数学规划模型</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128212145083.png" alt="image-20240128212145083"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128212202777.png" alt="image-20240128212202777"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128212217297.png" alt="image-20240128212217297"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128212234617.png" alt="image-20240128212234617"></p>
<h3 id="线性规划"><a href="#线性规划" class="headerlink" title="线性规划"></a>线性规划</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128212439349.png" alt="image-20240128212439349"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128212611139.png" alt="image-20240128212611139"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128212925755.png" alt="image-20240128212925755"></p>
<h4 id="代码命令解释"><a href="#代码命令解释" class="headerlink" title="代码命令解释"></a>代码命令解释</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128213014243.png" alt="image-20240128213014243"></p>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% Matlab求解线性规划</span></span><br><span class="line"><span class="comment">% [x fval] = linprog(c, A, b, Aeq, beq, lb,ub, x0)  </span></span><br><span class="line"><span class="comment">% c是目标函数的系数向量，A是不等式约束Ax&lt;=b的系数矩阵，b是不等式约束Ax&lt;=b的常数项</span></span><br><span class="line"><span class="comment">% Aeq是等式约束Aeq x=beq的系数矩阵，beq是等式约束Aeq x=beq的常数项</span></span><br><span class="line"><span class="comment">% lb是X的下限，ub是X的上限，X是向量[x1,x2,...xn]&#x27; , 即决策变量。</span></span><br><span class="line"><span class="comment">% 迭代的初始值为x0（一般不用给）</span></span><br><span class="line"><span class="comment">% 更多该函数的用法说明请看讲义</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 例题1</span></span><br><span class="line">c = [<span class="number">-5</span> <span class="number">-4</span> <span class="number">-6</span>]&#x27;;  <span class="comment">% 加单引号表示转置</span></span><br><span class="line"><span class="comment">% c = [-5 -4 -6];  % 写成行向量也是可以的，不过不推荐，我们按照标准型来写看起来比较正规</span></span><br><span class="line">A = [<span class="number">1</span> <span class="number">-1</span> <span class="number">1</span>;</span><br><span class="line">        <span class="number">3</span> <span class="number">2</span> <span class="number">4</span>;</span><br><span class="line">        <span class="number">3</span> <span class="number">2</span> <span class="number">0</span>];</span><br><span class="line">b = [<span class="number">20</span> <span class="number">42</span> <span class="number">30</span>]&#x27;;   </span><br><span class="line">lb = [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]&#x27;; </span><br><span class="line">[x fval] = linprog(c, A, b, [], [], lb)  <span class="comment">% ub我们直接不写，则意味着没有上界的约束</span></span><br><span class="line"><span class="comment">% x =</span></span><br><span class="line"><span class="comment">%          0</span></span><br><span class="line"><span class="comment">%    15.0000</span></span><br><span class="line"><span class="comment">%     3.0000</span></span><br><span class="line"><span class="comment">% </span></span><br><span class="line"><span class="comment">% fval =</span></span><br><span class="line"><span class="comment">%    -78</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 例题2</span></span><br><span class="line">c = [<span class="number">0.04</span> <span class="number">0.15</span> <span class="number">0.1</span> <span class="number">0.125</span>]&#x27;;  </span><br><span class="line">A = [<span class="number">-0.03</span> <span class="number">-0.3</span> <span class="number">0</span> <span class="number">-0.15</span>;</span><br><span class="line">        <span class="number">0.14</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0.07</span>];</span><br><span class="line">b = [<span class="number">-32</span> <span class="number">42</span>]&#x27;;</span><br><span class="line">Aeq = [<span class="number">0.05</span> <span class="number">0</span> <span class="number">0.2</span> <span class="number">0.1</span>];</span><br><span class="line">beq = <span class="number">24</span>;</span><br><span class="line">lb = [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]&#x27;;</span><br><span class="line">[x fval] = linprog(c, A, b, Aeq, beq, lb)</span><br><span class="line"><span class="comment">% x =</span></span><br><span class="line"><span class="comment">%          0</span></span><br><span class="line"><span class="comment">%   106.6667</span></span><br><span class="line"><span class="comment">%   120.0000</span></span><br><span class="line"><span class="comment">%          0</span></span><br><span class="line"><span class="comment">% </span></span><br><span class="line"><span class="comment">% fval =</span></span><br><span class="line"><span class="comment">%     28</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 这个题可能有多个解，即有多个x可以使得目标函数的最小值为28（不同的Matlab版本可能得到的x的值不同，但最后的最小值一定是28）</span></span><br><span class="line"><span class="comment">% 例如我们更改一个限定条件：令x1要大于0（注意Matlab中线性规划的标准型要求的不等式约束的符号是小于等于0）</span></span><br><span class="line"><span class="comment">% x1 &gt;0  等价于  -x1 &lt; 0，那么给定 -x1 &lt;= -0.1 (根据实际问题可以给一个略小于0的数-0.1)，这样能将小于号转换为小于等于号，满足Matlab的标准型</span></span><br><span class="line">c = [<span class="number">0.04</span> <span class="number">0.15</span> <span class="number">0.1</span> <span class="number">0.125</span>]&#x27;;  </span><br><span class="line">A = [<span class="number">-0.03</span> <span class="number">-0.3</span> <span class="number">0</span> <span class="number">-0.15</span>;</span><br><span class="line">        <span class="number">0.14</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0.07</span></span><br><span class="line">        <span class="number">-1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>];</span><br><span class="line">b = [<span class="number">-32</span> <span class="number">42</span> <span class="number">-0.1</span>]&#x27;;</span><br><span class="line">Aeq = [<span class="number">0.05</span> <span class="number">0</span> <span class="number">0.2</span> <span class="number">0.1</span>];</span><br><span class="line">beq = <span class="number">24</span>;</span><br><span class="line">lb = [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]&#x27;;</span><br><span class="line">[x fval] = linprog(c, A, b, Aeq, beq, lb)</span><br><span class="line"><span class="comment">% x =</span></span><br><span class="line"><span class="comment">%     0.1000</span></span><br><span class="line"><span class="comment">%   106.6567</span></span><br><span class="line"><span class="comment">%   119.9750</span></span><br><span class="line"><span class="comment">%          0</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% fval =</span></span><br><span class="line"><span class="comment">%    28.0000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 例题3</span></span><br><span class="line">c = [<span class="number">-2</span> <span class="number">-3</span> <span class="number">5</span>]&#x27;;</span><br><span class="line">A = [<span class="number">-2</span> <span class="number">5</span> <span class="number">-1</span>;</span><br><span class="line">          <span class="number">1</span> <span class="number">3</span> <span class="number">1</span>];</span><br><span class="line">b = [<span class="number">-10</span> <span class="number">12</span>];</span><br><span class="line">Aeq = <span class="built_in">ones</span>(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line">beq = <span class="number">7</span>;</span><br><span class="line">lb = <span class="built_in">zeros</span>(<span class="number">3</span>,<span class="number">1</span>);</span><br><span class="line">[x fval] = linprog(c, A, b, Aeq, beq, lb)</span><br><span class="line">fval = -fval <span class="comment">% 注意这个fval要取负号（原来是求最大值，我们添加负号变成了最小值问题）</span></span><br><span class="line"><span class="comment">% x =</span></span><br><span class="line"><span class="comment">%     6.4286</span></span><br><span class="line"><span class="comment">%     0.5714</span></span><br><span class="line"><span class="comment">%          0</span></span><br><span class="line"><span class="comment">% fval =</span></span><br><span class="line"><span class="comment">%   -14.5714</span></span><br><span class="line"><span class="comment">% fval =</span></span><br><span class="line"><span class="comment">%    14.5714</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 多个解的情况</span></span><br><span class="line"><span class="comment">% 例如 ： min z = x1 + x2   s.t.  x1 + x2 &gt;= 10</span></span><br><span class="line">c = [<span class="number">1</span> <span class="number">1</span>]&#x27;;   </span><br><span class="line">A = [<span class="number">-1</span> <span class="number">-1</span>];</span><br><span class="line">b = <span class="number">-10</span>;</span><br><span class="line">[x fval] = linprog(c, A, b)   <span class="comment">% Aeq, beq, lb和ub我们都没写，意味着没有等式约束和上下界约束</span></span><br><span class="line"><span class="comment">% x有多个解时，Matlab会给我们返回其中的一个解</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 不存在解的情况</span></span><br><span class="line"><span class="comment">% 例如 ： min z = x1 + x2   s.t.  x1 + x2 = 10 、 x1 + 2*x2 &lt;= 8、 x1 &gt;=0 ，x2 &gt;=0 </span></span><br><span class="line">c = [<span class="number">1</span> <span class="number">1</span>]&#x27;; </span><br><span class="line">A = [<span class="number">1</span> <span class="number">2</span>];</span><br><span class="line">b = <span class="number">8</span>;</span><br><span class="line">Aeq = [<span class="number">1</span> <span class="number">1</span>];</span><br><span class="line">beq = <span class="number">10</span>;</span><br><span class="line">lb = [<span class="number">0</span> <span class="number">0</span>]&#x27;;</span><br><span class="line">[x fval] = linprog(c, A, b, Aeq, beq, lb)  <span class="comment">% Linprog stopped because no point satisfies the constraints.（没有任何一个点满足约束条件）</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="线性规划的典型例题"><a href="#线性规划的典型例题" class="headerlink" title="线性规划的典型例题"></a>线性规划的典型例题</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128213640923.png" alt="image-20240128213640923"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% 生产决策问题</span></span><br><span class="line">format long g   <span class="comment">%可以将Matlab的计算结果显示为一般的长数字格式（默认会保留四位小数，或使用科学计数法）</span></span><br><span class="line"><span class="comment">% (1) 系数向量</span></span><br><span class="line">c = <span class="built_in">zeros</span>(<span class="number">9</span>,<span class="number">1</span>); <span class="comment">% 初始化目标函数的系数向量全为0</span></span><br><span class="line">c(<span class="number">1</span>) = <span class="number">1.25</span> <span class="number">-0.25</span> <span class="number">-300</span>/<span class="number">6000</span>*<span class="number">5</span>;  <span class="comment">% x1前面的系数是c1</span></span><br><span class="line">c(<span class="number">2</span>) = <span class="number">1.25</span> <span class="number">-0.25</span> <span class="number">-321</span>/<span class="number">10000</span>*<span class="number">7</span>;</span><br><span class="line">c(<span class="number">3</span>) = <span class="number">-250</span> / <span class="number">4000</span> * <span class="number">6</span>;</span><br><span class="line">c(<span class="number">4</span>)  = <span class="number">-783</span>/<span class="number">7000</span>*<span class="number">4</span>;</span><br><span class="line">c(<span class="number">5</span>) = <span class="number">-200</span>/<span class="number">4000</span> * <span class="number">7</span>;</span><br><span class="line">c(<span class="number">6</span>) = <span class="number">-300</span>/<span class="number">6000</span>*<span class="number">10</span>;</span><br><span class="line">c(<span class="number">7</span>) = <span class="number">-321</span> / <span class="number">10000</span> * <span class="number">9</span>;</span><br><span class="line">c(<span class="number">8</span>) = <span class="number">2</span><span class="number">-0.35</span><span class="number">-250</span>/<span class="number">4000</span>*<span class="number">8</span>;</span><br><span class="line">c(<span class="number">9</span>) = <span class="number">2.8</span><span class="number">-0.5</span><span class="number">-321</span>/<span class="number">10000</span>*<span class="number">12</span><span class="number">-783</span>/<span class="number">7000</span>*<span class="number">11</span>;</span><br><span class="line">c = -c;  <span class="comment">% 我们求的是最大值，所以这里需要改变符号</span></span><br><span class="line"><span class="comment">% (2) 不等式约束</span></span><br><span class="line">A = <span class="built_in">zeros</span>(<span class="number">5</span>,<span class="number">9</span>);</span><br><span class="line">A(<span class="number">1</span>,<span class="number">1</span>) = <span class="number">5</span>;  A(<span class="number">1</span>,<span class="number">6</span>) = <span class="number">10</span>;</span><br><span class="line">A(<span class="number">2</span>,<span class="number">2</span>) = <span class="number">7</span>;  A(<span class="number">2</span>,<span class="number">7</span>) = <span class="number">9</span>; A(<span class="number">2</span>,<span class="number">9</span>) = <span class="number">12</span>;</span><br><span class="line">A(<span class="number">3</span>,<span class="number">3</span>) = <span class="number">6</span>;  A(<span class="number">3</span>,<span class="number">8</span>) = <span class="number">8</span>;</span><br><span class="line">A(<span class="number">4</span>,<span class="number">4</span>) = <span class="number">4</span>;  A(<span class="number">4</span>,<span class="number">9</span>) = <span class="number">11</span>;</span><br><span class="line">A(<span class="number">5</span>,<span class="number">5</span>) = <span class="number">7</span>;  </span><br><span class="line">b = [<span class="number">6000</span> <span class="number">10000</span> <span class="number">4000</span> <span class="number">7000</span> <span class="number">4000</span>]&#x27;;</span><br><span class="line"><span class="comment">% (3) 等式约束</span></span><br><span class="line">Aeq = [<span class="number">1</span> <span class="number">1</span> <span class="number">-1</span> <span class="number">-1</span> <span class="number">-1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">            <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">-1</span> <span class="number">0</span>];</span><br><span class="line">beq = [<span class="number">0</span> <span class="number">0</span>]&#x27;;</span><br><span class="line"><span class="comment">%（4）上下界</span></span><br><span class="line">lb = <span class="built_in">zeros</span>(<span class="number">9</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 进行求解</span></span><br><span class="line">[x fval] = linprog(c, A, b, Aeq, beq, lb)</span><br><span class="line">fval = -fval</span><br><span class="line"><span class="comment">% fval =</span></span><br><span class="line"><span class="comment">%           1146.56650246305</span></span><br><span class="line"><span class="comment">%  注意，本题应该是一个整数规划的例子，我们在后面的整数规划部分再来重新求解。</span></span><br><span class="line">intcon = <span class="number">1</span>:<span class="number">9</span>;</span><br><span class="line">[x,fval]=intlinprog(c,intcon,A,b,Aeq,beq,lb)</span><br><span class="line">fval = -fval</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="整数规划"><a href="#整数规划" class="headerlink" title="整数规划"></a>整数规划</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128214116824.png" alt="image-20240128214116824"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128214417024.png" alt="image-20240128214417024"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% 线性整数规划问题</span></span><br><span class="line"><span class="comment">%% 例1</span></span><br><span class="line">c=[<span class="number">-20</span>,<span class="number">-10</span>]&#x27;;</span><br><span class="line">intcon=[<span class="number">1</span>,<span class="number">2</span>];  <span class="comment">% x1和x2限定为整数</span></span><br><span class="line">A=[<span class="number">5</span>,<span class="number">4</span>;</span><br><span class="line">      <span class="number">2</span>,<span class="number">5</span>];</span><br><span class="line">b=[<span class="number">24</span>;<span class="number">13</span>];</span><br><span class="line">lb=<span class="built_in">zeros</span>(<span class="number">2</span>,<span class="number">1</span>);  </span><br><span class="line">[x,fval]=intlinprog(c,intcon,A,b,[],[],lb)</span><br><span class="line">fval = -fval</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 例2</span></span><br><span class="line">c=[<span class="number">18</span>,<span class="number">23</span>,<span class="number">5</span>]&#x27;;</span><br><span class="line">intcon=<span class="number">3</span>;  <span class="comment">% x3限定为整数</span></span><br><span class="line">A=[<span class="number">107</span>,<span class="number">500</span>,<span class="number">0</span>;</span><br><span class="line">      <span class="number">72</span>,<span class="number">121</span>,<span class="number">65</span>;</span><br><span class="line">      <span class="number">-107</span>,<span class="number">-500</span>,<span class="number">0</span>;</span><br><span class="line">      <span class="number">-72</span>,<span class="number">-121</span>,<span class="number">-65</span>];</span><br><span class="line">b=[<span class="number">50000</span>;<span class="number">2250</span>;<span class="number">-500</span>;<span class="number">-2000</span>];</span><br><span class="line">lb=<span class="built_in">zeros</span>(<span class="number">3</span>,<span class="number">1</span>);</span><br><span class="line">[x,fval]=intlinprog(c,intcon,A,b,[],[],lb)</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 例3</span></span><br><span class="line">c=[<span class="number">-3</span>;<span class="number">-2</span>;<span class="number">-1</span>]; intcon=<span class="number">3</span>; <span class="comment">% x3限定为整数</span></span><br><span class="line">A=<span class="built_in">ones</span>(<span class="number">1</span>,<span class="number">3</span>); b=<span class="number">7</span>;</span><br><span class="line">Aeq=[<span class="number">4</span> <span class="number">2</span> <span class="number">1</span>]; beq=<span class="number">12</span>;</span><br><span class="line">lb=<span class="built_in">zeros</span>(<span class="number">3</span>,<span class="number">1</span>); ub=[+<span class="built_in">inf</span>;+<span class="built_in">inf</span>;<span class="number">1</span>]; <span class="comment">%x(3)为0-1变量</span></span><br><span class="line">[x,fval]=intlinprog(c,intcon,A,b,Aeq,beq,lb,ub)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="背包问题"><a href="#背包问题" class="headerlink" title="背包问题"></a>背包问题</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128214732168.png" alt="image-20240128214732168"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% 背包问题（货车运送货物的问题）</span></span><br><span class="line">c = -[<span class="number">540</span> <span class="number">200</span> <span class="number">180</span> <span class="number">350</span> <span class="number">60</span> <span class="number">150</span> <span class="number">280</span> <span class="number">450</span> <span class="number">320</span> <span class="number">120</span>];  <span class="comment">% 目标函数的系数矩阵(最大化问题记得加负号)</span></span><br><span class="line">intcon=[<span class="number">1</span>:<span class="number">10</span>];  <span class="comment">% 整数变量的位置(一共10个决策变量，均为0-1整数变量)</span></span><br><span class="line">A = [<span class="number">6</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">4</span> <span class="number">2</span>];  b = <span class="number">30</span>;   <span class="comment">% 线性不等式约束的系数矩阵和常数项向量（物品的重量不能超过30）</span></span><br><span class="line">Aeq = []; beq =[];  <span class="comment">% 不存在线性等式约束</span></span><br><span class="line">lb = <span class="built_in">zeros</span>(<span class="number">10</span>,<span class="number">1</span>);  <span class="comment">% 约束变量的范围下限</span></span><br><span class="line">ub = <span class="built_in">ones</span>(<span class="number">10</span>,<span class="number">1</span>);  <span class="comment">% 约束变量的范围上限</span></span><br><span class="line"><span class="comment">%最后调用intlinprog()函数</span></span><br><span class="line">[x,fval]=intlinprog(c,intcon,A,b,Aeq,beq,lb,ub)</span><br><span class="line">fval = -fval</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="指派问题"><a href="#指派问题" class="headerlink" title="指派问题"></a>指派问题</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128215024353.png" alt="image-20240128215024353"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% 指派问题（选择队员去进行游泳接力比赛）</span></span><br><span class="line">clear;clc</span><br><span class="line">c = [<span class="number">66.8</span> <span class="number">75.6</span> <span class="number">87</span> <span class="number">58.6</span> <span class="number">57.2</span> <span class="number">66</span> <span class="number">66.4</span> <span class="number">53</span> <span class="number">78</span> <span class="number">67.8</span> <span class="number">84.6</span> <span class="number">59.4</span> <span class="number">70</span> <span class="number">74.2</span> <span class="number">69.6</span> <span class="number">57.2</span> <span class="number">67.4</span> <span class="number">71</span> <span class="number">83.8</span> <span class="number">62.4</span>]&#x27;;  <span class="comment">% 目标函数的系数矩阵（先列后行的写法）</span></span><br><span class="line">intcon = [<span class="number">1</span>:<span class="number">20</span>];  <span class="comment">% 整数变量的位置(一共20个决策变量，均为0-1整数变量)</span></span><br><span class="line"><span class="comment">% 线性不等式约束的系数矩阵和常数项向量（每个人只能入选四种泳姿之一，一共五个约束）</span></span><br><span class="line">A = [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">       <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">       <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">       <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">       <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>];</span><br><span class="line"><span class="comment">% A = zeros(5,20);</span></span><br><span class="line"><span class="comment">% for i = 1:5</span></span><br><span class="line"><span class="comment">%     A(i, (4*i-3): 4*i) = 1;</span></span><br><span class="line"><span class="comment">% end</span></span><br><span class="line">b = [<span class="number">1</span>;<span class="number">1</span>;<span class="number">1</span>;<span class="number">1</span>;<span class="number">1</span>];</span><br><span class="line"><span class="comment">% 线性等式约束的系数矩阵和常数项向量 （每种泳姿有且仅有一人参加，一共四个约束）</span></span><br><span class="line">Aeq = [<span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">          <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">          <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span>;</span><br><span class="line">          <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span>];</span><br><span class="line"><span class="comment">% Aeq = [eye(4),eye(4),eye(4),eye(4),eye(4)];  % 或者写成 repmat(eye(4),1,5)  </span></span><br><span class="line">beq = [<span class="number">1</span>;<span class="number">1</span>;<span class="number">1</span>;<span class="number">1</span>];</span><br><span class="line">lb = <span class="built_in">zeros</span>(<span class="number">20</span>,<span class="number">1</span>);  <span class="comment">% 约束变量的范围下限</span></span><br><span class="line">ub = <span class="built_in">ones</span>(<span class="number">20</span>,<span class="number">1</span>);  <span class="comment">% 约束变量的范围上限</span></span><br><span class="line"><span class="comment">%最后调用intlinprog()函数</span></span><br><span class="line">[x,fval] = intlinprog(c,intcon,A,b,Aeq,beq,lb,ub)</span><br><span class="line"><span class="comment">% reshape(x,4,5)&#x27;</span></span><br><span class="line"><span class="comment">%      0     0     0     1    甲自由泳</span></span><br><span class="line"><span class="comment">%      1     0     0     0    乙蝶泳</span></span><br><span class="line"><span class="comment">%      0     1     0     0    丙仰泳</span></span><br><span class="line"><span class="comment">%      0     0     1     0    丁蛙泳</span></span><br><span class="line"><span class="comment">%      0     0     0     0    戊不参加</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="钢管切割问题"><a href="#钢管切割问题" class="headerlink" title="钢管切割问题"></a>钢管切割问题</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128215414471.png" alt="image-20240128215414471"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128215510504.png" alt="image-20240128215510504"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% 钢管切割问题</span></span><br><span class="line"><span class="comment">%% (1)枚举法找出同一个原材料上所有的切割方法</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">0</span>: <span class="number">2</span>  <span class="comment">% 2.9m长的圆钢的数量</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">0</span>: <span class="number">3</span>  <span class="comment">% 2.1m长的圆钢的数量</span></span><br><span class="line">        <span class="keyword">for</span> k = <span class="number">0</span>:<span class="number">6</span>   <span class="comment">% 1m长的圆钢的数量</span></span><br><span class="line">            <span class="keyword">if</span> <span class="number">2.9</span>*<span class="built_in">i</span>+<span class="number">2.1</span>*<span class="built_in">j</span>+<span class="number">1</span>*k &gt;= <span class="number">6</span> &amp;&amp; <span class="number">2.9</span>*<span class="built_in">i</span>+<span class="number">2.1</span>*<span class="built_in">j</span>+<span class="number">1</span>*k &lt;= <span class="number">6.9</span></span><br><span class="line">                <span class="built_in">disp</span>([<span class="built_in">i</span>, <span class="built_in">j</span>, k])</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">% 有同学使用比较老的MATLAB版本，会出现浮点数计算的误差</span></span><br><span class="line"><span class="comment">% 只需要将上面的if这一行进行适当的放缩即可。</span></span><br><span class="line"><span class="comment">% if 2.9*i+2.1*j+1*k &gt;= 6-0.0000001 &amp;&amp; 2.9*i+2.1*j+1*k &lt;= 6.9+0.0000001</span></span><br><span class="line"><span class="comment">% 有兴趣的同学可以百度下：浮点数计算误差</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% (2) 线性整数规划问题的求解</span></span><br><span class="line">c = <span class="built_in">ones</span>(<span class="number">7</span>,<span class="number">1</span>);  <span class="comment">% 目标函数的系数矩阵</span></span><br><span class="line">intcon=[<span class="number">1</span>:<span class="number">7</span>];  <span class="comment">%  整数变量的位置(一共7个决策变量，均为整数变量)</span></span><br><span class="line">A = -[<span class="number">1</span> <span class="number">2</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span>;  </span><br><span class="line">         <span class="number">0</span> <span class="number">0</span> <span class="number">3</span> <span class="number">2</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span>;</span><br><span class="line">         <span class="number">4</span> <span class="number">1</span> <span class="number">0</span> <span class="number">2</span> <span class="number">4</span> <span class="number">6</span> <span class="number">1</span>];  <span class="comment">% 线性不等式约束的系数矩阵</span></span><br><span class="line">b = -[<span class="number">100</span> <span class="number">100</span> <span class="number">100</span>]&#x27;; <span class="comment">%  线性不等式约束的常数项向量</span></span><br><span class="line">lb = <span class="built_in">zeros</span>(<span class="number">7</span>,<span class="number">1</span>); <span class="comment">% 约束变量的范围下限</span></span><br><span class="line">[x,fval]=intlinprog(c,intcon,A,b,[],[],lb)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="非线性问题的求解"><a href="#非线性问题的求解" class="headerlink" title="非线性问题的求解"></a>非线性问题的求解</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128215640424.png" alt="image-20240128215640424"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128215838554.png" alt="image-20240128215838554"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128220006524.png" alt="image-20240128220006524"></p>
<h3 id="代码求解"><a href="#代码求解" class="headerlink" title="代码求解"></a>代码求解</h3><blockquote>
<p>可以先给定不同初始值，在里面找到最优解</p>
<p>也可以蒙特卡罗模拟找到一个蒙特卡罗解，再作为初始值进行求解。</p>
<p>min最小值</p>
<p>f函数</p>
<p>con约束</p>
<p>X0是一个初始值，线性规划里边初始值对于结果没影响，而非线性规划中x0的选取很关键，因为求出的是一个局部最优解。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128221553606.png" alt="image-20240128221553606"></p>
<p>求解的方法有四种，可以提高结果的稳健性能。 </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128221841171.png" alt="image-20240128221841171"></p>
<h3 id="例题一"><a href="#例题一" class="headerlink" title="例题一"></a>例题一</h3><p>如果考察了，建议蒙特卡洛加上四种方法一起用，这样就稳啦</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% 非线性规划的函数</span></span><br><span class="line"><span class="comment">% [x,fval] = fmincon(@fun,x0,A,b,Aeq,beq,lb,ub,@nonlfun,option)</span></span><br><span class="line"><span class="comment">% x0表示给定的初始值（用行向量或者列向量表示），必须得写</span></span><br><span class="line"><span class="comment">% A b表示线性不等式约束</span></span><br><span class="line"><span class="comment">% Aeq beq 表示线性等式约束</span></span><br><span class="line"><span class="comment">% lb ub 表示上下界约束</span></span><br><span class="line"><span class="comment">% @fun表示目标函数</span></span><br><span class="line"><span class="comment">% @nonlfun表示非线性约束的函数</span></span><br><span class="line"><span class="comment">% option 表示求解非线性规划使用的方法</span></span><br><span class="line">clear;clc</span><br><span class="line">format long g   <span class="comment">%可以将Matlab的计算结果显示为一般的长数字格式（默认会保留四位小数，或使用科学计数法）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 例题1的求解</span></span><br><span class="line"><span class="comment">% max f(x) = x1^2 +x2^2 -x1*x2 -2x1 -5x2</span></span><br><span class="line"><span class="comment">% s.t. -(x1-1)^2 +x2 &gt;= 0 ;  2x1-3x2+6 &gt;= 0</span></span><br><span class="line">x0 = [<span class="number">0</span> <span class="number">0</span>];  <span class="comment">%任意给定一个初始值 </span></span><br><span class="line">A = [<span class="number">-2</span> <span class="number">3</span>]; b = <span class="number">6</span>;</span><br><span class="line">[x,fval] = fmincon(@fun1,x0,A,b,[],[],[],[],@nonlfun1)  <span class="comment">% 注意 fun1.m文件和nonlfun1.m文件都必须在当前文件夹目录下</span></span><br><span class="line">fval = -fval</span><br><span class="line"><span class="comment">% 一个值得讨论的地方，能不能把线性不等式约束Ax &lt;= b也写到nonlfun1函数中？</span></span><br><span class="line"><span class="comment">% 先把nonlfun1中的c改为下面这样：</span></span><br><span class="line"><span class="comment">% c = [(x(1)-1)^2-x(2); </span></span><br><span class="line"><span class="comment">%        -2*x(1)+3*x(2)-6];</span></span><br><span class="line"><span class="comment">%  [x,fval] = fmincon(@fun1,x0,[],[],[],[],[],[],@nonlfun1)</span></span><br><span class="line"><span class="comment">% 结果也是可以计算出来的，但并不推荐这样做~</span></span><br><span class="line"></span><br><span class="line">目标函数</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> = <span class="title">fun1</span><span class="params">(x)</span></span></span><br><span class="line">    <span class="comment">% 注意：这里的f实际上就是目标函数，函数的返回值也是f</span></span><br><span class="line">    <span class="comment">% 输入值x实际上就是决策变量，由x1和x2组成的向量</span></span><br><span class="line">    <span class="comment">% fun1是函数名称，到时候会被fmincon函数调用, 可以任意取名</span></span><br><span class="line">    <span class="comment">% 保存的m文件和函数名称得一致，也要为fun1.m</span></span><br><span class="line"><span class="comment">%      max  f(x) = x1^2 +x2^2 -x1*x2 -2x1 -5x2</span></span><br><span class="line">    f = -x(<span class="number">1</span>)^<span class="number">2</span>-x(<span class="number">2</span>)^<span class="number">2</span> +x(<span class="number">1</span>)*x(<span class="number">2</span>)+<span class="number">2</span>*x(<span class="number">1</span>)+<span class="number">5</span>*x(<span class="number">2</span>) ; </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">这是非线性约束</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[c,ceq]</span> = <span class="title">nonlfun1</span><span class="params">(x)</span></span></span><br><span class="line">    <span class="comment">% 注意：这里的c实际上就是非线性不等式约束，ceq实际上就是非线性等式约束</span></span><br><span class="line">    <span class="comment">% 输入值x实际上就是决策变量，由x1和x2组成的一个向量</span></span><br><span class="line">    <span class="comment">% 返回值有两个，一个是非线性不等式约束c，一个是非线性等式约束ceq</span></span><br><span class="line">    <span class="comment">% nonlfun1是函数名称，到时候会被fmincon函数调用, 可以任意取名，但不能和目标函数fun1重名</span></span><br><span class="line">    <span class="comment">% 保存的m文件和函数名称得一致，也要为nonlfun1.m</span></span><br><span class="line"><span class="comment">%     -(x1-1)^2 +x2 &gt;= 0 </span></span><br><span class="line">   c = [(x(<span class="number">1</span>)<span class="number">-1</span>)^<span class="number">2</span>-x(<span class="number">2</span>)];   <span class="comment">% 千万別写成了: (x1-1)^2 -x2</span></span><br><span class="line">   ceq = [];  <span class="comment">% 不存在非线性等式约束，所以用[]表示</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 使用其他算法对例题1求解</span></span><br><span class="line"><span class="comment">% edit fmincon  % 查看fmincon的“源代码”</span></span><br><span class="line"><span class="comment">% Matlab2017a默认使用的算法是&#x27;interior-point&#x27; 内点法</span></span><br><span class="line"><span class="comment">% 使用interior point算法 （内点法）</span></span><br><span class="line">option = optimoptions(<span class="string">&#x27;fmincon&#x27;</span>,<span class="string">&#x27;Algorithm&#x27;</span>,<span class="string">&#x27;interior-point&#x27;</span>)</span><br><span class="line">[x,fval] = fmincon(@fun1,x0,A,b,[],[],[],[],@nonlfun1,option)  </span><br><span class="line">fval = -fval</span><br><span class="line"><span class="comment">% 使用SQP算法 （序列二次规划法）</span></span><br><span class="line">option = optimoptions(<span class="string">&#x27;fmincon&#x27;</span>,<span class="string">&#x27;Algorithm&#x27;</span>,<span class="string">&#x27;sqp&#x27;</span>)</span><br><span class="line">[x,fval] = fmincon(@fun1,x0,A,b,[],[],[],[],@nonlfun1,option)  </span><br><span class="line">fval = -fval   <span class="comment">%得到-4.358，远远大于内点法得到的-1,猜想是初始值的影响</span></span><br><span class="line"><span class="comment">% 改变初始值试试</span></span><br><span class="line">x0 = [<span class="number">1</span> <span class="number">1</span>];  <span class="comment">%任意给定一个初始值 </span></span><br><span class="line">[x,fval] = fmincon(@fun1,x0,A,b,[],[],[],[],@nonlfun1,option)  <span class="comment">% 最小值为-1，和内点法相同（这说明内点法的适应性要好）</span></span><br><span class="line">fval = -fval  </span><br><span class="line"><span class="comment">% 使用active set算法 （有效集法）</span></span><br><span class="line">option = optimoptions(<span class="string">&#x27;fmincon&#x27;</span>,<span class="string">&#x27;Algorithm&#x27;</span>,<span class="string">&#x27;active-set&#x27;</span>)</span><br><span class="line">[x,fval] = fmincon(@fun1,x0,A,b,[],[],[],[],@nonlfun1,option)</span><br><span class="line">fval = -fval  </span><br><span class="line"><span class="comment">% 使用trust region reflective (信赖域反射算法)</span></span><br><span class="line">option = optimoptions(<span class="string">&#x27;fmincon&#x27;</span>,<span class="string">&#x27;Algorithm&#x27;</span>,<span class="string">&#x27;trust-region-reflective&#x27;</span>)</span><br><span class="line">[x,fval] = fmincon(@fun1,x0,A,b,[],[],[],[],@nonlfun1,option)  </span><br><span class="line">fval = -fval  </span><br><span class="line"><span class="comment">% this algorithm does not solve problems with the constraints you have specified. </span></span><br><span class="line"><span class="comment">% 这说明这个算法不适用我们这个约束条件，所以以后遇到了不能求解的情况，记得更换其他算法试试！！！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 选取初始值得到的结果可能会不满足限定条件，出现了一个Bug 因此选择的初始值很重要</span></span><br><span class="line">x0 = [<span class="number">40.8</span>, <span class="number">10.8</span>];</span><br><span class="line">option = optimoptions(<span class="string">&#x27;fmincon&#x27;</span>,<span class="string">&#x27;Algorithm&#x27;</span>,<span class="string">&#x27;interior-point&#x27;</span>)</span><br><span class="line">[x,fval] = fmincon(@fun1,x0,A,b,[],[],[],[],@nonlfun1,option)  </span><br><span class="line">fval = -fval  </span><br><span class="line"><span class="comment">% https://cn.mathworks.com/help/optim/ug/fmincon.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 生成不同的随机初始值来优化代码，有一定几率会触发上面那个Bug，因此不推荐</span></span><br><span class="line">n = <span class="number">10</span>;  <span class="comment">% 重复n次</span></span><br><span class="line">Fval = +<span class="built_in">inf</span>; X = [<span class="number">0</span>,<span class="number">0</span>];  <span class="comment">%初始化最优的结果</span></span><br><span class="line">A = [<span class="number">-2</span> <span class="number">3</span>]; b = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n</span><br><span class="line">    x0 = [<span class="built_in">rand</span>()*<span class="number">10</span> , <span class="built_in">rand</span>()*<span class="number">10</span>];  <span class="comment">%用随机数生成一个初始值（随机数的范围自己根据题目条件设置） </span></span><br><span class="line">    [x,fval] = fmincon(@fun1,x0,A,b,[],[],[],[],@nonlfun1,option); <span class="comment">% 注意 fun1.m文件和nonlfun1.m文件都必须在当前文件夹目录下</span></span><br><span class="line">    <span class="keyword">if</span> fval &lt; Fval  <span class="comment">% 如果找到了更小的值，那么就代替最优的结果</span></span><br><span class="line">        Fval = fval;</span><br><span class="line">        X = x;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">Fval = -Fval</span><br><span class="line">X</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 使用蒙特卡罗的方法来找初始值(推荐）</span></span><br><span class="line">clc,clear;</span><br><span class="line">n=<span class="number">10000000</span>; <span class="comment">%生成的随机数组数</span></span><br><span class="line">x1=unifrnd(<span class="number">-100</span>,<span class="number">100</span>,n,<span class="number">1</span>);  <span class="comment">% 生成在[-100,100]之间均匀分布的随机数组成的n行1列的向量构成x1</span></span><br><span class="line">x2=unifrnd(<span class="number">-100</span>,<span class="number">100</span>,n,<span class="number">1</span>);  <span class="comment">% 生成在[-100,100]之间均匀分布的随机数组成的n行1列的向量构成x2</span></span><br><span class="line">fmin=+<span class="built_in">inf</span>; <span class="comment">% 初始化函数f的最小值为正无穷（后续只要找到一个比它小的我们就对其更新）</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:n</span><br><span class="line">    x = [x1(<span class="built_in">i</span>), x2(<span class="built_in">i</span>)];  <span class="comment">%构造x向量, 这里千万别写成了：x =[x1, x2]</span></span><br><span class="line">    <span class="keyword">if</span> ((x(<span class="number">1</span>)<span class="number">-1</span>)^<span class="number">2</span>-x(<span class="number">2</span>)&lt;=<span class="number">0</span>)  &amp; (<span class="number">-2</span>*x(<span class="number">1</span>)+<span class="number">3</span>*x(<span class="number">2</span>)<span class="number">-6</span> &lt;= <span class="number">0</span>)     <span class="comment">% 判断是否满足条件</span></span><br><span class="line">        result = -x(<span class="number">1</span>)^<span class="number">2</span>-x(<span class="number">2</span>)^<span class="number">2</span> +x(<span class="number">1</span>)*x(<span class="number">2</span>)+<span class="number">2</span>*x(<span class="number">1</span>)+<span class="number">5</span>*x(<span class="number">2</span>) ;  <span class="comment">% 如果满足条件就计算函数值</span></span><br><span class="line">        <span class="keyword">if</span>  result  &lt; fmin  <span class="comment">% 如果这个函数值小于我们之前计算出来的最小值</span></span><br><span class="line">            fmin = result;  <span class="comment">% 那么就更新这个函数值为新的最小值</span></span><br><span class="line">            x0 = x;  <span class="comment">% 并且将此时的x1 x2更新为初始值</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;蒙特卡罗选取的初始值为：&#x27;</span>); <span class="built_in">disp</span>(x0)</span><br><span class="line">A = [<span class="number">-2</span> <span class="number">3</span>]; b = <span class="number">6</span>;</span><br><span class="line">[x,fval] = fmincon(@fun1,x0,A,b,[],[],[],[],@nonlfun1)</span><br><span class="line">fval = -fval  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="例题二"><a href="#例题二" class="headerlink" title="例题二"></a>例题二</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% 例题二的求解</span></span><br><span class="line">x0 = [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span>];  <span class="comment">%任意给定一个初始值 </span></span><br><span class="line">lb = [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>];  <span class="comment">% 决策变量的下界</span></span><br><span class="line">[x,fval] = fmincon(@fun2,x0,[],[],[],[],lb,[],@nonlfun2)  <span class="comment">% 注意 fun2.m文件和nonfun2.m文件都必须在当前文件夹目录下</span></span><br><span class="line"><span class="comment">% x =</span></span><br><span class="line"><span class="comment">%          0.552167405729277          1.20325915507969         0.947824046150443</span></span><br><span class="line"><span class="comment">% fval =</span></span><br><span class="line"><span class="comment">%           10.6510918606939</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 使用蒙特卡罗的方法来找初始值(推荐）</span></span><br><span class="line">clc,clear;</span><br><span class="line">n=<span class="number">1000000</span>; <span class="comment">%生成的随机数组数</span></span><br><span class="line">x1= unifrnd(<span class="number">0</span>,<span class="number">2</span>,n,<span class="number">1</span>);   <span class="comment">% 生成在[0,2]之间均匀分布的随机数组成的n行1列的向量构成x1</span></span><br><span class="line">x2 = <span class="built_in">sqrt</span>(<span class="number">2</span>-x1);  <span class="comment">% 根据非线性等式约束用x1计算出x2</span></span><br><span class="line">x3 = <span class="built_in">sqrt</span>((<span class="number">3</span>-x2)/<span class="number">2</span>); <span class="comment">% 根据非线性等式约束用x2计算出x3</span></span><br><span class="line">fmin=+<span class="built_in">inf</span>; <span class="comment">% 初始化函数f的最小值为正无穷（后续只要找到一个比它小的我们就对其更新）</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:n</span><br><span class="line">    x = [x1(<span class="built_in">i</span>), x2(<span class="built_in">i</span>), x3(<span class="built_in">i</span>)];  <span class="comment">%构造x向量, 这里千万别写成了：x =[x1, x2, x3]</span></span><br><span class="line">    <span class="keyword">if</span> (-x(<span class="number">1</span>)^<span class="number">2</span>+x(<span class="number">2</span>)-x(<span class="number">3</span>)^<span class="number">2</span>&lt;=<span class="number">0</span>) &amp; (x(<span class="number">1</span>)+x(<span class="number">2</span>)^<span class="number">2</span>+x(<span class="number">3</span>)^<span class="number">2</span><span class="number">-20</span>&lt;=<span class="number">0</span>)   <span class="comment">% 判断是否满足条件</span></span><br><span class="line">        result =sum(x.*x) + <span class="number">8</span> ;  <span class="comment">% 如果满足条件就计算函数值</span></span><br><span class="line">        <span class="keyword">if</span>  result  &lt; fmin  <span class="comment">% 如果这个函数值小于我们之前计算出来的最小值</span></span><br><span class="line">            fmin = result;  <span class="comment">% 那么就更新这个函数值为新的最小值</span></span><br><span class="line">            x0 = x;  <span class="comment">% 并且将此时的x1 x2 x3更新为初始值</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;蒙特卡罗选取的初始值为：&#x27;</span>); <span class="built_in">disp</span>(x0)</span><br><span class="line">lb = [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>];  <span class="comment">% 决策变量的下界</span></span><br><span class="line">[x,fval] = fmincon(@fun2,x0,[],[],[],[],lb,[],@nonlfun2)  <span class="comment">% 注意 fun2.m文件和nonfun2.m文件都必须在当前文件夹目录下</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> = <span class="title">fun2</span><span class="params">(x)</span></span></span><br><span class="line">    <span class="comment">%     f = x(1)^2+x(2)^2 +x(3)^2+8 ; </span></span><br><span class="line">    f = sum(x.*x) + <span class="number">8</span>;  <span class="comment">% 可别忘了x实际上是一个向量，我们可以使用矩阵的运算符号对其计算</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="例题三"><a href="#例题三" class="headerlink" title="例题三"></a>例题三</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% 例题三的求解(蒙特卡罗模拟那一讲的例题)</span></span><br><span class="line">clear;clc</span><br><span class="line"><span class="comment">% 蒙特卡罗模拟得到的最大值为3445.6014</span></span><br><span class="line"><span class="comment">% 最大值处x1 x2 x3的取值为：</span></span><br><span class="line"><span class="comment">%           22.5823101903968          12.5823101903968          12.1265223966757</span></span><br><span class="line">A = [<span class="number">1</span> <span class="number">-2</span> <span class="number">-2</span>;  <span class="number">1</span> <span class="number">2</span> <span class="number">2</span>];  b = [<span class="number">0</span> <span class="number">72</span>];</span><br><span class="line">x0 = [ <span class="number">22.58</span>   <span class="number">12.58</span>  <span class="number">12.13</span>];</span><br><span class="line">Aeq = [<span class="number">1</span> <span class="number">-1</span> <span class="number">0</span>]; beq = <span class="number">10</span>;</span><br><span class="line">lb = [-<span class="built_in">inf</span> <span class="number">10</span> -<span class="built_in">inf</span>];  ub = [<span class="built_in">inf</span> <span class="number">20</span> <span class="built_in">inf</span>];  </span><br><span class="line">[x,fval] = fmincon(@fun3,x0,A,b,Aeq,beq,lb,ub,[])  <span class="comment">% 注意没有非线性约束，所以这里可以用[]替代，或者干脆不写</span></span><br><span class="line">fval = -fval</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> = <span class="title">fun3</span><span class="params">(x)</span></span></span><br><span class="line">    f = -prod(x);  <span class="comment">% 可别忘了x实际上是一个向量（prod表示连乘符号，用法和sum类似）</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="选址问题"><a href="#选址问题" class="headerlink" title="选址问题"></a>选址问题</h3><blockquote>
<p>背景</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129110524287-1706585735308-9.png" alt="image-20240129110524287"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129110713468-1706585735308-10.png" alt="image-20240129110713468"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% 选址问题</span></span><br><span class="line">clear;clc</span><br><span class="line">format long g   <span class="comment">%可以将Matlab的计算结果显示为一般的长数字格式（默认会保留四位小数，或使用科学计数法）</span></span><br><span class="line"><span class="comment">% % (1) 系数向量（原来线性规划问题的写法,我们只需要在此基础上改动一点就可以了）</span></span><br><span class="line"><span class="comment">% a=[1.25  8.75  0.5  5.75  3  7.25];  % 工地的横坐标</span></span><br><span class="line"><span class="comment">% b=[1.25  0.75  4.75	5  6.5  7.25];   % 工地的纵坐标</span></span><br><span class="line"><span class="comment">% x = [5  2];  % 料场的横坐标</span></span><br><span class="line"><span class="comment">% y = [1  7];  % 料场的纵坐标</span></span><br><span class="line"><span class="comment">% c = [];  % 初始化用来保存工地和料场距离的向量 (这个向量就是我们的系数向量）</span></span><br><span class="line"><span class="comment">% for  j =1:2</span></span><br><span class="line"><span class="comment">%     for i = 1:6</span></span><br><span class="line"><span class="comment">%         c = [c;  sqrt( (a(i)-x(j))^2 + (b(i)-y(j))^2)];  % 每循环一次就在c的末尾插入新的元素</span></span><br><span class="line"><span class="comment">%     end</span></span><br><span class="line"><span class="comment">% end</span></span><br><span class="line"><span class="comment">% (2) 不等式约束</span></span><br><span class="line">A =<span class="built_in">zeros</span>(<span class="number">2</span>,<span class="number">16</span>);  <span class="comment">% 注意这里要改成16</span></span><br><span class="line">A(<span class="number">1</span>,<span class="number">1</span>:<span class="number">6</span>) = <span class="number">1</span>;</span><br><span class="line">A(<span class="number">2</span>,<span class="number">7</span>:<span class="number">12</span>) = <span class="number">1</span>;</span><br><span class="line">b = [<span class="number">20</span>,<span class="number">20</span>]&#x27;;</span><br><span class="line"><span class="comment">% (3) 等式约束</span></span><br><span class="line">Aeq = <span class="built_in">zeros</span>(<span class="number">6</span>,<span class="number">16</span>);  <span class="comment">% 注意这里要改成16</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">6</span></span><br><span class="line">    Aeq(<span class="built_in">i</span>,<span class="built_in">i</span>) = <span class="number">1</span>;  Aeq(<span class="built_in">i</span>,<span class="built_in">i</span>+<span class="number">6</span>) = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">beq = [<span class="number">3</span> <span class="number">5</span> <span class="number">4</span> <span class="number">7</span> <span class="number">6</span> <span class="number">11</span>]&#x27;;  <span class="comment">% 每个工地的日需求量</span></span><br><span class="line"><span class="comment">%（4）上下界</span></span><br><span class="line">lb = <span class="built_in">zeros</span>(<span class="number">16</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">% lb = [zeros(12,1); -inf*ones(4,1)];  两个新料场坐标的下界可以设为-inf</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 进行求解</span></span><br><span class="line"><span class="comment">% 注意哦，这里我们只尝试了这一个初始值，大家可以试试其他的初始值，有可能能够找到更好的解。</span></span><br><span class="line"><span class="comment">% 未来我会在遗传算法中再来看这个例题。</span></span><br><span class="line">x0 = [<span class="number">3</span> <span class="number">5</span> <span class="number">0</span> <span class="number">7</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">4</span> <span class="number">0</span> <span class="number">6</span> <span class="number">10</span> <span class="number">5</span> <span class="number">1</span> <span class="number">2</span> <span class="number">7</span>];  <span class="comment">% 用第一问的结果作为初始值</span></span><br><span class="line">[x,fval] = fmincon(@fun5,x0,A,b,Aeq,beq,lb)  <span class="comment">% 注意没有非线性约束，所以这里可以用[]替代，或者干脆不写</span></span><br><span class="line"><span class="built_in">reshape</span>(x(<span class="number">1</span>:<span class="number">12</span>),<span class="number">6</span>,<span class="number">2</span>)  <span class="comment">% 将x的前12个元素变为6行2列便于观察（reshape函数是按照列的顺序进行转换的，也就是第一列读完，读第二列，即x1对应x_1,1，x2对应x_2,1）</span></span><br><span class="line"><span class="comment">% 新坐标（5.74，4.99） （7.25，7.25）</span></span><br><span class="line"><span class="comment">% fval =</span></span><br><span class="line"><span class="comment">%           89.9231692432933</span></span><br><span class="line"><span class="comment">% 第一问的fval =</span></span><br><span class="line"><span class="comment">%           135.281541790676</span></span><br><span class="line"><span class="number">135.281541790676</span> - <span class="number">89.9231692432933</span>  <span class="comment">%  45.3583725473827</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> = <span class="title">fun5</span><span class="params">(xx)</span>  % 注意为了避免和下面的<span class="title">x</span>同号，我们把决策变量的向量符号用<span class="title">xx</span>表示（注意<span class="title">xx</span>的长度为16）</span></span><br><span class="line">    a=[<span class="number">1.25</span>  <span class="number">8.75</span>  <span class="number">0.5</span>  <span class="number">5.75</span>  <span class="number">3</span>  <span class="number">7.25</span>];  <span class="comment">% 工地的横坐标</span></span><br><span class="line">    b=[<span class="number">1.25</span>  <span class="number">0.75</span>  <span class="number">4.75</span>	<span class="number">5</span>  <span class="number">6.5</span>  <span class="number">7.25</span>];   <span class="comment">% 工地的纵坐标</span></span><br><span class="line">    x = [xx(<span class="number">13</span>)  xx(<span class="number">15</span>)];  <span class="comment">% 新料场的横坐标</span></span><br><span class="line">    y = [xx(<span class="number">14</span>)  xx(<span class="number">16</span>)];  <span class="comment">% 新料场的纵坐标</span></span><br><span class="line">    c = [];  <span class="comment">% 初始化用来保存工地和料场距离的向量 (这个向量就是我们的系数向量）</span></span><br><span class="line">    <span class="keyword">for</span>  <span class="built_in">j</span> =<span class="number">1</span>:<span class="number">2</span></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">6</span></span><br><span class="line">            c = [c;  <span class="built_in">sqrt</span>( (a(<span class="built_in">i</span>)-x(<span class="built_in">j</span>))^<span class="number">2</span> + (b(<span class="built_in">i</span>)-y(<span class="built_in">j</span>))^<span class="number">2</span>)];  <span class="comment">% 每循环一次就在c的末尾插入新的元素</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">% 下面我们要求吨千米数，注意c是列向量，我们计算非线性规划时给定的初始值x0是行向量</span></span><br><span class="line">    f = xx(<span class="number">1</span>:<span class="number">12</span>) * c;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="最大最小化模型"><a href="#最大最小化模型" class="headerlink" title="最大最小化模型"></a>最大最小化模型</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129005314765.png" alt="image-20240129005314765"></p>
<h4 id="典型例题"><a href="#典型例题" class="headerlink" title="典型例题"></a>典型例题</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129005430279.png" alt="image-20240129005430279"></p>
<h3 id="模型求解"><a href="#模型求解" class="headerlink" title="模型求解"></a>模型求解</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129005556115.png" alt="image-20240129005556115"> </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% 最大最小化模型  :   min&#123;max[f1,f2,···,fm]&#125;</span></span><br><span class="line">x0 = [<span class="number">6</span>, <span class="number">6</span>];      <span class="comment">% 给定初始值</span></span><br><span class="line">lb = [<span class="number">3</span>, <span class="number">4</span>];  <span class="comment">% 决策变量的下界</span></span><br><span class="line">ub = [<span class="number">8</span>, <span class="number">10</span>];  <span class="comment">% 决策变量的上界</span></span><br><span class="line">[x,feval] = fminimax(@Fun,x0,[],[],[],[],lb,ub)</span><br><span class="line"><span class="built_in">max</span>(feval)</span><br><span class="line"><span class="comment">% x =</span></span><br><span class="line"><span class="comment">%     8.0000    8.5000</span></span><br><span class="line"><span class="comment">% feval =</span></span><br><span class="line"><span class="comment">%    13.5000    5.5000    5.5000   12.5000    8.5000    8.5000    5.5000   13.5000    9.5000    0.5000</span></span><br><span class="line"><span class="comment">% 结论：</span></span><br><span class="line"><span class="comment">% 在坐标为(8,8.5)处建立供应中心可以使该点到各需求点的最大距离最小，最小的最大距离为13.5单位。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> = <span class="title">Fun</span><span class="params">(x)</span></span></span><br><span class="line">    a=[<span class="number">1</span> <span class="number">4</span> <span class="number">3</span> <span class="number">5</span> <span class="number">9</span> <span class="number">12</span> <span class="number">6</span> <span class="number">20</span> <span class="number">17</span> <span class="number">8</span>];</span><br><span class="line">    b=[<span class="number">2</span> <span class="number">10</span> <span class="number">8</span> <span class="number">18</span> <span class="number">1</span> <span class="number">4</span> <span class="number">5</span> <span class="number">10</span> <span class="number">8</span> <span class="number">9</span>];</span><br><span class="line">    <span class="comment">%  函数向量</span></span><br><span class="line">    f=<span class="built_in">zeros</span>(<span class="number">10</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">10</span></span><br><span class="line">        f(<span class="built_in">i</span>) = <span class="built_in">abs</span>(x(<span class="number">1</span>)-a(<span class="built_in">i</span>))+<span class="built_in">abs</span>(x(<span class="number">2</span>)-b(<span class="built_in">i</span>));  </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="comment">% f(1) = abs(x(1)-a(1))+abs(x(2)-b(1));  </span></span><br><span class="line"><span class="comment">% f(2) = abs(x(1)-a(2))+abs(x(2)-b(2));</span></span><br><span class="line"><span class="comment">% f(3) = abs(x(1)-a(3))+abs(x(2)-b(3));</span></span><br><span class="line"><span class="comment">% f(4) = abs(x(1)-a(4))+abs(x(2)-b(4));</span></span><br><span class="line"><span class="comment">% f(5) = abs(x(1)-a(5))+abs(x(2)-b(5));</span></span><br><span class="line"><span class="comment">% f(6) = abs(x(1)-a(6))+abs(x(2)-b(6));</span></span><br><span class="line"><span class="comment">% f(7) = abs(x(1)-a(7))+abs(x(2)-b(7));</span></span><br><span class="line"><span class="comment">% f(8) = abs(x(1)-a(8))+abs(x(2)-b(8));</span></span><br><span class="line"><span class="comment">% f(9) = abs(x(1)-a(9))+abs(x(2)-b(9));</span></span><br><span class="line"><span class="comment">% f(10) = abs(x(1)-a(10))+abs(x(2)-b(10));</span></span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="多目标规划问题"><a href="#多目标规划问题" class="headerlink" title="多目标规划问题"></a>多目标规划问题</h3><h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129010114001.png" alt="image-20240129010114001"></p>
<p>可能标准化，正向化，还有权重</p>
<h4 id="例题："><a href="#例题：" class="headerlink" title="例题："></a>例题：</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129010157820.png" alt="image-20240129010157820"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129010334935.png" alt="image-20240129010334935"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129010535787.png" alt="image-20240129010535787"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%  多目标规划问题</span></span><br><span class="line">w1 = <span class="number">0.4</span>;  w2 = <span class="number">0.6</span>;  <span class="comment">% 两个目标函数的权重  x1 = 5  x2 = 2</span></span><br><span class="line">w1 = <span class="number">0.5</span>;  w2 = <span class="number">0.5</span>;  <span class="comment">% 两个目标函数的权重  x1 = 5  x2 = 2</span></span><br><span class="line">w1 = <span class="number">0.3</span>;  w2 = <span class="number">0.7</span>;  <span class="comment">% 两个目标函数的权重  x1 = 1  x2 = 6</span></span><br><span class="line">c = [w1/<span class="number">30</span>*<span class="number">2</span>+w2/<span class="number">2</span>*<span class="number">0.4</span> ;w1/<span class="number">30</span>*<span class="number">5</span>+w2/<span class="number">2</span>*<span class="number">0.3</span>];  <span class="comment">% 线性规划目标函数的系数</span></span><br><span class="line">A = [<span class="number">-1</span> <span class="number">-1</span>];  b = <span class="number">-7</span>; <span class="comment">% 不等式约束</span></span><br><span class="line">lb = [<span class="number">0</span> <span class="number">0</span>]&#x27;; ub = [<span class="number">5</span> <span class="number">6</span>]&#x27;; <span class="comment">% 上下界</span></span><br><span class="line">[x,fval] = linprog(c,A,b,[],[],lb,ub)</span><br><span class="line">f1 = <span class="number">2</span>*x(<span class="number">1</span>)+<span class="number">5</span>*x(<span class="number">2</span>)</span><br><span class="line">f2 = <span class="number">0.4</span>*x(<span class="number">1</span>) + <span class="number">0.3</span>*x(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 敏感性分析 </span></span><br><span class="line">clear;clc</span><br><span class="line">W1 = <span class="number">0.1</span>:<span class="number">0.001</span>:<span class="number">0.5</span>;  W2 = <span class="number">1</span>- W1;  </span><br><span class="line">n =<span class="built_in">length</span>(W1);</span><br><span class="line">F1 = <span class="built_in">zeros</span>(n,<span class="number">1</span>);  F2 = <span class="built_in">zeros</span>(n,<span class="number">1</span>);   X1 = <span class="built_in">zeros</span>(n,<span class="number">1</span>);  X2 = <span class="built_in">zeros</span>(n,<span class="number">1</span>);   FVAL = <span class="built_in">zeros</span>(n,<span class="number">1</span>);</span><br><span class="line">A = [<span class="number">-1</span> <span class="number">-1</span>];  b = <span class="number">-7</span>; <span class="comment">% 不等式约束</span></span><br><span class="line">lb = [<span class="number">0</span> <span class="number">0</span>]; ub = [<span class="number">5</span> <span class="number">6</span>]; <span class="comment">% 上下界</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n</span><br><span class="line">    w1 = W1(<span class="built_in">i</span>);  w2 = W2(<span class="built_in">i</span>);</span><br><span class="line">    c = [w1/<span class="number">30</span>*<span class="number">2</span>+w2/<span class="number">2</span>*<span class="number">0.4</span> ;w1/<span class="number">30</span>*<span class="number">5</span>+w2/<span class="number">2</span>*<span class="number">0.3</span>];  <span class="comment">% 线性规划目标函数的系数</span></span><br><span class="line">    [x,fval] = linprog(c,A,b,[],[],lb,ub);</span><br><span class="line">    F1(<span class="built_in">i</span>) = <span class="number">2</span>*x(<span class="number">1</span>)+<span class="number">5</span>*x(<span class="number">2</span>);</span><br><span class="line">    F2(<span class="built_in">i</span>) = <span class="number">0.4</span>*x(<span class="number">1</span>) + <span class="number">0.3</span>*x(<span class="number">2</span>);</span><br><span class="line">    X1(<span class="built_in">i</span>) = x(<span class="number">1</span>);</span><br><span class="line">    X2(<span class="built_in">i</span>) = x(<span class="number">2</span>);</span><br><span class="line">    FVAL(<span class="built_in">i</span>) = fval;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 「Matlab」“LaTex字符汇总”讲解：https://blog.csdn.net/Robot_Starscream/article/details/89386748</span></span><br><span class="line"><span class="comment">% 在图上可以加上数据游标，按住Alt加鼠标左键可以设置多个数据游标出来。</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>) </span><br><span class="line"><span class="built_in">plot</span>(W1,F1,W1,F2)</span><br><span class="line">xlabel(<span class="string">&#x27;f_&#123;1&#125;的权重&#x27;</span>) </span><br><span class="line">ylabel(<span class="string">&#x27;f_&#123;1&#125;和f_&#123;2&#125;的取值&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;f_&#123;1&#125;&#x27;</span>,<span class="string">&#x27;f_&#123;2&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">plot</span>(W1,X1,W1,X2)</span><br><span class="line">xlabel(<span class="string">&#x27;f_&#123;1&#125;的权重&#x27;</span>) </span><br><span class="line">ylabel(<span class="string">&#x27;x_&#123;1&#125;和x_&#123;2&#125;的取值&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;x_&#123;1&#125;&#x27;</span>,<span class="string">&#x27;x_&#123;2&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">plot</span>(W1,FVAL)  <span class="comment">% 看起来是两个直线组合起来的下半部分</span></span><br><span class="line">xlabel(<span class="string">&#x27;f_&#123;1&#125;的权重&#x27;</span>) </span><br><span class="line">ylabel(<span class="string">&#x27;综合指标的值&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="主成分分析"><a href="#主成分分析" class="headerlink" title="主成分分析"></a>主成分分析</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130113809842.png" alt="image-20240130113809842"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240130113819544.png" alt="image-20240130113819544"></p>
<blockquote>
<p>主成分分析法</p>
<p>综述：数据降维的方法</p>
<p>可以用一种线性变换的思想去理解，比如二维的一条直线，我们可以通过变换，使得这一条直线落在x或y轴上，达到降维的效果。</p>
<p>去中心化（把坐标原点放在数据中心）</p>
<p>找坐标系，找到数据方差最大的方向，就是第一主成分。（如果第一主成分不足以表达，就考虑吧选取第二个）</p>
<p>为了有效反映原来信息，第一主成分和第二主成分的协方差为0.以此类推可以获得p个主成分。这些主成分是互不相关，是依次递减的。</p>
<p>累计方差贡献率大于百分之80就可以了，或者特征根大于1就可以了。</p>
<p>？根据线性代数的知识，我们需要一则伸缩，二则旋转，伸缩不是问题</p>
<p>旋转的矩阵R又从何而来？</p>
<p>即是协方差矩阵的特征向量就是R。</p>
<p>协方差定义=</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\b4c05a2fa4534b348766263f53609b76.png" alt="img"></p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129173904717.png" alt="image-20240129173904717"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129173917094.png" alt="image-20240129173917094"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129173940409.png" alt="image-20240129173940409"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129173956777.png" alt="image-20240129173956777"></p>
<h4 id="例题：-1"><a href="#例题：-1" class="headerlink" title="例题："></a>例题：</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129174252433.png" alt="image-20240129174252433"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129174259805.png" alt="image-20240129174259805"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129174305765.png" alt="image-20240129174305765"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">clear;clc</span><br><span class="line"> load data1.mat   <span class="comment">% 主成分聚类</span></span><br><span class="line"><span class="comment">%  load data2.mat   % 主成分回归</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 注意，这里可以对数据先进行描述性统计</span></span><br><span class="line"><span class="comment">% 描述性统计的内容见第5讲.相关系数</span></span><br><span class="line">[n,p] = <span class="built_in">size</span>(x);  <span class="comment">% n是样本个数，p是指标个数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 第一步：对数据x标准化为X</span></span><br><span class="line">X=zscore(x);   <span class="comment">% matlab内置的标准化函数（x-mean(x)）/std(x)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 第二步：计算样本协方差矩阵</span></span><br><span class="line">R = cov(X);</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 注意：以上两步可合并为下面一步：直接计算样本相关系数矩阵</span></span><br><span class="line">R = corrcoef(x);</span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;样本相关系数矩阵为：&#x27;</span>)</span><br><span class="line"><span class="built_in">disp</span>(R)</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 第三步：计算R的特征值和特征向量</span></span><br><span class="line"><span class="comment">% 注意：R是半正定矩阵，所以其特征值不为负数</span></span><br><span class="line"><span class="comment">% R同时是对称矩阵，Matlab计算对称矩阵时，会将特征值按照从小到大排列哦</span></span><br><span class="line"><span class="comment">% eig函数的详解见第一讲层次分析法的视频</span></span><br><span class="line">[V,D] = eig(R);  <span class="comment">% V 特征向量矩阵  D 特征值构成的对角矩阵</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 第四步：计算主成分贡献率和累计贡献率</span></span><br><span class="line">lambda = <span class="built_in">diag</span>(D);  <span class="comment">% diag函数用于得到一个矩阵的主对角线元素值(返回的是列向量)</span></span><br><span class="line">lambda = lambda(<span class="keyword">end</span>:<span class="number">-1</span>:<span class="number">1</span>);  <span class="comment">% 因为lambda向量是从小大到排序的，我们将其调个头</span></span><br><span class="line">contribution_rate = lambda / sum(lambda);  <span class="comment">% 计算贡献率</span></span><br><span class="line">cum_contribution_rate = cumsum(lambda)/ sum(lambda);   <span class="comment">% 计算累计贡献率  cumsum是求累加值的函数</span></span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;特征值为：&#x27;</span>)</span><br><span class="line"><span class="built_in">disp</span>(lambda&#x27;)  <span class="comment">% 转置为行向量，方便展示</span></span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;贡献率为：&#x27;</span>)</span><br><span class="line"><span class="built_in">disp</span>(contribution_rate&#x27;)</span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;累计贡献率为：&#x27;</span>)</span><br><span class="line"><span class="built_in">disp</span>(cum_contribution_rate&#x27;)</span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;与特征值对应的特征向量矩阵为：&#x27;</span>)</span><br><span class="line"><span class="comment">% 注意：这里的特征向量要和特征值一一对应，之前特征值相当于颠倒过来了，因此特征向量的各列需要颠倒过来</span></span><br><span class="line"><span class="comment">%  rot90函数可以使一个矩阵逆时针旋转90度，然后再转置，就可以实现将矩阵的列颠倒的效果</span></span><br><span class="line">V=<span class="built_in">rot90</span>(V)&#x27;;</span><br><span class="line"><span class="built_in">disp</span>(V)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 计算我们所需要的主成分的值</span></span><br><span class="line">m =input(<span class="string">&#x27;请输入需要保存的主成分的个数:  &#x27;</span>);</span><br><span class="line">F = <span class="built_in">zeros</span>(n,m);  <span class="comment">%初始化保存主成分的矩阵（每一列是一个主成分）</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:m</span><br><span class="line">    ai = V(:,<span class="built_in">i</span>)&#x27;;   <span class="comment">% 将第i个特征向量取出，并转置为行向量</span></span><br><span class="line">    Ai = <span class="built_in">repmat</span>(ai,n,<span class="number">1</span>);   <span class="comment">% 将这个行向量重复n次，构成一个n*p的矩阵</span></span><br><span class="line">    F(:, <span class="built_in">i</span>) = sum(Ai .* X, <span class="number">2</span>);  <span class="comment">% 注意，对标准化的数据求了权重后要计算每一行的和</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% (1)主成分聚类 ： 将主成分指标所在的F矩阵复制到Excel表格，然后再用Spss进行聚类</span></span><br><span class="line"><span class="comment">% 在Excel第一行输入指标名称（F1,F2, ..., Fm）</span></span><br><span class="line"><span class="comment">% 双击Matlab工作区的F,进入变量编辑中，然后复制里面的数据到Excel表格</span></span><br><span class="line"><span class="comment">% 导出数据之后，我们后续的分析就可以在Spss中进行。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%%（2）主成分回归：将x使用主成分得到主成分指标，并将y标准化，接着导出到Excel，然后再使用Stata回归</span></span><br><span class="line"><span class="comment">% Y = zscore(y);  % 一定要将y进行标准化哦~</span></span><br><span class="line"><span class="comment">% 在Excel第一行输入指标名称（Y,F1, F2, ..., Fm）</span></span><br><span class="line"><span class="comment">% 分别双击Matlab工作区的Y和F,进入变量编辑中，然后复制里面的数据到Excel表格</span></span><br><span class="line"><span class="comment">% 导出数据之后，我们后续的分析就可以在Stata中进行。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="聚类分析"><a href="#聚类分析" class="headerlink" title="聚类分析"></a>聚类分析</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129194932249.png" alt="image-20240129194932249"></p>
<p>聚类不知道类别</p>
<h3 id="K-means聚类算法"><a href="#K-means聚类算法" class="headerlink" title="K-means聚类算法"></a>K-means聚类算法</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129194952521.png" alt="image-20240129194952521"></p>
<h4 id="流程图："><a href="#流程图：" class="headerlink" title="流程图："></a>流程图：</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129195121059.png" alt="image-20240129195121059"></p>
<h4 id="优缺点分析"><a href="#优缺点分析" class="headerlink" title="优缺点分析"></a>优缺点分析</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129195132844.png" alt="image-20240129195132844"></p>
<h3 id="K-means-算法"><a href="#K-means-算法" class="headerlink" title="K-means++算法"></a>K-means++算法</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129195226437.png" alt="image-20240129195226437"></p>
<h4 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129195330285.png" alt="image-20240129195330285"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129195405248.png" alt="image-20240129195405248"></p>
<h3 id="系统（层次）聚类"><a href="#系统（层次）聚类" class="headerlink" title="系统（层次）聚类"></a>系统（层次）聚类</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129195509250.png" alt="image-20240129195509250"></p>
<h4 id="距离计算"><a href="#距离计算" class="headerlink" title="距离计算"></a>距离计算</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129195530809.png" alt="image-20240129195530809"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129200236007.png" alt="image-20240129200236007"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129200246282.png" alt="image-20240129200246282"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129200254274.png" alt="image-20240129200254274"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129200321590.png" alt="image-20240129200321590"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129200335096.png" alt="image-20240129200335096"></p>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129200430566.png" alt="image-20240129200430566"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129200448939.png" alt="image-20240129200448939"></p>
<blockquote>
<p>会生成聚类谱系图，以此判断选择几类</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129200741109.png" alt="image-20240129200741109"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129200821668.png" alt="image-20240129200821668"></p>
<blockquote>
<p>详细操作见下博客</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/My_daily_life/article/details/120627516">SPSS操作(四)：系统聚类分析_聚类分析spss操作-CSDN博客</a></p>
<h3 id="DBSCAN-算法"><a href="#DBSCAN-算法" class="headerlink" title="DBSCAN 算法"></a>DBSCAN 算法</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129201052622.png" alt="image-20240129201052622"></p>
<p>基本概念</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129201312072.png" alt="image-20240129201312072"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129201355010.png" alt="image-20240129201355010"></p>
<p>代码</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">close all;</span><br><span class="line"></span><br><span class="line"><span class="comment">%% Load Data</span></span><br><span class="line"></span><br><span class="line">load mydata;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% Run DBSCAN Clustering Algorithm</span></span><br><span class="line"></span><br><span class="line">epsilon=<span class="number">0.5</span>;</span><br><span class="line">MinPts=<span class="number">10</span>;</span><br><span class="line">IDX=DBSCAN(X,epsilon,MinPts);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[IDX, isnoise]</span>=<span class="title">DBSCAN</span><span class="params">(X,epsilon,MinPts)</span></span></span><br><span class="line"></span><br><span class="line">    C=<span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    n=<span class="built_in">size</span>(X,<span class="number">1</span>);</span><br><span class="line">    IDX=<span class="built_in">zeros</span>(n,<span class="number">1</span>);  <span class="comment">% 初始化全部为0，即全部为噪音点</span></span><br><span class="line">    </span><br><span class="line">    D=pdist2(X,X);</span><br><span class="line">    </span><br><span class="line">    visited=<span class="built_in">false</span>(n,<span class="number">1</span>);</span><br><span class="line">    isnoise=<span class="built_in">false</span>(n,<span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:n</span><br><span class="line">        <span class="keyword">if</span> ~visited(<span class="built_in">i</span>)</span><br><span class="line">            visited(<span class="built_in">i</span>)=<span class="built_in">true</span>;</span><br><span class="line">            </span><br><span class="line">            Neighbors=RegionQuery(<span class="built_in">i</span>);</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">numel</span>(Neighbors)&lt;MinPts</span><br><span class="line">                <span class="comment">% X(i,:) is NOISE</span></span><br><span class="line">                isnoise(<span class="built_in">i</span>)=<span class="built_in">true</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                C=C+<span class="number">1</span>;</span><br><span class="line">                ExpandCluster(<span class="built_in">i</span>,Neighbors,C);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">ExpandCluster</span><span class="params">(i,Neighbors,C)</span></span></span><br><span class="line">        IDX(<span class="built_in">i</span>)=C;</span><br><span class="line">        </span><br><span class="line">        k = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> <span class="built_in">true</span></span><br><span class="line">            <span class="built_in">j</span> = Neighbors(k);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> ~visited(<span class="built_in">j</span>)</span><br><span class="line">                visited(<span class="built_in">j</span>)=<span class="built_in">true</span>;</span><br><span class="line">                Neighbors2=RegionQuery(<span class="built_in">j</span>);</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">numel</span>(Neighbors2)&gt;=MinPts</span><br><span class="line">                    Neighbors=[Neighbors Neighbors2];   <span class="comment">%#ok</span></span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">if</span> IDX(<span class="built_in">j</span>)==<span class="number">0</span></span><br><span class="line">                IDX(<span class="built_in">j</span>)=C;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            </span><br><span class="line">            k = k + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> k &gt; <span class="built_in">numel</span>(Neighbors)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Neighbors</span>=<span class="title">RegionQuery</span><span class="params">(i)</span></span></span><br><span class="line">        Neighbors=<span class="built_in">find</span>(D(<span class="built_in">i</span>,:)&lt;=epsilon);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>当然，让我逐行解释这段MATLAB代码：</p>
<ol>
<li><p><strong>clc; clear; close all;</strong></p>
<ul>
<li><code>clc</code>：清除命令窗口。</li>
<li><code>clear</code>：清除工作区中的所有变量。</li>
<li><code>close all</code>：关闭所有打开的图形窗口。</li>
</ul>
</li>
<li><p><strong>load mydata;</strong></p>
<ul>
<li>从名为 ‘mydata’ 的文件中加载数据到工作区。这里的假设是 ‘mydata’ 包含一个表示数据点的变量 <code>X</code>。</li>
</ul>
</li>
<li><p><strong>epsilon=0.5; MinPts=10;</strong></p>
<ul>
<li>定义DBSCAN算法的参数，<code>epsilon</code> 是邻域半径，<code>MinPts</code> 是邻域内最小数据点数。</li>
</ul>
</li>
<li><p><strong>IDX=DBSCAN(X,epsilon,MinPts);</strong></p>
<ul>
<li>调用DBSCAN函数，对数据 <code>X</code> 进行密度聚类，返回聚类结果 <code>IDX</code>。</li>
</ul>
</li>
<li><p><strong>function [IDX, isnoise]=DBSCAN(X,epsilon,MinPts)</strong></p>
<ul>
<li>定义DBSCAN算法的主函数，接受输入参数 <code>X</code>、<code>epsilon</code> 和 <code>MinPts</code>。</li>
</ul>
</li>
<li><p><strong>C=0;</strong></p>
<ul>
<li>初始化聚类簇数为0。</li>
</ul>
</li>
<li><p><strong>n=size(X,1); IDX=zeros(n,1);</strong></p>
<ul>
<li>获取数据点数量 <code>n</code>，初始化聚类标签 <code>IDX</code> 全部为0，表示所有点都是噪音点。</li>
</ul>
</li>
<li><p><strong>D=pdist2(X,X);</strong></p>
<ul>
<li>计算数据点之间的距离矩阵 <code>D</code>。</li>
</ul>
</li>
<li><p><strong>visited=false(n,1); isnoise=false(n,1);</strong></p>
<ul>
<li>初始化用于标记是否访问过的向量 <code>visited</code> 和标记是否为噪音点的向量 <code>isnoise</code>。</li>
</ul>
</li>
<li><p><strong>for i=1:n</strong></p>
<ul>
<li>开始对每个数据点进行迭代。</li>
</ul>
</li>
<li><p><strong>if ~visited(i)</strong></p>
<ul>
<li>如果当前点未被访问过，则执行以下操作。</li>
</ul>
</li>
<li><p><strong>visited(i)=true; Neighbors=RegionQuery(i);</strong></p>
<ul>
<li>将当前点标记为已访问，然后找到与当前点在邻域内的点集合 <code>Neighbors</code>。</li>
</ul>
</li>
<li><p><strong>if numel(Neighbors)&lt;MinPts</strong></p>
<ul>
<li>如果邻域内点的数量小于 <code>MinPts</code>，则将当前点标记为噪音点。</li>
</ul>
</li>
<li><p><strong>else</strong></p>
<ul>
<li>否则，执行以下聚类操作。</li>
</ul>
</li>
<li><p><strong>C=C+1; ExpandCluster(i,Neighbors,C);</strong></p>
<ul>
<li>增加聚类簇数，并进行扩展聚类操作。</li>
</ul>
</li>
<li><p><strong>function ExpandCluster(i,Neighbors,C)</strong></p>
<ul>
<li>定义扩展聚类的子函数，给定当前点、邻域内点集合和当前簇数。</li>
</ul>
</li>
<li><p><strong>IDX(i)=C;</strong></p>
<ul>
<li>将当前点标记为属于当前簇。</li>
</ul>
</li>
<li><p><strong>while true</strong></p>
<ul>
<li>进入循环，不断扩展聚类。</li>
</ul>
</li>
<li><p><strong>j = Neighbors(k);</strong></p>
<ul>
<li>取出邻域内的第 k 个点。</li>
</ul>
</li>
<li><p><strong>if ~visited(j)</strong></p>
<ul>
<li>如果该点未被访问过，则执行以下操作。</li>
</ul>
</li>
<li><p><strong>visited(j)=true; Neighbors2=RegionQuery(j);</strong></p>
<ul>
<li>将该点标记为已访问，然后找到与该点在邻域内的点集合 <code>Neighbors2</code>。</li>
</ul>
</li>
<li><p><strong>if numel(Neighbors2)&gt;=MinPts</strong></p>
<ul>
<li>如果新邻域内的点数量大于等于 <code>MinPts</code>，则将新邻域内的点添加到原邻域中。</li>
</ul>
</li>
<li><p><strong>Neighbors=[Neighbors Neighbors2];</strong></p>
<ul>
<li>将新邻域内的点添加到原邻域中。</li>
</ul>
</li>
<li><p><strong>end</strong></p>
<ul>
<li>结束新邻域内点的处理。</li>
</ul>
</li>
<li><p><strong>if IDX(j)==0</strong></p>
<ul>
<li>如果该点尚未被分配到任何簇，则将其分配到当前簇。</li>
</ul>
</li>
<li><p><strong>IDX(j)=C;</strong></p>
<ul>
<li>将该点标记为属于当前簇。</li>
</ul>
</li>
<li><p><strong>k = k + 1; if k &gt; numel(Neighbors) break; end</strong></p>
<ul>
<li>处理邻域内的下一个点，直到邻域内的所有点都被处理完。</li>
</ul>
</li>
<li><p><strong>function Neighbors=RegionQuery(i)</strong></p>
<ul>
<li>定义邻域查询的子函数，给定当前点的索引 <code>i</code>，返回在邻域内的点的索引集合。</li>
</ul>
</li>
<li><p><strong>Neighbors=find(D(i,:)&lt;=epsilon);</strong></p>
<ul>
<li>根据距离矩阵，找到与当前点距离在 <code>epsilon</code> 以内的点。</li>
</ul>
</li>
<li><p><strong>end</strong></p>
<ul>
<li>结束邻域查询子函数。</li>
</ul>
</li>
<li><p><strong>end</strong></p>
<ul>
<li>结束主函数。</li>
</ul>
</li>
</ol>
<p>这样，整个代码就实现了DBSCAN聚类算法。</p>
</blockquote>
<h2 id="多元回归分析"><a href="#多元回归分析" class="headerlink" title="多元回归分析"></a>多元回归分析</h2><blockquote>
<p>回归分析是数据分析中最基础也是最重要的分析工具，绝大多数的数据分析问题，都可以使用回归的思想来解决。回归分析的任务就是通过研究自变量X和因变量Y的相关关系，尝试去解释Y的形成机制，进而达到通过X去预测Y的目的</p>
<p>回归分析:研究X和Y相关性的分析（相关性≠因果性）</p>
<p>常见的回归分析有：线性回归、0-1回归、定序回归、计数回归和生存回归，其划分的依据是因变量y的类型。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129214522174.png" alt="image-20240129214522174"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129214533470.png" alt="image-20240129214533470"></p>
<h3 id="回归分析的作用"><a href="#回归分析的作用" class="headerlink" title="回归分析的作用"></a>回归分析的作用</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129214553725.png" alt="image-20240129214553725"></p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129214629247.png" alt="image-20240129214629247"></p>
<p><strong>数据的分类：<br>横截面数据</strong>：在某一时点收集的不同对象的数据。</p>
<h3 id="本章节主要是多元线性回归"><a href="#本章节主要是多元线性回归" class="headerlink" title="本章节主要是多元线性回归"></a>本章节主要是多元线性回归</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129214810466.png" alt="image-20240129214810466"></p>
<h2 id="一元线性回归"><a href="#一元线性回归" class="headerlink" title="一元线性回归"></a>一元线性回归</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129214828532.png" alt="image-20240129214828532"></p>
<blockquote>
<p>线性是灵动的</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129214850518.png" alt="image-20240129214850518"></p>
<blockquote>
<p>注意引入变量时候要多加考虑</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215013434.png" alt="image-20240129215013434"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215038603.png" alt="image-20240129215038603"></p>
<h4 id="外生性的要求"><a href="#外生性的要求" class="headerlink" title="外生性的要求"></a>外生性的要求</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215112238.png" alt="image-20240129215112238"></p>
<h4 id="什么时候取对数"><a href="#什么时候取对数" class="headerlink" title="什么时候取对数"></a>什么时候取对数</h4><p><strong>取对数的好处：</strong> （1）减弱数据的异方差性（2）如果变量本身不符合正态分布，取</p>
<p>了对数后 可能渐近服从正态分布（ 3 ）模型形式的需要，让模型具有经济学意义。</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215205907.png" alt="image-20240129215205907"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215212290.png" alt="image-20240129215212290"></p>
<p><strong>虚拟变量的解释:</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215246712.png" alt="image-20240129215246712"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215300615.png" alt="image-20240129215300615"></p>
<p><strong>多分类的虚拟变量的设置：</strong> </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215355156.png" alt="image-20240129215355156"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215401967.png" alt="image-20240129215401967"></p>
<p><strong><em>\</em>为了避免完全多重共线性的影响，引入虚拟变量的个数一般是分类数减\</strong>*<em>1,另外一个为对照组*<em>*<em>。*</em></em></em></p>
<p><strong>含有交互项的自变量：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215424047.png" alt="image-20240129215424047"></p>
<h3 id="回归实例："><a href="#回归实例：" class="headerlink" title="回归实例："></a><strong>回归实例：</strong></h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215502987.png" alt="image-20240129215502987"></p>
<p><strong>操作步骤：</strong></p>
<p><strong>stata软件：</strong></p>
<p>第一步：导入数据</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215527268.png" alt="image-20240129215527268"></p>
<p>第二步：数据描述性统计</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215541264.png" alt="image-20240129215541264"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215607055.png" alt="image-20240129215607055"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215619067.png" alt="image-20240129215619067"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215627382.png" alt="image-20240129215627382"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215637199.png" alt="image-20240129215637199"></p>
<p><strong>拟合优度R²较低怎么办：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215643497.png" alt="image-20240129215643497"></p>
<p><strong>标准回归化系数：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215700385.png" alt="image-20240129215700385"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215707976.png" alt="image-20240129215707976"></p>
<p><strong>使用OLS时，扰动项μ需要满足的条件：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215902585.png" alt="image-20240129215902585"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215928314.png" alt="image-20240129215928314"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215935706.png" alt="image-20240129215935706"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129215945766.png" alt="image-20240129215945766"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129220020904.png" alt="image-20240129220020904"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129220048086.png" alt="image-20240129220048086"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129220104904.png" alt="image-20240129220104904"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129220124650.png" alt="image-20240129220124650"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129220136200.png" alt="image-20240129220136200"></p>
<p><strong>多重共线性：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129220153354.png" alt="image-20240129220153354"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129220202916.png" alt="image-20240129220202916"></p>
<h3 id="处理方法："><a href="#处理方法：" class="headerlink" title="处理方法："></a>处理方法：</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129220239152.png" alt="image-20240129220239152"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129220248065.png" alt="image-20240129220248065"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129220300213.png" alt="image-20240129220300213"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240129220322288.png" alt="image-20240129220322288"></p>
<h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按键盘上的PageUp可以使用上一次输入的代码（Matlab中是上箭头）</span></span><br><span class="line"><span class="comment">// 清除所有变量</span></span><br><span class="line"><span class="keyword">clear</span></span><br><span class="line"><span class="comment">// 清屏 和 matlab的clc类似</span></span><br><span class="line">cls </span><br><span class="line"><span class="comment">// 导入数据（其实是我们直接在界面上粘贴过来的，我们用鼠标点界面导入更方便 本条请删除后再复制到论文中，如果评委老师看到了就知道这不是你写的了）</span></span><br><span class="line"><span class="comment">// import excel &quot;C:\Users\hc_lzp\Desktop\数学建模视频录制\第7讲.多元回归分析\代码和例题数据\课堂中讲解的奶粉数据.xlsx&quot;, sheet(&quot;Sheet1&quot;) firstrow</span></span><br><span class="line">import excel <span class="string">&quot;课堂中讲解的奶粉数据.xlsx&quot;</span>, sheet(<span class="string">&quot;Sheet1&quot;</span>) firstrow</span><br><span class="line"><span class="comment">// 定量变量的描述性统计</span></span><br><span class="line"><span class="keyword">summarize</span> 团购价元 评价量 商品毛重kg</span><br><span class="line"><span class="comment">// 定性变量的频数分布，并得到相应字母开头的虚拟变量</span></span><br><span class="line"><span class="keyword">tabulate</span> 配方,<span class="keyword">gen</span>(A)</span><br><span class="line"><span class="keyword">tabulate</span> 奶源产地 ,<span class="keyword">gen</span>(B)</span><br><span class="line"><span class="keyword">tabulate</span> 国产或进口 ,<span class="keyword">gen</span>(C)</span><br><span class="line"><span class="keyword">tabulate</span> 适用年龄岁 ,<span class="keyword">gen</span>(<span class="keyword">D</span>)</span><br><span class="line"><span class="keyword">tabulate</span> 包装单位 ,<span class="keyword">gen</span>(<span class="keyword">E</span>)</span><br><span class="line"><span class="keyword">tabulate</span> 分类 ,<span class="keyword">gen</span>(F)</span><br><span class="line"><span class="keyword">tabulate</span> 段位 ,<span class="keyword">gen</span>(<span class="keyword">G</span>)</span><br><span class="line"><span class="comment">// 下面进行回归</span></span><br><span class="line"><span class="keyword">regress</span> 评价量 团购价元 商品毛重kg</span><br><span class="line"><span class="comment">// 下面的语句可帮助我们把回归结果保存在Word文档中</span></span><br><span class="line"><span class="comment">// 在使用之前需要运行下面这个代码来安装下这个功能包（运行一次之后就可以注释掉了）</span></span><br><span class="line"><span class="comment">// ssc install reg2docx, all replace</span></span><br><span class="line"><span class="comment">// 如果安装出现connection timed out的错误，可以尝试换成手机热点联网，如果手机热点也不能下载，就不用这个命令吧，可以自己做一个回归结果表，如果觉得麻烦就直接把回归结果截图。</span></span><br><span class="line"><span class="keyword">est</span> store m1</span><br><span class="line">reg2docx m1 using m1.docx, <span class="keyword">replace</span></span><br><span class="line"><span class="comment">// *** p&lt;0.01  ** p&lt;0.05 * p&lt;0.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Stata会自动剔除多重共线性的变量</span></span><br><span class="line"><span class="keyword">regress</span> 评价量 团购价元 商品毛重kg A1 A2 A3 B1 B2 B3 B4 B5 B6 B7 B8 B9 C1 C2 D1 D2 D3 D4 D5 E1 E2 E3 E4 F1 F2 G1 G2 G3 G4</span><br><span class="line"><span class="keyword">est</span> store m2</span><br><span class="line">reg2docx m2 using m2.docx, <span class="keyword">replace</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 得到标准化回归系数</span></span><br><span class="line"><span class="keyword">regress</span> 评价量 团购价元 商品毛重kg, b </span><br><span class="line"></span><br><span class="line"><span class="comment">// 画出残差图</span></span><br><span class="line"><span class="keyword">regress</span> 评价量 团购价元 商品毛重kg A1 A2 A3 B1 B2 B3 B4 B5 B6 B7 B8 B9 C1 C2 D1 D2 D3 D4 D5 E1 E2 E3 E4 F1 F2 G1 G2 G3 G4</span><br><span class="line"><span class="keyword">rvfplot</span> </span><br><span class="line"><span class="comment">// 残差与拟合值的散点图</span></span><br><span class="line"><span class="keyword">graph</span> export a1.png ,<span class="keyword">replace</span></span><br><span class="line"><span class="comment">// 残差与自变量团购价的散点图</span></span><br><span class="line"><span class="keyword">rvpplot</span>  团购价元</span><br><span class="line"><span class="keyword">graph</span> export a2.png ,<span class="keyword">replace</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 为什么评价量的拟合值会出现负数？</span></span><br><span class="line"><span class="comment">// 描述性统计并给出分位数对应的数值</span></span><br><span class="line"><span class="keyword">summarize</span> 评价量,<span class="keyword">d</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 作评价量的概率密度估计图</span></span><br><span class="line"><span class="keyword">kdensity</span> 评价量 </span><br><span class="line"><span class="keyword">graph</span> export a3.png ,<span class="keyword">replace</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 异方差BP检验</span></span><br><span class="line"><span class="keyword">estat</span> <span class="keyword">hettest</span> ,rhs iid</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异方差怀特检验</span></span><br><span class="line"><span class="keyword">estat</span> <span class="keyword">imtest</span>,white</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用OLS + 稳健的标准误</span></span><br><span class="line"><span class="keyword">regress</span> 评价量 团购价元 商品毛重kg A1 A2 A3 B1 B2 B3 B4 B5 B6 B7 B8 B9 C1 C2 D1 D2 D3 D4 D5 E1 E2 E3 E4 F1 F2 G1 G2 G3 G4, r</span><br><span class="line"><span class="keyword">est</span> store m3</span><br><span class="line">reg2docx m3 using m3.docx, <span class="keyword">replace</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算VIF</span></span><br><span class="line"><span class="keyword">estat</span>  <span class="keyword">vif</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 逐步回归（一定要注意完全多重共线性的影响）</span></span><br><span class="line"><span class="comment">// 向前逐步回归（后面的r表示稳健的标准误）</span></span><br><span class="line"><span class="keyword">stepwise</span> <span class="keyword">reg</span> 评价量 团购价元 商品毛重kg A1 A3 B1 B2 B3 B4 B5 B6 B7 B9 C1 D1 D2 D3 D4 E1 E2 E3 F1 G1 G2 G3,  r pe(0.05)</span><br><span class="line"><span class="comment">// 向后逐步回归（后面的r表示稳健的标准误）</span></span><br><span class="line"><span class="keyword">stepwise</span> <span class="keyword">reg</span> 评价量 团购价元 商品毛重kg A1 A3 B1 B2 B3 B4 B5 B6 B7 B9 C1 D1 D2 D3 D4 E1 E2 E3 F1 G1 G2 G3,  r <span class="keyword">pr</span>(0.05)</span><br><span class="line"><span class="comment">// 向后逐步回归的同时使用标准化回归系数（在r后面跟上一个b即可）</span></span><br><span class="line"><span class="keyword">stepwise</span> <span class="keyword">reg</span> 评价量 团购价元 商品毛重kg A1 A3 B1 B2 B3 B4 B5 B6 B7 B9 C1 D1 D2 D3 D4 E1 E2 E3 F1 G1 G2 G3,  r b <span class="keyword">pr</span>(0.05)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 补充语法 (大家不需要具体的去学Stata软件，掌握我课堂上教给大家的一些命令应对数学建模比赛就可以啦)</span></span><br><span class="line"><span class="comment">// 事实上大家学好Excel，学好后应对90%的数据预处理问题都能解决</span></span><br><span class="line"><span class="comment">// (1) 用已知变量生成新的变量 </span></span><br><span class="line"><span class="keyword">generate</span> lny = <span class="built_in">log</span>(评价量)  </span><br><span class="line"><span class="keyword">generate</span> price_square = 团购价元 ^2</span><br><span class="line"><span class="keyword">generate</span> interaction_term = 团购价元*商品毛重kg</span><br><span class="line"></span><br><span class="line"><span class="comment">// (2) 修改变量名称，因为用中文命名变量名称有时候可能容易出现未知Bug</span></span><br><span class="line"><span class="keyword">rename</span> 团购价元 price</span><br></pre></td></tr></table></figure>
<h2 id="lasso回归"><a href="#lasso回归" class="headerlink" title="lasso回归"></a>lasso回归</h2><blockquote>
<p>LASSO 回归也叫套索回归，是通过生成一个惩罚函数是回归模型中的变量系数进行压缩，达到防止过度拟合，解决严重共线性的问题，LASSO 回归最先由英国人Robert Tibshirani提出，目前在预测模型中应用非常广泛。在新格兰文献中，有大牛提出，对于变量过多而且变量数较少的模型拟合，首先要考虑使用LASSO 惩罚函数。</p>
<p>变量过多会导致多重共线性问题造成回归系数不显著，甚至导致ols估计失效。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128130519231.png" alt="image-20240128130519231"></p>
<h3 id="Lasso回归的原理"><a href="#Lasso回归的原理" class="headerlink" title="Lasso回归的原理"></a>Lasso回归的原理</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128132142605.png" alt="image-20240128132142605"></p>
<h3 id="使用lasso回归分析"><a href="#使用lasso回归分析" class="headerlink" title="使用lasso回归分析"></a>使用lasso回归分析</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128132556845.png" alt="image-20240128132556845"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128132542976.png" alt="image-20240128132542976"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128132709587.png" alt="image-20240128132709587"></p>
<h2 id="什么时候使用lasso回归"><a href="#什么时候使用lasso回归" class="headerlink" title="什么时候使用lasso回归"></a>什么时候使用lasso回归</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E6%80%BB%E7%BB%93.htm/Totoro.trip\blog-demo\source\images\image-20240128132838334.png" alt="image-20240128132838334"></p>
<h3 id="代码学习与实现："><a href="#代码学习与实现：" class="headerlink" title="代码学习与实现："></a>代码学习与实现：</h3><h4 id="Stata：拉索开心读懂-Lasso入门-lianxh-cn"><a href="#Stata：拉索开心读懂-Lasso入门-lianxh-cn" class="headerlink" title="Stata：拉索开心读懂-Lasso入门 (lianxh.cn)"></a><a target="_blank" rel="noopener" href="https://www.lianxh.cn/news/c15e828b678e6.html">Stata：拉索开心读懂-Lasso入门 (lianxh.cn)</a></h4></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/px3.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Totoro</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">340</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/4512abc"><i class="fab fa-github"></i><span>🛴前往小窝......</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/4512abc" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:4512abc@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到龙猫の小窝</div></div><div class="sticky_layout"><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">340</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">1506.1k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-06-01T14:00:50.022Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 By Totoro</div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.<p><a target="_blank" href="https://hexo.io/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a>&nbsp;<a target="_blank" href="https://butterfly.js.org/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a>&nbsp;<a target="_blank" href="https://www.jsdelivr.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a> &nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&logo=Vercel" title="本站采用双线部署，默认线路托管于Vercel"></a>&nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&logo=Codio" title="本站采用双线部署，联通线路托管于Coding"></a>&nbsp;<a target="_blank" href="https://github.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Gtihub托管"></a>&nbsp;<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.12.0"></script><script src="/js/main.js?v=4.12.0"></script><script src="/js/tw_cn.js?v=4.12.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'HT1PalaKkPaG1UqAXBhJXIu8-gzGzoHsz',
      appKey: 'iT0TnVVAwf9zuZ7NqwclQItY',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.jsdelivr.net/npm/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script></div><script defer src="/js/light.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script async src="/js/title.js"></script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="只此无为身，且前行,忘记过去的人注定重蹈覆辙,我是我，我靠自己站立，我会做好自身,如果我睡大觉，谁给我摘月亮呢,假期和朋友，是人生中顶好的两样东西啊。,去爱，去失去，要不负相遇,没什么想不想通的，只是固执而已,我们深爱星辰，乃至不惧夜的黑,吃，喝，享受幸福，接受奇迹,浊水若长流，自清澄,雅俗共赏,总会有什么也不想的幸福时刻吧,时间顺流而下，生活逆流而上,悟已往之不谏，知来者之可追,希望你的小世界里,山花烂漫,茶酒俱全,安宁清淡,明朗欢愉" data-fontsize="18px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.12.0"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 380px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 320px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_12.webp);"> <a class="categoryBar-list-link" href="categories/刷题计划/">刷题计划</a><span class="categoryBar-list-count">72</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_13.webp);"> <a class="categoryBar-list-link" href="categories/ACMの旅/">ACMの旅</a><span class="categoryBar-list-count">75</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_14.webp);"> <a class="categoryBar-list-link" href="categories/期末の旅/">期末の旅</a><span class="categoryBar-list-count">21</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_17.webp);"> <a class="categoryBar-list-link" href="categories/数学建模/">数学建模</a><span class="categoryBar-list-count">31</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_18.webp);"> <a class="categoryBar-list-link" href="categories/前端の旅/">前端の旅</a><span class="categoryBar-list-count">15</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_19.webp);"> <a class="categoryBar-list-link" href="categories/编程基础/">编程基础</a><span class="categoryBar-list-count">34</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_20.webp);"> <a class="categoryBar-list-link" href="categories/CS知识/">CS知识</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_21.webp);"> <a class="categoryBar-list-link" href="categories/个人安排/">个人安排</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_22.webp);"> <a class="categoryBar-list-link" href="categories/文学/">文学</a><span class="categoryBar-list-count">29</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_22.webp);"> <a class="categoryBar-list-link" href="categories/杂项/">杂项</a><span class="categoryBar-list-count">6</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_23.webp);"> <a class="categoryBar-list-link" href="categories/少年游/">少年游</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_24.webp);"> <a class="categoryBar-list-link" href="categories/数据结构/">数据结构</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_25.webp);"> <a class="categoryBar-list-link" href="categories/牛客の旅/">牛客の旅</a><span class="categoryBar-list-count">43</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://source.fomal.cc/img/default_cover_26.webp);"> <a class="categoryBar-list-link" href="categories/C-实训/">C++实训</a><span class="categoryBar-list-count">8</span><span class="categoryBar-list-descr"></span></li></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/01/29/诗兴大发/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_69.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-01-29</span><a class="blog-slider__title" href="2024/01/29/诗兴大发/" alt="">诗兴大发</a><div class="blog-slider__text">未觉，却是中二少年的诗仙梦</div><a class="blog-slider__button" href="2024/01/29/诗兴大发/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/02/13/数据结构与算法-1/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/ushio-api-img-moe@5.0.64/img_649_702x1000_300_null_normal.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-02-13</span><a class="blog-slider__title" href="2024/02/13/数据结构与算法-1/" alt="">数据结构与算法(总)</a><div class="blog-slider__text">方便大二看（）</div><a class="blog-slider__button" href="2024/02/13/数据结构与算法-1/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/02/24/常见优化技巧/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_238.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-02-24</span><a class="blog-slider__title" href="2024/02/24/常见优化技巧/" alt="">常见优化技巧</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2024/02/24/常见优化技巧/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>